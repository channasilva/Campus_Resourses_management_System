function iS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var z_={exports:{}},rd={},W_={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Symbol.for("react.element"),sS=Symbol.for("react.portal"),oS=Symbol.for("react.fragment"),aS=Symbol.for("react.strict_mode"),lS=Symbol.for("react.profiler"),uS=Symbol.for("react.provider"),cS=Symbol.for("react.context"),dS=Symbol.for("react.forward_ref"),hS=Symbol.for("react.suspense"),fS=Symbol.for("react.memo"),pS=Symbol.for("react.lazy"),Dy=Symbol.iterator;function mS(t){return t===null||typeof t!="object"?null:(t=Dy&&t[Dy]||t["@@iterator"],typeof t=="function"?t:null)}var q_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H_=Object.assign,G_={};function _o(t,e,n){this.props=t,this.context=e,this.refs=G_,this.updater=n||q_}_o.prototype.isReactComponent={};_o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function K_(){}K_.prototype=_o.prototype;function jp(t,e,n){this.props=t,this.context=e,this.refs=G_,this.updater=n||q_}var $p=jp.prototype=new K_;$p.constructor=jp;H_($p,_o.prototype);$p.isPureReactComponent=!0;var Oy=Array.isArray,Q_=Object.prototype.hasOwnProperty,zp={current:null},Y_={key:!0,ref:!0,__self:!0,__source:!0};function X_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Q_.call(e,r)&&!Y_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:_l,type:t,key:s,ref:o,props:i,_owner:zp.current}}function gS(t,e){return{$$typeof:_l,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wp(t){return typeof t=="object"&&t!==null&&t.$$typeof===_l}function yS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ly=/\/+/g;function dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yS(""+t.key):e.toString(36)}function Fu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _l:case sS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+dh(o,0):r,Oy(i)?(n="",t!=null&&(n=t.replace(Ly,"$&/")+"/"),Fu(i,e,n,"",function(c){return c})):i!=null&&(Wp(i)&&(i=gS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ly,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Oy(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+dh(s,l);o+=Fu(s,e,n,u,i)}else if(u=mS(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+dh(s,l++),o+=Fu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function du(t,e,n){if(t==null)return t;var r=[],i=0;return Fu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function vS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zt={current:null},Bu={transition:null},_S={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:Bu,ReactCurrentOwner:zp};function J_(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:du,forEach:function(t,e,n){du(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return du(t,function(){e++}),e},toArray:function(t){return du(t,function(e){return e})||[]},only:function(t){if(!Wp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};oe.Component=_o;oe.Fragment=oS;oe.Profiler=lS;oe.PureComponent=jp;oe.StrictMode=aS;oe.Suspense=hS;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_S;oe.act=J_;oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=H_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=zp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Q_.call(e,u)&&!Y_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:_l,type:t.type,key:i,ref:s,props:r,_owner:o}};oe.createContext=function(t){return t={$$typeof:cS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uS,_context:t},t.Consumer=t};oe.createElement=X_;oe.createFactory=function(t){var e=X_.bind(null,t);return e.type=t,e};oe.createRef=function(){return{current:null}};oe.forwardRef=function(t){return{$$typeof:dS,render:t}};oe.isValidElement=Wp;oe.lazy=function(t){return{$$typeof:pS,_payload:{_status:-1,_result:t},_init:vS}};oe.memo=function(t,e){return{$$typeof:fS,type:t,compare:e===void 0?null:e}};oe.startTransition=function(t){var e=Bu.transition;Bu.transition={};try{t()}finally{Bu.transition=e}};oe.unstable_act=J_;oe.useCallback=function(t,e){return zt.current.useCallback(t,e)};oe.useContext=function(t){return zt.current.useContext(t)};oe.useDebugValue=function(){};oe.useDeferredValue=function(t){return zt.current.useDeferredValue(t)};oe.useEffect=function(t,e){return zt.current.useEffect(t,e)};oe.useId=function(){return zt.current.useId()};oe.useImperativeHandle=function(t,e,n){return zt.current.useImperativeHandle(t,e,n)};oe.useInsertionEffect=function(t,e){return zt.current.useInsertionEffect(t,e)};oe.useLayoutEffect=function(t,e){return zt.current.useLayoutEffect(t,e)};oe.useMemo=function(t,e){return zt.current.useMemo(t,e)};oe.useReducer=function(t,e,n){return zt.current.useReducer(t,e,n)};oe.useRef=function(t){return zt.current.useRef(t)};oe.useState=function(t){return zt.current.useState(t)};oe.useSyncExternalStore=function(t,e,n){return zt.current.useSyncExternalStore(t,e,n)};oe.useTransition=function(){return zt.current.useTransition()};oe.version="18.3.1";W_.exports=oe;var L=W_.exports;const Y=nd(L),wS=iS({__proto__:null,default:Y},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES=L,TS=Symbol.for("react.element"),kS=Symbol.for("react.fragment"),IS=Object.prototype.hasOwnProperty,SS=ES.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bS={key:!0,ref:!0,__self:!0,__source:!0};function Z_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)IS.call(e,r)&&!bS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:TS,type:t,key:s,ref:o,props:i,_owner:SS.current}}rd.Fragment=kS;rd.jsx=Z_;rd.jsxs=Z_;z_.exports=rd;var qp=z_.exports;const hi=qp.Fragment,g=qp.jsx,C=qp.jsxs;var ew={exports:{}},cn={},tw={exports:{}},nw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,X){var Q=q.length;q.push(X);e:for(;0<Q;){var ce=Q-1>>>1,ae=q[ce];if(0<i(ae,X))q[ce]=X,q[Q]=ae,Q=ce;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var X=q[0],Q=q.pop();if(Q!==X){q[0]=Q;e:for(var ce=0,ae=q.length,we=ae>>>1;ce<we;){var it=2*(ce+1)-1,Lt=q[it],kt=it+1,st=q[kt];if(0>i(Lt,Q))kt<ae&&0>i(st,Lt)?(q[ce]=st,q[kt]=Q,ce=kt):(q[ce]=Lt,q[it]=Q,ce=it);else if(kt<ae&&0>i(st,Q))q[ce]=st,q[kt]=Q,ce=kt;else break e}}return X}function i(q,X){var Q=q.sortIndex-X.sortIndex;return Q!==0?Q:q.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,f=null,m=3,y=!1,T=!1,I=!1,N=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=q)r(c),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(c)}}function P(q){if(I=!1,E(q),!T)if(n(u)!==null)T=!0,Ge(U);else{var X=n(c);X!==null&&Ot(P,X.startTime-q)}}function U(q,X){T=!1,I&&(I=!1,k(_),_=-1),y=!0;var Q=m;try{for(E(X),f=n(u);f!==null&&(!(f.expirationTime>X)||q&&!R());){var ce=f.callback;if(typeof ce=="function"){f.callback=null,m=f.priorityLevel;var ae=ce(f.expirationTime<=X);X=t.unstable_now(),typeof ae=="function"?f.callback=ae:f===n(u)&&r(u),E(X)}else r(u);f=n(u)}if(f!==null)var we=!0;else{var it=n(c);it!==null&&Ot(P,it.startTime-X),we=!1}return we}finally{f=null,m=Q,y=!1}}var j=!1,S=null,_=-1,b=5,x=-1;function R(){return!(t.unstable_now()-x<b)}function D(){if(S!==null){var q=t.unstable_now();x=q;var X=!0;try{X=S(!0,q)}finally{X?A():(j=!1,S=null)}}else j=!1}var A;if(typeof w=="function")A=function(){w(D)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,qt=je.port2;je.port1.onmessage=D,A=function(){qt.postMessage(null)}}else A=function(){N(D,0)};function Ge(q){S=q,j||(j=!0,A())}function Ot(q,X){_=N(function(){q(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){T||y||(T=!0,Ge(U))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Q=m;m=X;try{return q()}finally{m=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Q=m;m=q;try{return X()}finally{m=Q}},t.unstable_scheduleCallback=function(q,X,Q){var ce=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ce+Q:ce):Q=ce,q){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Q+ae,q={id:h++,callback:X,priorityLevel:q,startTime:Q,expirationTime:ae,sortIndex:-1},Q>ce?(q.sortIndex=Q,e(c,q),n(u)===null&&q===n(c)&&(I?(k(_),_=-1):I=!0,Ot(P,Q-ce))):(q.sortIndex=ae,e(u,q),T||y||(T=!0,Ge(U))),q},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(q){var X=m;return function(){var Q=m;m=X;try{return q.apply(this,arguments)}finally{m=Q}}}})(nw);tw.exports=nw;var xS=tw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS=L,un=xS;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rw=new Set,Ba={};function as(t,e){ro(t,e),ro(t+"Capture",e)}function ro(t,e){for(Ba[t]=e,t=0;t<e.length;t++)rw.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sf=Object.prototype.hasOwnProperty,CS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vy={},My={};function NS(t){return sf.call(My,t)?!0:sf.call(Vy,t)?!1:CS.test(t)?My[t]=!0:(Vy[t]=!0,!1)}function RS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PS(t,e,n,r){if(e===null||typeof e>"u"||RS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new Wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new Wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new Wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new Wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new Wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new Wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new Wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new Wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new Wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hp=/[\-:]([a-z])/g;function Gp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hp,Gp);Et[e]=new Wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hp,Gp);Et[e]=new Wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hp,Gp);Et[e]=new Wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new Wt(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new Wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new Wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kp(t,e,n,r){var i=Et.hasOwnProperty(e)?Et[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PS(e,n,i,r)&&(n=null),r||i===null?NS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cr=AS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hu=Symbol.for("react.element"),Ns=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),Qp=Symbol.for("react.strict_mode"),of=Symbol.for("react.profiler"),iw=Symbol.for("react.provider"),sw=Symbol.for("react.context"),Yp=Symbol.for("react.forward_ref"),af=Symbol.for("react.suspense"),lf=Symbol.for("react.suspense_list"),Xp=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),ow=Symbol.for("react.offscreen"),Uy=Symbol.iterator;function Jo(t){return t===null||typeof t!="object"?null:(t=Uy&&t[Uy]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,hh;function ha(t){if(hh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hh=e&&e[1]||""}return`
`+hh+t}var fh=!1;function ph(t,e){if(!t||fh)return"";fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{fh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ha(t):""}function DS(t){switch(t.tag){case 5:return ha(t.type);case 16:return ha("Lazy");case 13:return ha("Suspense");case 19:return ha("SuspenseList");case 0:case 2:case 15:return t=ph(t.type,!1),t;case 11:return t=ph(t.type.render,!1),t;case 1:return t=ph(t.type,!0),t;default:return""}}function uf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case Ns:return"Portal";case of:return"Profiler";case Qp:return"StrictMode";case af:return"Suspense";case lf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sw:return(t.displayName||"Context")+".Consumer";case iw:return(t._context.displayName||"Context")+".Provider";case Yp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xp:return e=t.displayName||null,e!==null?e:uf(t.type)||"Memo";case Br:e=t._payload,t=t._init;try{return uf(t(e))}catch{}}return null}function OS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uf(e);case 8:return e===Qp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LS(t){var e=aw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fu(t){t._valueTracker||(t._valueTracker=LS(t))}function lw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ac(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cf(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function uw(t,e){e=e.checked,e!=null&&Kp(t,"checked",e,!1)}function df(t,e){uw(t,e);var n=fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hf(t,e.type,n):e.hasOwnProperty("defaultValue")&&hf(t,e.type,fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function By(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hf(t,e,n){(e!=="number"||ac(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fa=Array.isArray;function Hs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ff(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(fa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fi(n)}}function cw(t,e){var n=fi(e.value),r=fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function $y(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pu,hw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pu=pu||document.createElement("div"),pu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ja(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VS=["Webkit","ms","Moz","O"];Object.keys(Ia).forEach(function(t){VS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ia[e]=Ia[t]})});function fw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ia.hasOwnProperty(t)&&Ia[t]?(""+e).trim():e+"px"}function pw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var MS=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mf(t,e){if(e){if(MS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function gf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yf=null;function Jp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vf=null,Gs=null,Ks=null;function zy(t){if(t=Tl(t)){if(typeof vf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ld(e),vf(t.stateNode,t.type,e))}}function mw(t){Gs?Ks?Ks.push(t):Ks=[t]:Gs=t}function gw(){if(Gs){var t=Gs,e=Ks;if(Ks=Gs=null,zy(t),e)for(t=0;t<e.length;t++)zy(e[t])}}function yw(t,e){return t(e)}function vw(){}var mh=!1;function _w(t,e,n){if(mh)return t(e,n);mh=!0;try{return yw(t,e,n)}finally{mh=!1,(Gs!==null||Ks!==null)&&(vw(),gw())}}function $a(t,e){var n=t.stateNode;if(n===null)return null;var r=ld(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var _f=!1;if(wr)try{var Zo={};Object.defineProperty(Zo,"passive",{get:function(){_f=!0}}),window.addEventListener("test",Zo,Zo),window.removeEventListener("test",Zo,Zo)}catch{_f=!1}function US(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Sa=!1,lc=null,uc=!1,wf=null,FS={onError:function(t){Sa=!0,lc=t}};function BS(t,e,n,r,i,s,o,l,u){Sa=!1,lc=null,US.apply(FS,arguments)}function jS(t,e,n,r,i,s,o,l,u){if(BS.apply(this,arguments),Sa){if(Sa){var c=lc;Sa=!1,lc=null}else throw Error(z(198));uc||(uc=!0,wf=c)}}function ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ww(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wy(t){if(ls(t)!==t)throw Error(z(188))}function $S(t){var e=t.alternate;if(!e){if(e=ls(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Wy(i),t;if(s===r)return Wy(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Ew(t){return t=$S(t),t!==null?Tw(t):null}function Tw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tw(t);if(e!==null)return e;t=t.sibling}return null}var kw=un.unstable_scheduleCallback,qy=un.unstable_cancelCallback,zS=un.unstable_shouldYield,WS=un.unstable_requestPaint,Qe=un.unstable_now,qS=un.unstable_getCurrentPriorityLevel,Zp=un.unstable_ImmediatePriority,Iw=un.unstable_UserBlockingPriority,cc=un.unstable_NormalPriority,HS=un.unstable_LowPriority,Sw=un.unstable_IdlePriority,id=null,Gn=null;function GS(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(id,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:YS,KS=Math.log,QS=Math.LN2;function YS(t){return t>>>=0,t===0?32:31-(KS(t)/QS|0)|0}var mu=64,gu=4194304;function pa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=pa(l):(s&=o,s!==0&&(r=pa(s)))}else o=n&~i,o!==0?r=pa(o):s!==0&&(r=pa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xn(e),i=1<<n,r|=t[n],e&=~i;return r}function XS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-xn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=XS(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Ef(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bw(){var t=mu;return mu<<=1,!(mu&4194240)&&(mu=64),t}function gh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=n}function ZS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function em(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function xw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Aw,tm,Cw,Nw,Rw,Tf=!1,yu=[],ei=null,ti=null,ni=null,za=new Map,Wa=new Map,$r=[],eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hy(t,e){switch(t){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":za.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(e.pointerId)}}function ea(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Tl(e),e!==null&&tm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tb(t,e,n,r,i){switch(e){case"focusin":return ei=ea(ei,t,e,n,r,i),!0;case"dragenter":return ti=ea(ti,t,e,n,r,i),!0;case"mouseover":return ni=ea(ni,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return za.set(s,ea(za.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Wa.set(s,ea(Wa.get(s)||null,t,e,n,r,i)),!0}return!1}function Pw(t){var e=Ui(t.target);if(e!==null){var n=ls(e);if(n!==null){if(e=n.tag,e===13){if(e=ww(n),e!==null){t.blockedOn=e,Rw(t.priority,function(){Cw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=kf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yf=r,n.target.dispatchEvent(r),yf=null}else return e=Tl(n),e!==null&&tm(e),t.blockedOn=n,!1;e.shift()}return!0}function Gy(t,e,n){ju(t)&&n.delete(e)}function nb(){Tf=!1,ei!==null&&ju(ei)&&(ei=null),ti!==null&&ju(ti)&&(ti=null),ni!==null&&ju(ni)&&(ni=null),za.forEach(Gy),Wa.forEach(Gy)}function ta(t,e){t.blockedOn===e&&(t.blockedOn=null,Tf||(Tf=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,nb)))}function qa(t){function e(i){return ta(i,t)}if(0<yu.length){ta(yu[0],t);for(var n=1;n<yu.length;n++){var r=yu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ei!==null&&ta(ei,t),ti!==null&&ta(ti,t),ni!==null&&ta(ni,t),za.forEach(e),Wa.forEach(e),n=0;n<$r.length;n++)r=$r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$r.length&&(n=$r[0],n.blockedOn===null);)Pw(n),n.blockedOn===null&&$r.shift()}var Qs=Cr.ReactCurrentBatchConfig,hc=!0;function rb(t,e,n,r){var i=ke,s=Qs.transition;Qs.transition=null;try{ke=1,nm(t,e,n,r)}finally{ke=i,Qs.transition=s}}function ib(t,e,n,r){var i=ke,s=Qs.transition;Qs.transition=null;try{ke=4,nm(t,e,n,r)}finally{ke=i,Qs.transition=s}}function nm(t,e,n,r){if(hc){var i=kf(t,e,n,r);if(i===null)bh(t,e,r,fc,n),Hy(t,r);else if(tb(i,t,e,n,r))r.stopPropagation();else if(Hy(t,r),e&4&&-1<eb.indexOf(t)){for(;i!==null;){var s=Tl(i);if(s!==null&&Aw(s),s=kf(t,e,n,r),s===null&&bh(t,e,r,fc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else bh(t,e,r,null,n)}}var fc=null;function kf(t,e,n,r){if(fc=null,t=Jp(r),t=Ui(t),t!==null)if(e=ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ww(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fc=t,null}function Dw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qS()){case Zp:return 1;case Iw:return 4;case cc:case HS:return 16;case Sw:return 536870912;default:return 16}default:return 16}}var Yr=null,rm=null,$u=null;function Ow(){if($u)return $u;var t,e=rm,n=e.length,r,i="value"in Yr?Yr.value:Yr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return $u=i.slice(t,1<r?1-r:void 0)}function zu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vu(){return!0}function Ky(){return!1}function dn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vu:Ky,this.isPropagationStopped=Ky,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vu)},persist:function(){},isPersistent:vu}),e}var wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},im=dn(wo),El=Fe({},wo,{view:0,detail:0}),sb=dn(El),yh,vh,na,sd=Fe({},El,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==na&&(na&&t.type==="mousemove"?(yh=t.screenX-na.screenX,vh=t.screenY-na.screenY):vh=yh=0,na=t),yh)},movementY:function(t){return"movementY"in t?t.movementY:vh}}),Qy=dn(sd),ob=Fe({},sd,{dataTransfer:0}),ab=dn(ob),lb=Fe({},El,{relatedTarget:0}),_h=dn(lb),ub=Fe({},wo,{animationName:0,elapsedTime:0,pseudoElement:0}),cb=dn(ub),db=Fe({},wo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hb=dn(db),fb=Fe({},wo,{data:0}),Yy=dn(fb),pb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gb[t])?!!e[t]:!1}function sm(){return yb}var vb=Fe({},El,{key:function(t){if(t.key){var e=pb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sm,charCode:function(t){return t.type==="keypress"?zu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_b=dn(vb),wb=Fe({},sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xy=dn(wb),Eb=Fe({},El,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sm}),Tb=dn(Eb),kb=Fe({},wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ib=dn(kb),Sb=Fe({},sd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bb=dn(Sb),xb=[9,13,27,32],om=wr&&"CompositionEvent"in window,ba=null;wr&&"documentMode"in document&&(ba=document.documentMode);var Ab=wr&&"TextEvent"in window&&!ba,Lw=wr&&(!om||ba&&8<ba&&11>=ba),Jy=String.fromCharCode(32),Zy=!1;function Vw(t,e){switch(t){case"keyup":return xb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function Cb(t,e){switch(t){case"compositionend":return Mw(e);case"keypress":return e.which!==32?null:(Zy=!0,Jy);case"textInput":return t=e.data,t===Jy&&Zy?null:t;default:return null}}function Nb(t,e){if(Ps)return t==="compositionend"||!om&&Vw(t,e)?(t=Ow(),$u=rm=Yr=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lw&&e.locale!=="ko"?null:e.data;default:return null}}var Rb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Rb[t.type]:e==="textarea"}function Uw(t,e,n,r){mw(r),e=pc(e,"onChange"),0<e.length&&(n=new im("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xa=null,Ha=null;function Pb(t){Qw(t,0)}function od(t){var e=Ls(t);if(lw(e))return t}function Db(t,e){if(t==="change")return e}var Fw=!1;if(wr){var wh;if(wr){var Eh="oninput"in document;if(!Eh){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),Eh=typeof tv.oninput=="function"}wh=Eh}else wh=!1;Fw=wh&&(!document.documentMode||9<document.documentMode)}function nv(){xa&&(xa.detachEvent("onpropertychange",Bw),Ha=xa=null)}function Bw(t){if(t.propertyName==="value"&&od(Ha)){var e=[];Uw(e,Ha,t,Jp(t)),_w(Pb,e)}}function Ob(t,e,n){t==="focusin"?(nv(),xa=e,Ha=n,xa.attachEvent("onpropertychange",Bw)):t==="focusout"&&nv()}function Lb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return od(Ha)}function Vb(t,e){if(t==="click")return od(e)}function Mb(t,e){if(t==="input"||t==="change")return od(e)}function Ub(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:Ub;function Ga(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sf.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function rv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iv(t,e){var n=rv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rv(n)}}function jw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $w(){for(var t=window,e=ac();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ac(t.document)}return e}function am(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Fb(t){var e=$w(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jw(n.ownerDocument.documentElement,n)){if(r!==null&&am(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=iv(n,s);var o=iv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bb=wr&&"documentMode"in document&&11>=document.documentMode,Ds=null,If=null,Aa=null,Sf=!1;function sv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sf||Ds==null||Ds!==ac(r)||(r=Ds,"selectionStart"in r&&am(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Aa&&Ga(Aa,r)||(Aa=r,r=pc(If,"onSelect"),0<r.length&&(e=new im("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ds)))}function _u(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Os={animationend:_u("Animation","AnimationEnd"),animationiteration:_u("Animation","AnimationIteration"),animationstart:_u("Animation","AnimationStart"),transitionend:_u("Transition","TransitionEnd")},Th={},zw={};wr&&(zw=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function ad(t){if(Th[t])return Th[t];if(!Os[t])return t;var e=Os[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zw)return Th[t]=e[n];return t}var Ww=ad("animationend"),qw=ad("animationiteration"),Hw=ad("animationstart"),Gw=ad("transitionend"),Kw=new Map,ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(t,e){Kw.set(t,e),as(e,[t])}for(var kh=0;kh<ov.length;kh++){var Ih=ov[kh],jb=Ih.toLowerCase(),$b=Ih[0].toUpperCase()+Ih.slice(1);_i(jb,"on"+$b)}_i(Ww,"onAnimationEnd");_i(qw,"onAnimationIteration");_i(Hw,"onAnimationStart");_i("dblclick","onDoubleClick");_i("focusin","onFocus");_i("focusout","onBlur");_i(Gw,"onTransitionEnd");ro("onMouseEnter",["mouseout","mouseover"]);ro("onMouseLeave",["mouseout","mouseover"]);ro("onPointerEnter",["pointerout","pointerover"]);ro("onPointerLeave",["pointerout","pointerover"]);as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));as("onBeforeInput",["compositionend","keypress","textInput","paste"]);as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function av(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jS(r,e,void 0,t),t.currentTarget=null}function Qw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;av(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;av(i,l,c),s=u}}}if(uc)throw t=wf,uc=!1,wf=null,t}function Re(t,e){var n=e[Nf];n===void 0&&(n=e[Nf]=new Set);var r=t+"__bubble";n.has(r)||(Yw(e,t,2,!1),n.add(r))}function Sh(t,e,n){var r=0;e&&(r|=4),Yw(n,t,r,e)}var wu="_reactListening"+Math.random().toString(36).slice(2);function Ka(t){if(!t[wu]){t[wu]=!0,rw.forEach(function(n){n!=="selectionchange"&&(zb.has(n)||Sh(n,!1,t),Sh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wu]||(e[wu]=!0,Sh("selectionchange",!1,e))}}function Yw(t,e,n,r){switch(Dw(e)){case 1:var i=rb;break;case 4:i=ib;break;default:i=nm}n=i.bind(null,e,n,t),i=void 0,!_f||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function bh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ui(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}_w(function(){var c=s,h=Jp(n),f=[];e:{var m=Kw.get(t);if(m!==void 0){var y=im,T=t;switch(t){case"keypress":if(zu(n)===0)break e;case"keydown":case"keyup":y=_b;break;case"focusin":T="focus",y=_h;break;case"focusout":T="blur",y=_h;break;case"beforeblur":case"afterblur":y=_h;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Qy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=ab;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Tb;break;case Ww:case qw:case Hw:y=cb;break;case Gw:y=Ib;break;case"scroll":y=sb;break;case"wheel":y=bb;break;case"copy":case"cut":case"paste":y=hb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Xy}var I=(e&4)!==0,N=!I&&t==="scroll",k=I?m!==null?m+"Capture":null:m;I=[];for(var w=c,E;w!==null;){E=w;var P=E.stateNode;if(E.tag===5&&P!==null&&(E=P,k!==null&&(P=$a(w,k),P!=null&&I.push(Qa(w,P,E)))),N)break;w=w.return}0<I.length&&(m=new y(m,T,null,n,h),f.push({event:m,listeners:I}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==yf&&(T=n.relatedTarget||n.fromElement)&&(Ui(T)||T[Er]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(T=n.relatedTarget||n.toElement,y=c,T=T?Ui(T):null,T!==null&&(N=ls(T),T!==N||T.tag!==5&&T.tag!==6)&&(T=null)):(y=null,T=c),y!==T)){if(I=Qy,P="onMouseLeave",k="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(I=Xy,P="onPointerLeave",k="onPointerEnter",w="pointer"),N=y==null?m:Ls(y),E=T==null?m:Ls(T),m=new I(P,w+"leave",y,n,h),m.target=N,m.relatedTarget=E,P=null,Ui(h)===c&&(I=new I(k,w+"enter",T,n,h),I.target=E,I.relatedTarget=N,P=I),N=P,y&&T)t:{for(I=y,k=T,w=0,E=I;E;E=Ss(E))w++;for(E=0,P=k;P;P=Ss(P))E++;for(;0<w-E;)I=Ss(I),w--;for(;0<E-w;)k=Ss(k),E--;for(;w--;){if(I===k||k!==null&&I===k.alternate)break t;I=Ss(I),k=Ss(k)}I=null}else I=null;y!==null&&lv(f,m,y,I,!1),T!==null&&N!==null&&lv(f,N,T,I,!0)}}e:{if(m=c?Ls(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var U=Db;else if(ev(m))if(Fw)U=Mb;else{U=Lb;var j=Ob}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=Vb);if(U&&(U=U(t,c))){Uw(f,U,n,h);break e}j&&j(t,m,c),t==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&hf(m,"number",m.value)}switch(j=c?Ls(c):window,t){case"focusin":(ev(j)||j.contentEditable==="true")&&(Ds=j,If=c,Aa=null);break;case"focusout":Aa=If=Ds=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,sv(f,n,h);break;case"selectionchange":if(Bb)break;case"keydown":case"keyup":sv(f,n,h)}var S;if(om)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ps?Vw(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Lw&&n.locale!=="ko"&&(Ps||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ps&&(S=Ow()):(Yr=h,rm="value"in Yr?Yr.value:Yr.textContent,Ps=!0)),j=pc(c,_),0<j.length&&(_=new Yy(_,t,null,n,h),f.push({event:_,listeners:j}),S?_.data=S:(S=Mw(n),S!==null&&(_.data=S)))),(S=Ab?Cb(t,n):Nb(t,n))&&(c=pc(c,"onBeforeInput"),0<c.length&&(h=new Yy("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=S))}Qw(f,e)})}function Qa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=$a(t,n),s!=null&&r.unshift(Qa(t,s,i)),s=$a(t,e),s!=null&&r.push(Qa(t,s,i))),t=t.return}return r}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lv(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=$a(n,s),u!=null&&o.unshift(Qa(n,u,l))):i||(u=$a(n,s),u!=null&&o.push(Qa(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Wb=/\r\n?/g,qb=/\u0000|\uFFFD/g;function uv(t){return(typeof t=="string"?t:""+t).replace(Wb,`
`).replace(qb,"")}function Eu(t,e,n){if(e=uv(e),uv(t)!==e&&n)throw Error(z(425))}function mc(){}var bf=null,xf=null;function Af(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cf=typeof setTimeout=="function"?setTimeout:void 0,Hb=typeof clearTimeout=="function"?clearTimeout:void 0,cv=typeof Promise=="function"?Promise:void 0,Gb=typeof queueMicrotask=="function"?queueMicrotask:typeof cv<"u"?function(t){return cv.resolve(null).then(t).catch(Kb)}:Cf;function Kb(t){setTimeout(function(){throw t})}function xh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),qa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);qa(e)}function ri(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Eo,Ya="__reactProps$"+Eo,Er="__reactContainer$"+Eo,Nf="__reactEvents$"+Eo,Qb="__reactListeners$"+Eo,Yb="__reactHandles$"+Eo;function Ui(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Er]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dv(t);t!==null;){if(n=t[Wn])return n;t=dv(t)}return e}t=n,n=t.parentNode}return null}function Tl(t){return t=t[Wn]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ls(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ld(t){return t[Ya]||null}var Rf=[],Vs=-1;function wi(t){return{current:t}}function Oe(t){0>Vs||(t.current=Rf[Vs],Rf[Vs]=null,Vs--)}function Ce(t,e){Vs++,Rf[Vs]=t.current,t.current=e}var pi={},Pt=wi(pi),Xt=wi(!1),Qi=pi;function io(t,e){var n=t.type.contextTypes;if(!n)return pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jt(t){return t=t.childContextTypes,t!=null}function gc(){Oe(Xt),Oe(Pt)}function hv(t,e,n){if(Pt.current!==pi)throw Error(z(168));Ce(Pt,e),Ce(Xt,n)}function Xw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,OS(t)||"Unknown",i));return Fe({},n,r)}function yc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pi,Qi=Pt.current,Ce(Pt,t),Ce(Xt,Xt.current),!0}function fv(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Xw(t,e,Qi),r.__reactInternalMemoizedMergedChildContext=t,Oe(Xt),Oe(Pt),Ce(Pt,t)):Oe(Xt),Ce(Xt,n)}var dr=null,ud=!1,Ah=!1;function Jw(t){dr===null?dr=[t]:dr.push(t)}function Xb(t){ud=!0,Jw(t)}function Ei(){if(!Ah&&dr!==null){Ah=!0;var t=0,e=ke;try{var n=dr;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}dr=null,ud=!1}catch(i){throw dr!==null&&(dr=dr.slice(t+1)),kw(Zp,Ei),i}finally{ke=e,Ah=!1}}return null}var Ms=[],Us=0,vc=null,_c=0,pn=[],mn=0,Yi=null,hr=1,fr="";function Li(t,e){Ms[Us++]=_c,Ms[Us++]=vc,vc=t,_c=e}function Zw(t,e,n){pn[mn++]=hr,pn[mn++]=fr,pn[mn++]=Yi,Yi=t;var r=hr;t=fr;var i=32-xn(r)-1;r&=~(1<<i),n+=1;var s=32-xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,hr=1<<32-xn(e)+i|n<<i|r,fr=s+t}else hr=1<<s|n<<i|r,fr=t}function lm(t){t.return!==null&&(Li(t,1),Zw(t,1,0))}function um(t){for(;t===vc;)vc=Ms[--Us],Ms[Us]=null,_c=Ms[--Us],Ms[Us]=null;for(;t===Yi;)Yi=pn[--mn],pn[mn]=null,fr=pn[--mn],pn[mn]=null,hr=pn[--mn],pn[mn]=null}var ln=null,sn=null,Le=!1,bn=null;function eE(t,e){var n=gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,sn=ri(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yi!==null?{id:hr,overflow:fr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,sn=null,!0):!1;default:return!1}}function Pf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Df(t){if(Le){var e=sn;if(e){var n=e;if(!pv(t,e)){if(Pf(t))throw Error(z(418));e=ri(n.nextSibling);var r=ln;e&&pv(t,e)?eE(r,n):(t.flags=t.flags&-4097|2,Le=!1,ln=t)}}else{if(Pf(t))throw Error(z(418));t.flags=t.flags&-4097|2,Le=!1,ln=t}}}function mv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function Tu(t){if(t!==ln)return!1;if(!Le)return mv(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Af(t.type,t.memoizedProps)),e&&(e=sn)){if(Pf(t))throw tE(),Error(z(418));for(;e;)eE(t,e),e=ri(e.nextSibling)}if(mv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=ri(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=ln?ri(t.stateNode.nextSibling):null;return!0}function tE(){for(var t=sn;t;)t=ri(t.nextSibling)}function so(){sn=ln=null,Le=!1}function cm(t){bn===null?bn=[t]:bn.push(t)}var Jb=Cr.ReactCurrentBatchConfig;function ra(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function ku(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gv(t){var e=t._init;return e(t._payload)}function nE(t){function e(k,w){if(t){var E=k.deletions;E===null?(k.deletions=[w],k.flags|=16):E.push(w)}}function n(k,w){if(!t)return null;for(;w!==null;)e(k,w),w=w.sibling;return null}function r(k,w){for(k=new Map;w!==null;)w.key!==null?k.set(w.key,w):k.set(w.index,w),w=w.sibling;return k}function i(k,w){return k=ai(k,w),k.index=0,k.sibling=null,k}function s(k,w,E){return k.index=E,t?(E=k.alternate,E!==null?(E=E.index,E<w?(k.flags|=2,w):E):(k.flags|=2,w)):(k.flags|=1048576,w)}function o(k){return t&&k.alternate===null&&(k.flags|=2),k}function l(k,w,E,P){return w===null||w.tag!==6?(w=Lh(E,k.mode,P),w.return=k,w):(w=i(w,E),w.return=k,w)}function u(k,w,E,P){var U=E.type;return U===Rs?h(k,w,E.props.children,P,E.key):w!==null&&(w.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Br&&gv(U)===w.type)?(P=i(w,E.props),P.ref=ra(k,w,E),P.return=k,P):(P=Yu(E.type,E.key,E.props,null,k.mode,P),P.ref=ra(k,w,E),P.return=k,P)}function c(k,w,E,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Vh(E,k.mode,P),w.return=k,w):(w=i(w,E.children||[]),w.return=k,w)}function h(k,w,E,P,U){return w===null||w.tag!==7?(w=Wi(E,k.mode,P,U),w.return=k,w):(w=i(w,E),w.return=k,w)}function f(k,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Lh(""+w,k.mode,E),w.return=k,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hu:return E=Yu(w.type,w.key,w.props,null,k.mode,E),E.ref=ra(k,null,w),E.return=k,E;case Ns:return w=Vh(w,k.mode,E),w.return=k,w;case Br:var P=w._init;return f(k,P(w._payload),E)}if(fa(w)||Jo(w))return w=Wi(w,k.mode,E,null),w.return=k,w;ku(k,w)}return null}function m(k,w,E,P){var U=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return U!==null?null:l(k,w,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case hu:return E.key===U?u(k,w,E,P):null;case Ns:return E.key===U?c(k,w,E,P):null;case Br:return U=E._init,m(k,w,U(E._payload),P)}if(fa(E)||Jo(E))return U!==null?null:h(k,w,E,P,null);ku(k,E)}return null}function y(k,w,E,P,U){if(typeof P=="string"&&P!==""||typeof P=="number")return k=k.get(E)||null,l(w,k,""+P,U);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case hu:return k=k.get(P.key===null?E:P.key)||null,u(w,k,P,U);case Ns:return k=k.get(P.key===null?E:P.key)||null,c(w,k,P,U);case Br:var j=P._init;return y(k,w,E,j(P._payload),U)}if(fa(P)||Jo(P))return k=k.get(E)||null,h(w,k,P,U,null);ku(w,P)}return null}function T(k,w,E,P){for(var U=null,j=null,S=w,_=w=0,b=null;S!==null&&_<E.length;_++){S.index>_?(b=S,S=null):b=S.sibling;var x=m(k,S,E[_],P);if(x===null){S===null&&(S=b);break}t&&S&&x.alternate===null&&e(k,S),w=s(x,w,_),j===null?U=x:j.sibling=x,j=x,S=b}if(_===E.length)return n(k,S),Le&&Li(k,_),U;if(S===null){for(;_<E.length;_++)S=f(k,E[_],P),S!==null&&(w=s(S,w,_),j===null?U=S:j.sibling=S,j=S);return Le&&Li(k,_),U}for(S=r(k,S);_<E.length;_++)b=y(S,k,_,E[_],P),b!==null&&(t&&b.alternate!==null&&S.delete(b.key===null?_:b.key),w=s(b,w,_),j===null?U=b:j.sibling=b,j=b);return t&&S.forEach(function(R){return e(k,R)}),Le&&Li(k,_),U}function I(k,w,E,P){var U=Jo(E);if(typeof U!="function")throw Error(z(150));if(E=U.call(E),E==null)throw Error(z(151));for(var j=U=null,S=w,_=w=0,b=null,x=E.next();S!==null&&!x.done;_++,x=E.next()){S.index>_?(b=S,S=null):b=S.sibling;var R=m(k,S,x.value,P);if(R===null){S===null&&(S=b);break}t&&S&&R.alternate===null&&e(k,S),w=s(R,w,_),j===null?U=R:j.sibling=R,j=R,S=b}if(x.done)return n(k,S),Le&&Li(k,_),U;if(S===null){for(;!x.done;_++,x=E.next())x=f(k,x.value,P),x!==null&&(w=s(x,w,_),j===null?U=x:j.sibling=x,j=x);return Le&&Li(k,_),U}for(S=r(k,S);!x.done;_++,x=E.next())x=y(S,k,_,x.value,P),x!==null&&(t&&x.alternate!==null&&S.delete(x.key===null?_:x.key),w=s(x,w,_),j===null?U=x:j.sibling=x,j=x);return t&&S.forEach(function(D){return e(k,D)}),Le&&Li(k,_),U}function N(k,w,E,P){if(typeof E=="object"&&E!==null&&E.type===Rs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case hu:e:{for(var U=E.key,j=w;j!==null;){if(j.key===U){if(U=E.type,U===Rs){if(j.tag===7){n(k,j.sibling),w=i(j,E.props.children),w.return=k,k=w;break e}}else if(j.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Br&&gv(U)===j.type){n(k,j.sibling),w=i(j,E.props),w.ref=ra(k,j,E),w.return=k,k=w;break e}n(k,j);break}else e(k,j);j=j.sibling}E.type===Rs?(w=Wi(E.props.children,k.mode,P,E.key),w.return=k,k=w):(P=Yu(E.type,E.key,E.props,null,k.mode,P),P.ref=ra(k,w,E),P.return=k,k=P)}return o(k);case Ns:e:{for(j=E.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(k,w.sibling),w=i(w,E.children||[]),w.return=k,k=w;break e}else{n(k,w);break}else e(k,w);w=w.sibling}w=Vh(E,k.mode,P),w.return=k,k=w}return o(k);case Br:return j=E._init,N(k,w,j(E._payload),P)}if(fa(E))return T(k,w,E,P);if(Jo(E))return I(k,w,E,P);ku(k,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(k,w.sibling),w=i(w,E),w.return=k,k=w):(n(k,w),w=Lh(E,k.mode,P),w.return=k,k=w),o(k)):n(k,w)}return N}var oo=nE(!0),rE=nE(!1),wc=wi(null),Ec=null,Fs=null,dm=null;function hm(){dm=Fs=Ec=null}function fm(t){var e=wc.current;Oe(wc),t._currentValue=e}function Of(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ys(t,e){Ec=t,dm=Fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function _n(t){var e=t._currentValue;if(dm!==t)if(t={context:t,memoizedValue:e,next:null},Fs===null){if(Ec===null)throw Error(z(308));Fs=t,Ec.dependencies={lanes:0,firstContext:t}}else Fs=Fs.next=t;return e}var Fi=null;function pm(t){Fi===null?Fi=[t]:Fi.push(t)}function iE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,pm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Tr(t,r)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jr=!1;function mm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ii(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Tr(t,n)}return i=r.interleaved,i===null?(e.next=e,pm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Tr(t,n)}function Wu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,em(t,n)}}function yv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Tc(t,e,n,r){var i=t.updateQueue;jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,h=c=u=null,l=s;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,I=l;switch(m=e,y=n,I.tag){case 1:if(T=I.payload,typeof T=="function"){f=T.call(y,f,m);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=I.payload,m=typeof T=="function"?T.call(y,f,m):T,m==null)break e;f=Fe({},f,m);break e;case 2:jr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=y,u=f):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(h===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ji|=o,t.lanes=o,t.memoizedState=f}}function vv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var kl={},Kn=wi(kl),Xa=wi(kl),Ja=wi(kl);function Bi(t){if(t===kl)throw Error(z(174));return t}function gm(t,e){switch(Ce(Ja,e),Ce(Xa,t),Ce(Kn,kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pf(e,t)}Oe(Kn),Ce(Kn,e)}function ao(){Oe(Kn),Oe(Xa),Oe(Ja)}function oE(t){Bi(Ja.current);var e=Bi(Kn.current),n=pf(e,t.type);e!==n&&(Ce(Xa,t),Ce(Kn,n))}function ym(t){Xa.current===t&&(Oe(Kn),Oe(Xa))}var Me=wi(0);function kc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ch=[];function vm(){for(var t=0;t<Ch.length;t++)Ch[t]._workInProgressVersionPrimary=null;Ch.length=0}var qu=Cr.ReactCurrentDispatcher,Nh=Cr.ReactCurrentBatchConfig,Xi=0,Ue=null,tt=null,ht=null,Ic=!1,Ca=!1,Za=0,Zb=0;function bt(){throw Error(z(321))}function _m(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function wm(t,e,n,r,i,s){if(Xi=s,Ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qu.current=t===null||t.memoizedState===null?rx:ix,t=n(r,i),Ca){s=0;do{if(Ca=!1,Za=0,25<=s)throw Error(z(301));s+=1,ht=tt=null,e.updateQueue=null,qu.current=sx,t=n(r,i)}while(Ca)}if(qu.current=Sc,e=tt!==null&&tt.next!==null,Xi=0,ht=tt=Ue=null,Ic=!1,e)throw Error(z(300));return t}function Em(){var t=Za!==0;return Za=0,t}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ue.memoizedState=ht=t:ht=ht.next=t,ht}function wn(){if(tt===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=tt.next;var e=ht===null?Ue.memoizedState:ht.next;if(e!==null)ht=e,tt=t;else{if(t===null)throw Error(z(310));tt=t,t={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},ht===null?Ue.memoizedState=ht=t:ht=ht.next=t}return ht}function el(t,e){return typeof e=="function"?e(t):e}function Rh(t){var e=wn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=tt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var h=c.lane;if((Xi&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,o=r):u=u.next=f,Ue.lanes|=h,Ji|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Cn(r,e.memoizedState)||(Yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ue.lanes|=s,Ji|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ph(t){var e=wn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cn(s,e.memoizedState)||(Yt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function aE(){}function lE(t,e){var n=Ue,r=wn(),i=e(),s=!Cn(r.memoizedState,i);if(s&&(r.memoizedState=i,Yt=!0),r=r.queue,Tm(dE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,tl(9,cE.bind(null,n,r,i,e),void 0,null),ft===null)throw Error(z(349));Xi&30||uE(n,e,i)}return i}function uE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cE(t,e,n,r){e.value=n,e.getSnapshot=r,hE(e)&&fE(t)}function dE(t,e,n){return n(function(){hE(e)&&fE(t)})}function hE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function fE(t){var e=Tr(t,1);e!==null&&An(e,t,1,-1)}function _v(t){var e=zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:t},e.queue=t,t=t.dispatch=nx.bind(null,Ue,t),[e.memoizedState,t]}function tl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ue.updateQueue,e===null?(e={lastEffect:null,stores:null},Ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function pE(){return wn().memoizedState}function Hu(t,e,n,r){var i=zn();Ue.flags|=t,i.memoizedState=tl(1|e,n,void 0,r===void 0?null:r)}function cd(t,e,n,r){var i=wn();r=r===void 0?null:r;var s=void 0;if(tt!==null){var o=tt.memoizedState;if(s=o.destroy,r!==null&&_m(r,o.deps)){i.memoizedState=tl(e,n,s,r);return}}Ue.flags|=t,i.memoizedState=tl(1|e,n,s,r)}function wv(t,e){return Hu(8390656,8,t,e)}function Tm(t,e){return cd(2048,8,t,e)}function mE(t,e){return cd(4,2,t,e)}function gE(t,e){return cd(4,4,t,e)}function yE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vE(t,e,n){return n=n!=null?n.concat([t]):null,cd(4,4,yE.bind(null,e,t),n)}function km(){}function _E(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_m(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wE(t,e){var n=wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_m(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function EE(t,e,n){return Xi&21?(Cn(n,e)||(n=bw(),Ue.lanes|=n,Ji|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function ex(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=Nh.transition;Nh.transition={};try{t(!1),e()}finally{ke=n,Nh.transition=r}}function TE(){return wn().memoizedState}function tx(t,e,n){var r=oi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kE(t))IE(e,n);else if(n=iE(t,e,n,r),n!==null){var i=jt();An(n,t,r,i),SE(n,e,r)}}function nx(t,e,n){var r=oi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kE(t))IE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Cn(l,o)){var u=e.interleaved;u===null?(i.next=i,pm(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=iE(t,e,i,r),n!==null&&(i=jt(),An(n,t,r,i),SE(n,e,r))}}function kE(t){var e=t.alternate;return t===Ue||e!==null&&e===Ue}function IE(t,e){Ca=Ic=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function SE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,em(t,n)}}var Sc={readContext:_n,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},rx={readContext:_n,useCallback:function(t,e){return zn().memoizedState=[t,e===void 0?null:e],t},useContext:_n,useEffect:wv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hu(4194308,4,yE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hu(4,2,t,e)},useMemo:function(t,e){var n=zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tx.bind(null,Ue,t),[r.memoizedState,t]},useRef:function(t){var e=zn();return t={current:t},e.memoizedState=t},useState:_v,useDebugValue:km,useDeferredValue:function(t){return zn().memoizedState=t},useTransition:function(){var t=_v(!1),e=t[0];return t=ex.bind(null,t[1]),zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ue,i=zn();if(Le){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),ft===null)throw Error(z(349));Xi&30||uE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,wv(dE.bind(null,r,s,t),[t]),r.flags|=2048,tl(9,cE.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zn(),e=ft.identifierPrefix;if(Le){var n=fr,r=hr;n=(r&~(1<<32-xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Zb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ix={readContext:_n,useCallback:_E,useContext:_n,useEffect:Tm,useImperativeHandle:vE,useInsertionEffect:mE,useLayoutEffect:gE,useMemo:wE,useReducer:Rh,useRef:pE,useState:function(){return Rh(el)},useDebugValue:km,useDeferredValue:function(t){var e=wn();return EE(e,tt.memoizedState,t)},useTransition:function(){var t=Rh(el)[0],e=wn().memoizedState;return[t,e]},useMutableSource:aE,useSyncExternalStore:lE,useId:TE,unstable_isNewReconciler:!1},sx={readContext:_n,useCallback:_E,useContext:_n,useEffect:Tm,useImperativeHandle:vE,useInsertionEffect:mE,useLayoutEffect:gE,useMemo:wE,useReducer:Ph,useRef:pE,useState:function(){return Ph(el)},useDebugValue:km,useDeferredValue:function(t){var e=wn();return tt===null?e.memoizedState=t:EE(e,tt.memoizedState,t)},useTransition:function(){var t=Ph(el)[0],e=wn().memoizedState;return[t,e]},useMutableSource:aE,useSyncExternalStore:lE,useId:TE,unstable_isNewReconciler:!1};function In(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dd={isMounted:function(t){return(t=t._reactInternals)?ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),i=oi(t),s=yr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ii(t,s,i),e!==null&&(An(e,t,i,r),Wu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),i=oi(t),s=yr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ii(t,s,i),e!==null&&(An(e,t,i,r),Wu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=oi(t),i=yr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ii(t,i,r),e!==null&&(An(e,t,r,n),Wu(e,t,r))}};function Ev(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ga(n,r)||!Ga(i,s):!0}function bE(t,e,n){var r=!1,i=pi,s=e.contextType;return typeof s=="object"&&s!==null?s=_n(s):(i=Jt(e)?Qi:Pt.current,r=e.contextTypes,s=(r=r!=null)?io(t,i):pi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Tv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dd.enqueueReplaceState(e,e.state,null)}function Vf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},mm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_n(s):(s=Jt(e)?Qi:Pt.current,i.context=io(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Lf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dd.enqueueReplaceState(i,i.state,null),Tc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function lo(t,e){try{var n="",r=e;do n+=DS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Mf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ox=typeof WeakMap=="function"?WeakMap:Map;function xE(t,e,n){n=yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xc||(xc=!0,Gf=r),Mf(t,e)},n}function AE(t,e,n){n=yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Mf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Mf(t,e),typeof r!="function"&&(si===null?si=new Set([this]):si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ox;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=wx.bind(null,t,e,n),e.then(t,t))}function Iv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yr(-1,1),e.tag=2,ii(n,e,1))),n.lanes|=1),t)}var ax=Cr.ReactCurrentOwner,Yt=!1;function Ft(t,e,n,r){e.child=t===null?rE(e,null,n,r):oo(e,t.child,n,r)}function bv(t,e,n,r,i){n=n.render;var s=e.ref;return Ys(e,i),r=wm(t,e,n,r,s,i),n=Em(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(Le&&n&&lm(e),e.flags|=1,Ft(t,e,r,i),e.child)}function xv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Rm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,CE(t,e,s,r,i)):(t=Yu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ga,n(o,r)&&t.ref===e.ref)return kr(t,e,i)}return e.flags|=1,t=ai(s,r),t.ref=e.ref,t.return=e,e.child=t}function CE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ga(s,r)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,kr(t,e,i)}return Uf(t,e,n,r,i)}function NE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(js,rn),rn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(js,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(js,rn),rn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(js,rn),rn|=r;return Ft(t,e,i,n),e.child}function RE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uf(t,e,n,r,i){var s=Jt(n)?Qi:Pt.current;return s=io(e,s),Ys(e,i),n=wm(t,e,n,r,s,i),r=Em(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kr(t,e,i)):(Le&&r&&lm(e),e.flags|=1,Ft(t,e,n,i),e.child)}function Av(t,e,n,r,i){if(Jt(n)){var s=!0;yc(e)}else s=!1;if(Ys(e,i),e.stateNode===null)Gu(t,e),bE(e,n,r),Vf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=_n(c):(c=Jt(n)?Qi:Pt.current,c=io(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Tv(e,o,r,c),jr=!1;var m=e.memoizedState;o.state=m,Tc(e,r,o,i),u=e.memoizedState,l!==r||m!==u||Xt.current||jr?(typeof h=="function"&&(Lf(e,n,h,r),u=e.memoizedState),(l=jr||Ev(e,n,l,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,sE(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:In(e.type,l),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=_n(u):(u=Jt(n)?Qi:Pt.current,u=io(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==u)&&Tv(e,o,r,u),jr=!1,m=e.memoizedState,o.state=m,Tc(e,r,o,i);var T=e.memoizedState;l!==f||m!==T||Xt.current||jr?(typeof y=="function"&&(Lf(e,n,y,r),T=e.memoizedState),(c=jr||Ev(e,n,c,r,m,T,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ff(t,e,n,r,s,i)}function Ff(t,e,n,r,i,s){RE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&fv(e,n,!1),kr(t,e,s);r=e.stateNode,ax.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=oo(e,t.child,null,s),e.child=oo(e,null,l,s)):Ft(t,e,l,s),e.memoizedState=r.state,i&&fv(e,n,!0),e.child}function PE(t){var e=t.stateNode;e.pendingContext?hv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hv(t,e.context,!1),gm(t,e.containerInfo)}function Cv(t,e,n,r,i){return so(),cm(i),e.flags|=256,Ft(t,e,n,r),e.child}var Bf={dehydrated:null,treeContext:null,retryLane:0};function jf(t){return{baseLanes:t,cachePool:null,transitions:null}}function DE(t,e,n){var r=e.pendingProps,i=Me.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(Me,i&1),t===null)return Df(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pd(o,r,0,null),t=Wi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=jf(n),e.memoizedState=Bf,t):Im(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return lx(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ai(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ai(l,s):(s=Wi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?jf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Bf,r}return s=t.child,t=s.sibling,r=ai(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Im(t,e){return e=pd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Iu(t,e,n,r){return r!==null&&cm(r),oo(e,t.child,null,n),t=Im(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Dh(Error(z(422))),Iu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pd({mode:"visible",children:r.children},i,0,null),s=Wi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&oo(e,t.child,null,o),e.child.memoizedState=jf(o),e.memoizedState=Bf,s);if(!(e.mode&1))return Iu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(z(419)),r=Dh(s,r,void 0),Iu(t,e,o,r)}if(l=(o&t.childLanes)!==0,Yt||l){if(r=ft,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tr(t,i),An(r,t,i,-1))}return Nm(),r=Dh(Error(z(421))),Iu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ex.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,sn=ri(i.nextSibling),ln=e,Le=!0,bn=null,t!==null&&(pn[mn++]=hr,pn[mn++]=fr,pn[mn++]=Yi,hr=t.id,fr=t.overflow,Yi=e),e=Im(e,r.children),e.flags|=4096,e)}function Nv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Of(t.return,e,n)}function Oh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function OE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ft(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nv(t,n,e);else if(t.tag===19)Nv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&kc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Oh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&kc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Oh(e,!0,n,null,s);break;case"together":Oh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ai(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ai(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ux(t,e,n){switch(e.tag){case 3:PE(e),so();break;case 5:oE(e);break;case 1:Jt(e.type)&&yc(e);break;case 4:gm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(wc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?DE(t,e,n):(Ce(Me,Me.current&1),t=kr(t,e,n),t!==null?t.sibling:null);Ce(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,NE(t,e,n)}return kr(t,e,n)}var LE,$f,VE,ME;LE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$f=function(){};VE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Bi(Kn.current);var s=null;switch(n){case"input":i=cf(t,i),r=cf(t,r),s=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":i=ff(t,i),r=ff(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mc)}mf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ba.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ba.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Re("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ME=function(t,e,n,r){n!==r&&(e.flags|=4)};function ia(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cx(t,e,n){var r=e.pendingProps;switch(um(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return Jt(e.type)&&gc(),xt(e),null;case 3:return r=e.stateNode,ao(),Oe(Xt),Oe(Pt),vm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bn!==null&&(Yf(bn),bn=null))),$f(t,e),xt(e),null;case 5:ym(e);var i=Bi(Ja.current);if(n=e.type,t!==null&&e.stateNode!=null)VE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return xt(e),null}if(t=Bi(Kn.current),Tu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wn]=e,r[Ya]=s,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<ma.length;i++)Re(ma[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Fy(r,s),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Re("invalid",r);break;case"textarea":jy(r,s),Re("invalid",r)}mf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Eu(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Eu(r.textContent,l,t),i=["children",""+l]):Ba.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":fu(r),By(r,s,!0);break;case"textarea":fu(r),$y(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=mc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wn]=e,t[Ya]=r,LE(t,e,!1,!1),e.stateNode=t;e:{switch(o=gf(n,r),n){case"dialog":Re("cancel",t),Re("close",t),i=r;break;case"iframe":case"object":case"embed":Re("load",t),i=r;break;case"video":case"audio":for(i=0;i<ma.length;i++)Re(ma[i],t);i=r;break;case"source":Re("error",t),i=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),i=r;break;case"details":Re("toggle",t),i=r;break;case"input":Fy(t,r),i=cf(t,r),Re("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Re("invalid",t);break;case"textarea":jy(t,r),i=ff(t,r),Re("invalid",t);break;default:i=r}mf(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?pw(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&hw(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ja(t,u):typeof u=="number"&&ja(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ba.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Re("scroll",t):u!=null&&Kp(t,s,u,o))}switch(n){case"input":fu(t),By(t,r,!1);break;case"textarea":fu(t),$y(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Hs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Hs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)ME(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Bi(Ja.current),Bi(Kn.current),Tu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wn]=e,(s=r.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:Eu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Eu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return xt(e),null;case 13:if(Oe(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&sn!==null&&e.mode&1&&!(e.flags&128))tE(),so(),e.flags|=98560,s=!1;else if(s=Tu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[Wn]=e}else so(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),s=!1}else bn!==null&&(Yf(bn),bn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?nt===0&&(nt=3):Nm())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return ao(),$f(t,e),t===null&&Ka(e.stateNode.containerInfo),xt(e),null;case 10:return fm(e.type._context),xt(e),null;case 17:return Jt(e.type)&&gc(),xt(e),null;case 19:if(Oe(Me),s=e.memoizedState,s===null)return xt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ia(s,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kc(t),o!==null){for(e.flags|=128,ia(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Me,Me.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qe()>uo&&(e.flags|=128,r=!0,ia(s,!1),e.lanes=4194304)}else{if(!r)if(t=kc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ia(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Le)return xt(e),null}else 2*Qe()-s.renderingStartTime>uo&&n!==1073741824&&(e.flags|=128,r=!0,ia(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qe(),e.sibling=null,n=Me.current,Ce(Me,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return Cm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function dx(t,e){switch(um(e),e.tag){case 1:return Jt(e.type)&&gc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ao(),Oe(Xt),Oe(Pt),vm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ym(e),null;case 13:if(Oe(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));so()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(Me),null;case 4:return ao(),null;case 10:return fm(e.type._context),null;case 22:case 23:return Cm(),null;case 24:return null;default:return null}}var Su=!1,Nt=!1,hx=typeof WeakSet=="function"?WeakSet:Set,G=null;function Bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function zf(t,e,n){try{n()}catch(r){ze(t,e,r)}}var Rv=!1;function fx(t,e){if(bf=hc,t=$w(),am(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===i&&(l=o),m===s&&++h===r&&(u=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(xf={focusedElem:t,selectionRange:n},hc=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var I=T.memoizedProps,N=T.memoizedState,k=e.stateNode,w=k.getSnapshotBeforeUpdate(e.elementType===e.type?I:In(e.type,I),N);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){ze(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return T=Rv,Rv=!1,T}function Na(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&zf(e,n,s)}i=i.next}while(i!==r)}}function hd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function UE(t){var e=t.alternate;e!==null&&(t.alternate=null,UE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[Ya],delete e[Nf],delete e[Qb],delete e[Yb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function FE(t){return t.tag===5||t.tag===3||t.tag===4}function Pv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||FE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mc));else if(r!==4&&(t=t.child,t!==null))for(qf(t,e,n),t=t.sibling;t!==null;)qf(t,e,n),t=t.sibling}function Hf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hf(t,e,n),t=t.sibling;t!==null;)Hf(t,e,n),t=t.sibling}var gt=null,Sn=!1;function Mr(t,e,n){for(n=n.child;n!==null;)BE(t,e,n),n=n.sibling}function BE(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(id,n)}catch{}switch(n.tag){case 5:Nt||Bs(n,e);case 6:var r=gt,i=Sn;gt=null,Mr(t,e,n),gt=r,Sn=i,gt!==null&&(Sn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Sn?(t=gt,n=n.stateNode,t.nodeType===8?xh(t.parentNode,n):t.nodeType===1&&xh(t,n),qa(t)):xh(gt,n.stateNode));break;case 4:r=gt,i=Sn,gt=n.stateNode.containerInfo,Sn=!0,Mr(t,e,n),gt=r,Sn=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&zf(n,e,o),i=i.next}while(i!==r)}Mr(t,e,n);break;case 1:if(!Nt&&(Bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ze(n,e,l)}Mr(t,e,n);break;case 21:Mr(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,Mr(t,e,n),Nt=r):Mr(t,e,n);break;default:Mr(t,e,n)}}function Dv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hx),e.forEach(function(r){var i=Tx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:gt=l.stateNode,Sn=!1;break e;case 3:gt=l.stateNode.containerInfo,Sn=!0;break e;case 4:gt=l.stateNode.containerInfo,Sn=!0;break e}l=l.return}if(gt===null)throw Error(z(160));BE(s,o,i),gt=null,Sn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jE(e,t),e=e.sibling}function jE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),Bn(t),r&4){try{Na(3,t,t.return),hd(3,t)}catch(I){ze(t,t.return,I)}try{Na(5,t,t.return)}catch(I){ze(t,t.return,I)}}break;case 1:kn(e,t),Bn(t),r&512&&n!==null&&Bs(n,n.return);break;case 5:if(kn(e,t),Bn(t),r&512&&n!==null&&Bs(n,n.return),t.flags&32){var i=t.stateNode;try{ja(i,"")}catch(I){ze(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&uw(i,s),gf(l,o);var c=gf(l,s);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?pw(i,f):h==="dangerouslySetInnerHTML"?hw(i,f):h==="children"?ja(i,f):Kp(i,h,f,c)}switch(l){case"input":df(i,s);break;case"textarea":cw(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Hs(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Hs(i,!!s.multiple,s.defaultValue,!0):Hs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ya]=s}catch(I){ze(t,t.return,I)}}break;case 6:if(kn(e,t),Bn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){ze(t,t.return,I)}}break;case 3:if(kn(e,t),Bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qa(e.containerInfo)}catch(I){ze(t,t.return,I)}break;case 4:kn(e,t),Bn(t);break;case 13:kn(e,t),Bn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(xm=Qe())),r&4&&Dv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(c=Nt)||h,kn(e,t),Nt=c):kn(e,t),Bn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(f=G=h;G!==null;){switch(m=G,y=m.child,m.tag){case 0:case 11:case 14:case 15:Na(4,m,m.return);break;case 1:Bs(m,m.return);var T=m.stateNode;if(typeof T.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(I){ze(r,n,I)}}break;case 5:Bs(m,m.return);break;case 22:if(m.memoizedState!==null){Lv(f);continue}}y!==null?(y.return=m,G=y):Lv(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=fw("display",o))}catch(I){ze(t,t.return,I)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(I){ze(t,t.return,I)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kn(e,t),Bn(t),r&4&&Dv(t);break;case 21:break;default:kn(e,t),Bn(t)}}function Bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(FE(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ja(i,""),r.flags&=-33);var s=Pv(t);Hf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Pv(t);qf(t,l,o);break;default:throw Error(z(161))}}catch(u){ze(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function px(t,e,n){G=t,$E(t)}function $E(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Su;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Nt;l=Su;var c=Nt;if(Su=o,(Nt=u)&&!c)for(G=i;G!==null;)o=G,u=o.child,o.tag===22&&o.memoizedState!==null?Vv(i):u!==null?(u.return=o,G=u):Vv(i);for(;s!==null;)G=s,$E(s),s=s.sibling;G=i,Su=l,Nt=c}Ov(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):Ov(t)}}function Ov(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||hd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vv(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&qa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Nt||e.flags&512&&Wf(e)}catch(m){ze(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function Lv(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function Vv(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hd(4,e)}catch(u){ze(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ze(e,i,u)}}var s=e.return;try{Wf(e)}catch(u){ze(e,s,u)}break;case 5:var o=e.return;try{Wf(e)}catch(u){ze(e,o,u)}}}catch(u){ze(e,e.return,u)}if(e===t){G=null;break}var l=e.sibling;if(l!==null){l.return=e.return,G=l;break}G=e.return}}var mx=Math.ceil,bc=Cr.ReactCurrentDispatcher,Sm=Cr.ReactCurrentOwner,yn=Cr.ReactCurrentBatchConfig,pe=0,ft=null,Ze=null,_t=0,rn=0,js=wi(0),nt=0,nl=null,Ji=0,fd=0,bm=0,Ra=null,Kt=null,xm=0,uo=1/0,cr=null,xc=!1,Gf=null,si=null,bu=!1,Xr=null,Ac=0,Pa=0,Kf=null,Ku=-1,Qu=0;function jt(){return pe&6?Qe():Ku!==-1?Ku:Ku=Qe()}function oi(t){return t.mode&1?pe&2&&_t!==0?_t&-_t:Jb.transition!==null?(Qu===0&&(Qu=bw()),Qu):(t=ke,t!==0||(t=window.event,t=t===void 0?16:Dw(t.type)),t):1}function An(t,e,n,r){if(50<Pa)throw Pa=0,Kf=null,Error(z(185));wl(t,n,r),(!(pe&2)||t!==ft)&&(t===ft&&(!(pe&2)&&(fd|=n),nt===4&&zr(t,_t)),Zt(t,r),n===1&&pe===0&&!(e.mode&1)&&(uo=Qe()+500,ud&&Ei()))}function Zt(t,e){var n=t.callbackNode;JS(t,e);var r=dc(t,t===ft?_t:0);if(r===0)n!==null&&qy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qy(n),e===1)t.tag===0?Xb(Mv.bind(null,t)):Jw(Mv.bind(null,t)),Gb(function(){!(pe&6)&&Ei()}),n=null;else{switch(xw(r)){case 1:n=Zp;break;case 4:n=Iw;break;case 16:n=cc;break;case 536870912:n=Sw;break;default:n=cc}n=YE(n,zE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zE(t,e){if(Ku=-1,Qu=0,pe&6)throw Error(z(327));var n=t.callbackNode;if(Xs()&&t.callbackNode!==n)return null;var r=dc(t,t===ft?_t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Cc(t,r);else{e=r;var i=pe;pe|=2;var s=qE();(ft!==t||_t!==e)&&(cr=null,uo=Qe()+500,zi(t,e));do try{vx();break}catch(l){WE(t,l)}while(1);hm(),bc.current=s,pe=i,Ze!==null?e=0:(ft=null,_t=0,e=nt)}if(e!==0){if(e===2&&(i=Ef(t),i!==0&&(r=i,e=Qf(t,i))),e===1)throw n=nl,zi(t,0),zr(t,r),Zt(t,Qe()),n;if(e===6)zr(t,r);else{if(i=t.current.alternate,!(r&30)&&!gx(i)&&(e=Cc(t,r),e===2&&(s=Ef(t),s!==0&&(r=s,e=Qf(t,s))),e===1))throw n=nl,zi(t,0),zr(t,r),Zt(t,Qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Vi(t,Kt,cr);break;case 3:if(zr(t,r),(r&130023424)===r&&(e=xm+500-Qe(),10<e)){if(dc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Cf(Vi.bind(null,t,Kt,cr),e);break}Vi(t,Kt,cr);break;case 4:if(zr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mx(r/1960))-r,10<r){t.timeoutHandle=Cf(Vi.bind(null,t,Kt,cr),r);break}Vi(t,Kt,cr);break;case 5:Vi(t,Kt,cr);break;default:throw Error(z(329))}}}return Zt(t,Qe()),t.callbackNode===n?zE.bind(null,t):null}function Qf(t,e){var n=Ra;return t.current.memoizedState.isDehydrated&&(zi(t,e).flags|=256),t=Cc(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&Yf(e)),t}function Yf(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function gx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zr(t,e){for(e&=~bm,e&=~fd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xn(e),r=1<<n;t[n]=-1,e&=~r}}function Mv(t){if(pe&6)throw Error(z(327));Xs();var e=dc(t,0);if(!(e&1))return Zt(t,Qe()),null;var n=Cc(t,e);if(t.tag!==0&&n===2){var r=Ef(t);r!==0&&(e=r,n=Qf(t,r))}if(n===1)throw n=nl,zi(t,0),zr(t,e),Zt(t,Qe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vi(t,Kt,cr),Zt(t,Qe()),null}function Am(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(uo=Qe()+500,ud&&Ei())}}function Zi(t){Xr!==null&&Xr.tag===0&&!(pe&6)&&Xs();var e=pe;pe|=1;var n=yn.transition,r=ke;try{if(yn.transition=null,ke=1,t)return t()}finally{ke=r,yn.transition=n,pe=e,!(pe&6)&&Ei()}}function Cm(){rn=js.current,Oe(js)}function zi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Hb(n)),Ze!==null)for(n=Ze.return;n!==null;){var r=n;switch(um(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gc();break;case 3:ao(),Oe(Xt),Oe(Pt),vm();break;case 5:ym(r);break;case 4:ao();break;case 13:Oe(Me);break;case 19:Oe(Me);break;case 10:fm(r.type._context);break;case 22:case 23:Cm()}n=n.return}if(ft=t,Ze=t=ai(t.current,null),_t=rn=e,nt=0,nl=null,bm=fd=Ji=0,Kt=Ra=null,Fi!==null){for(e=0;e<Fi.length;e++)if(n=Fi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Fi=null}return t}function WE(t,e){do{var n=Ze;try{if(hm(),qu.current=Sc,Ic){for(var r=Ue.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ic=!1}if(Xi=0,ht=tt=Ue=null,Ca=!1,Za=0,Sm.current=null,n===null||n.return===null){nt=1,nl=e,Ze=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=_t,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Iv(o);if(y!==null){y.flags&=-257,Sv(y,o,l,s,e),y.mode&1&&kv(s,c,e),e=y,u=c;var T=e.updateQueue;if(T===null){var I=new Set;I.add(u),e.updateQueue=I}else T.add(u);break e}else{if(!(e&1)){kv(s,c,e),Nm();break e}u=Error(z(426))}}else if(Le&&l.mode&1){var N=Iv(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Sv(N,o,l,s,e),cm(lo(u,l));break e}}s=u=lo(u,l),nt!==4&&(nt=2),Ra===null?Ra=[s]:Ra.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var k=xE(s,u,e);yv(s,k);break e;case 1:l=u;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(si===null||!si.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=AE(s,l,e);yv(s,P);break e}}s=s.return}while(s!==null)}GE(n)}catch(U){e=U,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(1)}function qE(){var t=bc.current;return bc.current=Sc,t===null?Sc:t}function Nm(){(nt===0||nt===3||nt===2)&&(nt=4),ft===null||!(Ji&268435455)&&!(fd&268435455)||zr(ft,_t)}function Cc(t,e){var n=pe;pe|=2;var r=qE();(ft!==t||_t!==e)&&(cr=null,zi(t,e));do try{yx();break}catch(i){WE(t,i)}while(1);if(hm(),pe=n,bc.current=r,Ze!==null)throw Error(z(261));return ft=null,_t=0,nt}function yx(){for(;Ze!==null;)HE(Ze)}function vx(){for(;Ze!==null&&!zS();)HE(Ze)}function HE(t){var e=QE(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?GE(t):Ze=e,Sm.current=null}function GE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dx(n,e),n!==null){n.flags&=32767,Ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Ze=null;return}}else if(n=cx(n,e,rn),n!==null){Ze=n;return}if(e=e.sibling,e!==null){Ze=e;return}Ze=e=t}while(e!==null);nt===0&&(nt=5)}function Vi(t,e,n){var r=ke,i=yn.transition;try{yn.transition=null,ke=1,_x(t,e,n,r)}finally{yn.transition=i,ke=r}return null}function _x(t,e,n,r){do Xs();while(Xr!==null);if(pe&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ZS(t,s),t===ft&&(Ze=ft=null,_t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bu||(bu=!0,YE(cc,function(){return Xs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yn.transition,yn.transition=null;var o=ke;ke=1;var l=pe;pe|=4,Sm.current=null,fx(t,n),jE(n,t),Fb(xf),hc=!!bf,xf=bf=null,t.current=n,px(n),WS(),pe=l,ke=o,yn.transition=s}else t.current=n;if(bu&&(bu=!1,Xr=t,Ac=i),s=t.pendingLanes,s===0&&(si=null),GS(n.stateNode),Zt(t,Qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xc)throw xc=!1,t=Gf,Gf=null,t;return Ac&1&&t.tag!==0&&Xs(),s=t.pendingLanes,s&1?t===Kf?Pa++:(Pa=0,Kf=t):Pa=0,Ei(),null}function Xs(){if(Xr!==null){var t=xw(Ac),e=yn.transition,n=ke;try{if(yn.transition=null,ke=16>t?16:t,Xr===null)var r=!1;else{if(t=Xr,Xr=null,Ac=0,pe&6)throw Error(z(331));var i=pe;for(pe|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(G=c;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:Na(8,h,s)}var f=h.child;if(f!==null)f.return=h,G=f;else for(;G!==null;){h=G;var m=h.sibling,y=h.return;if(UE(h),h===c){G=null;break}if(m!==null){m.return=y,G=m;break}G=y}}}var T=s.alternate;if(T!==null){var I=T.child;if(I!==null){T.child=null;do{var N=I.sibling;I.sibling=null,I=N}while(I!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Na(9,s,s.return)}var k=s.sibling;if(k!==null){k.return=s.return,G=k;break e}G=s.return}}var w=t.current;for(G=w;G!==null;){o=G;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,G=E;else e:for(o=w;G!==null;){if(l=G,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hd(9,l)}}catch(U){ze(l,l.return,U)}if(l===o){G=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,G=P;break e}G=l.return}}if(pe=i,Ei(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(id,t)}catch{}r=!0}return r}finally{ke=n,yn.transition=e}}return!1}function Uv(t,e,n){e=lo(n,e),e=xE(t,e,1),t=ii(t,e,1),e=jt(),t!==null&&(wl(t,1,e),Zt(t,e))}function ze(t,e,n){if(t.tag===3)Uv(t,t,n);else for(;e!==null;){if(e.tag===3){Uv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))){t=lo(n,t),t=AE(e,t,1),e=ii(e,t,1),t=jt(),e!==null&&(wl(e,1,t),Zt(e,t));break}}e=e.return}}function wx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(_t&n)===n&&(nt===4||nt===3&&(_t&130023424)===_t&&500>Qe()-xm?zi(t,0):bm|=n),Zt(t,e)}function KE(t,e){e===0&&(t.mode&1?(e=gu,gu<<=1,!(gu&130023424)&&(gu=4194304)):e=1);var n=jt();t=Tr(t,e),t!==null&&(wl(t,e,n),Zt(t,n))}function Ex(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),KE(t,n)}function Tx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),KE(t,n)}var QE;QE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,ux(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,Le&&e.flags&1048576&&Zw(e,_c,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gu(t,e),t=e.pendingProps;var i=io(e,Pt.current);Ys(e,n),i=wm(null,e,r,t,i,n);var s=Em();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(s=!0,yc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,mm(e),i.updater=dd,e.stateNode=i,i._reactInternals=e,Vf(e,r,t,n),e=Ff(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&lm(e),Ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ix(r),t=In(r,t),i){case 0:e=Uf(null,e,r,t,n);break e;case 1:e=Av(null,e,r,t,n);break e;case 11:e=bv(null,e,r,t,n);break e;case 14:e=xv(null,e,r,In(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),Uf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),Av(t,e,r,i,n);case 3:e:{if(PE(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,sE(t,e),Tc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=lo(Error(z(423)),e),e=Cv(t,e,r,n,i);break e}else if(r!==i){i=lo(Error(z(424)),e),e=Cv(t,e,r,n,i);break e}else for(sn=ri(e.stateNode.containerInfo.firstChild),ln=e,Le=!0,bn=null,n=rE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(so(),r===i){e=kr(t,e,n);break e}Ft(t,e,r,n)}e=e.child}return e;case 5:return oE(e),t===null&&Df(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Af(r,i)?o=null:s!==null&&Af(r,s)&&(e.flags|=32),RE(t,e),Ft(t,e,o,n),e.child;case 6:return t===null&&Df(e),null;case 13:return DE(t,e,n);case 4:return gm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oo(e,null,r,n):Ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),bv(t,e,r,i,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ce(wc,r._currentValue),r._currentValue=o,s!==null)if(Cn(s.value,o)){if(s.children===i.children&&!Xt.current){e=kr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=yr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Of(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Of(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ys(e,n),i=_n(i),r=r(i),e.flags|=1,Ft(t,e,r,n),e.child;case 14:return r=e.type,i=In(r,e.pendingProps),i=In(r.type,i),xv(t,e,r,i,n);case 15:return CE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),Gu(t,e),e.tag=1,Jt(r)?(t=!0,yc(e)):t=!1,Ys(e,n),bE(e,r,i),Vf(e,r,i,n),Ff(null,e,r,!0,t,n);case 19:return OE(t,e,n);case 22:return NE(t,e,n)}throw Error(z(156,e.tag))};function YE(t,e){return kw(t,e)}function kx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,n,r){return new kx(t,e,n,r)}function Rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ix(t){if(typeof t=="function")return Rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yp)return 11;if(t===Xp)return 14}return 2}function ai(t,e){var n=t.alternate;return n===null?(n=gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Rm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rs:return Wi(n.children,i,s,e);case Qp:o=8,i|=8;break;case of:return t=gn(12,n,e,i|2),t.elementType=of,t.lanes=s,t;case af:return t=gn(13,n,e,i),t.elementType=af,t.lanes=s,t;case lf:return t=gn(19,n,e,i),t.elementType=lf,t.lanes=s,t;case ow:return pd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iw:o=10;break e;case sw:o=9;break e;case Yp:o=11;break e;case Xp:o=14;break e;case Br:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=gn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Wi(t,e,n,r){return t=gn(7,t,r,e),t.lanes=n,t}function pd(t,e,n,r){return t=gn(22,t,r,e),t.elementType=ow,t.lanes=n,t.stateNode={isHidden:!1},t}function Lh(t,e,n){return t=gn(6,t,null,e),t.lanes=n,t}function Vh(t,e,n){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Sx(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gh(0),this.expirationTimes=gh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pm(t,e,n,r,i,s,o,l,u){return t=new Sx(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mm(s),t}function bx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ns,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function XE(t){if(!t)return pi;t=t._reactInternals;e:{if(ls(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Jt(n))return Xw(t,n,e)}return e}function JE(t,e,n,r,i,s,o,l,u){return t=Pm(n,r,!0,t,i,s,o,l,u),t.context=XE(null),n=t.current,r=jt(),i=oi(n),s=yr(r,i),s.callback=e??null,ii(n,s,i),t.current.lanes=i,wl(t,i,r),Zt(t,r),t}function md(t,e,n,r){var i=e.current,s=jt(),o=oi(i);return n=XE(n),e.context===null?e.context=n:e.pendingContext=n,e=yr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ii(i,e,o),t!==null&&(An(t,i,o,s),Wu(t,i,o)),o}function Nc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dm(t,e){Fv(t,e),(t=t.alternate)&&Fv(t,e)}function xx(){return null}var ZE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Om(t){this._internalRoot=t}gd.prototype.render=Om.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));md(t,e,null,null)};gd.prototype.unmount=Om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zi(function(){md(null,t,null,null)}),e[Er]=null}};function gd(t){this._internalRoot=t}gd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Nw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$r.length&&e!==0&&e<$r[n].priority;n++);$r.splice(n,0,t),n===0&&Pw(t)}};function Lm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bv(){}function Ax(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Nc(o);s.call(c)}}var o=JE(e,r,t,0,null,!1,!1,"",Bv);return t._reactRootContainer=o,t[Er]=o.current,Ka(t.nodeType===8?t.parentNode:t),Zi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Nc(u);l.call(c)}}var u=Pm(t,0,!1,null,null,!1,!1,"",Bv);return t._reactRootContainer=u,t[Er]=u.current,Ka(t.nodeType===8?t.parentNode:t),Zi(function(){md(e,u,n,r)}),u}function vd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Nc(o);l.call(u)}}md(e,o,t,i)}else o=Ax(n,e,t,i,r);return Nc(o)}Aw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=pa(e.pendingLanes);n!==0&&(em(e,n|1),Zt(e,Qe()),!(pe&6)&&(uo=Qe()+500,Ei()))}break;case 13:Zi(function(){var r=Tr(t,1);if(r!==null){var i=jt();An(r,t,1,i)}}),Dm(t,1)}};tm=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=jt();An(e,t,134217728,n)}Dm(t,134217728)}};Cw=function(t){if(t.tag===13){var e=oi(t),n=Tr(t,e);if(n!==null){var r=jt();An(n,t,e,r)}Dm(t,e)}};Nw=function(){return ke};Rw=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};vf=function(t,e,n){switch(e){case"input":if(df(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ld(r);if(!i)throw Error(z(90));lw(r),df(r,i)}}}break;case"textarea":cw(t,n);break;case"select":e=n.value,e!=null&&Hs(t,!!n.multiple,e,!1)}};yw=Am;vw=Zi;var Cx={usingClientEntryPoint:!1,Events:[Tl,Ls,ld,mw,gw,Am]},sa={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nx={bundleType:sa.bundleType,version:sa.version,rendererPackageName:sa.rendererPackageName,rendererConfig:sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ew(t),t===null?null:t.stateNode},findFiberByHostInstance:sa.findFiberByHostInstance||xx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{id=xu.inject(Nx),Gn=xu}catch{}}cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cx;cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lm(e))throw Error(z(200));return bx(t,e,null,n)};cn.createRoot=function(t,e){if(!Lm(t))throw Error(z(299));var n=!1,r="",i=ZE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Pm(t,1,!1,null,null,n,!1,r,i),t[Er]=e.current,Ka(t.nodeType===8?t.parentNode:t),new Om(e)};cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Ew(e),t=t===null?null:t.stateNode,t};cn.flushSync=function(t){return Zi(t)};cn.hydrate=function(t,e,n){if(!yd(e))throw Error(z(200));return vd(null,t,e,!0,n)};cn.hydrateRoot=function(t,e,n){if(!Lm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ZE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JE(e,null,t,1,n??null,i,!1,s,o),t[Er]=e.current,Ka(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new gd(e)};cn.render=function(t,e,n){if(!yd(e))throw Error(z(200));return vd(null,t,e,!1,n)};cn.unmountComponentAtNode=function(t){if(!yd(t))throw Error(z(40));return t._reactRootContainer?(Zi(function(){vd(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};cn.unstable_batchedUpdates=Am;cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return vd(t,e,n,!1,r)};cn.version="18.3.1-next-f1338f8080-20240426";function e1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e1)}catch(t){console.error(t)}}e1(),ew.exports=cn;var Rx=ew.exports,t1,jv=Rx;t1=jv.createRoot,jv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rl(){return rl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rl.apply(this,arguments)}var Jr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Jr||(Jr={}));const $v="popstate";function Px(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return Xf("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Rc(i)}return Ox(e,n,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function n1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Dx(){return Math.random().toString(36).substr(2,8)}function zv(t,e){return{usr:t.state,key:t.key,idx:e}}function Xf(t,e,n,r){return n===void 0&&(n=null),rl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?To(e):e,{state:n,key:e&&e.key||r||Dx()})}function Rc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function To(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Ox(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Jr.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(rl({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=Jr.Pop;let N=h(),k=N==null?null:N-c;c=N,u&&u({action:l,location:I.location,delta:k})}function m(N,k){l=Jr.Push;let w=Xf(I.location,N,k);n&&n(w,N),c=h()+1;let E=zv(w,c),P=I.createHref(w);try{o.pushState(E,"",P)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(P)}s&&u&&u({action:l,location:I.location,delta:1})}function y(N,k){l=Jr.Replace;let w=Xf(I.location,N,k);n&&n(w,N),c=h();let E=zv(w,c),P=I.createHref(w);o.replaceState(E,"",P),s&&u&&u({action:l,location:I.location,delta:0})}function T(N){let k=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof N=="string"?N:Rc(N);return w=w.replace(/ $/,"%20"),Ye(k,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,k)}let I={get action(){return l},get location(){return t(i,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener($v,f),u=N,()=>{i.removeEventListener($v,f),u=null}},createHref(N){return e(i,N)},createURL:T,encodeLocation(N){let k=T(N);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:m,replace:y,go(N){return o.go(N)}};return I}var Wv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Wv||(Wv={}));function Lx(t,e,n){return n===void 0&&(n="/"),Vx(t,e,n,!1)}function Vx(t,e,n,r){let i=typeof e=="string"?To(e):e,s=Vm(i.pathname||"/",n);if(s==null)return null;let o=r1(t);Mx(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=Kx(s);l=Hx(o[u],c,r)}return l}function r1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ye(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=li([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Ye(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),r1(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Wx(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of i1(s.path))i(s,o,u)}),e}function i1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=i1(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function Mx(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qx(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ux=/^:[\w-]+$/,Fx=3,Bx=2,jx=1,$x=10,zx=-2,qv=t=>t==="*";function Wx(t,e){let n=t.split("/"),r=n.length;return n.some(qv)&&(r+=zx),e&&(r+=Bx),n.filter(i=>!qv(i)).reduce((i,s)=>i+(Ux.test(s)?Fx:s===""?jx:$x),r)}function qx(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Hx(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=Hv({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=Hv({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:li([s,f.pathname]),pathnameBase:Jx(li([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=li([s,f.pathnameBase]))}return o}function Hv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Gx(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let I=l[f]||"";o=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const T=l[f];return y&&!T?c[m]=void 0:c[m]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function Gx(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),n1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Kx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return n1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Qx(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?To(t):t;return{pathname:n?n.startsWith("/")?n:Yx(n,e):e,search:Zx(r),hash:eA(i)}}function Yx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Mh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Mm(t,e){let n=Xx(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Um(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=To(t):(i=rl({},t),Ye(!i.pathname||!i.pathname.includes("?"),Mh("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),Mh("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),Mh("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}l=f>=0?e[f]:"/"}let u=Qx(i,l),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const li=t=>t.join("/").replace(/\/\/+/g,"/"),Jx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Zx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function tA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const s1=["post","put","patch","delete"];new Set(s1);const nA=["get",...s1];new Set(nA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},il.apply(this,arguments)}const Fm=L.createContext(null),rA=L.createContext(null),Ti=L.createContext(null),_d=L.createContext(null),ki=L.createContext({outlet:null,matches:[],isDataRoute:!1}),o1=L.createContext(null);function iA(t,e){let{relative:n}=e===void 0?{}:e;ko()||Ye(!1);let{basename:r,navigator:i}=L.useContext(Ti),{hash:s,pathname:o,search:l}=l1(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:li([r,o])),i.createHref({pathname:u,search:l,hash:s})}function ko(){return L.useContext(_d)!=null}function Il(){return ko()||Ye(!1),L.useContext(_d).location}function a1(t){L.useContext(Ti).static||L.useLayoutEffect(t)}function Sl(){let{isDataRoute:t}=L.useContext(ki);return t?yA():sA()}function sA(){ko()||Ye(!1);let t=L.useContext(Fm),{basename:e,future:n,navigator:r}=L.useContext(Ti),{matches:i}=L.useContext(ki),{pathname:s}=Il(),o=JSON.stringify(Mm(i,n.v7_relativeSplatPath)),l=L.useRef(!1);return a1(()=>{l.current=!0}),L.useCallback(function(c,h){if(h===void 0&&(h={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let f=Um(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:li([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}function l1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=L.useContext(Ti),{matches:i}=L.useContext(ki),{pathname:s}=Il(),o=JSON.stringify(Mm(i,r.v7_relativeSplatPath));return L.useMemo(()=>Um(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function oA(t,e){return aA(t,e)}function aA(t,e,n,r){ko()||Ye(!1);let{navigator:i}=L.useContext(Ti),{matches:s}=L.useContext(ki),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Il(),h;if(e){var f;let N=typeof e=="string"?To(e):e;u==="/"||(f=N.pathname)!=null&&f.startsWith(u)||Ye(!1),h=N}else h=c;let m=h.pathname||"/",y=m;if(u!=="/"){let N=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let T=Lx(t,{pathname:y}),I=hA(T&&T.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:li([u,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:li([u,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r);return e&&I?L.createElement(_d.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Jr.Pop}},I):I}function lA(){let t=gA(),e=tA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:i},n):null,s)}const uA=L.createElement(lA,null);class cA extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(ki.Provider,{value:this.props.routeContext},L.createElement(o1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dA(t){let{routeContext:e,match:n,children:r}=t,i=L.useContext(Fm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(ki.Provider,{value:e},r)}function hA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||Ye(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:y}=n,T=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||T){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,T=!1,I=null,N=null;n&&(y=l&&f.route.id?l[f.route.id]:void 0,I=f.route.errorElement||uA,u&&(c<0&&m===0?(vA("route-fallback",!1),T=!0,N=null):c===m&&(T=!0,N=f.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,m+1)),w=()=>{let E;return y?E=I:T?E=N:f.route.Component?E=L.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,L.createElement(dA,{match:f,routeContext:{outlet:h,matches:k,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?L.createElement(cA,{location:n.location,revalidation:n.revalidation,component:I,error:y,children:w(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):w()},null)}var u1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(u1||{}),Pc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pc||{});function fA(t){let e=L.useContext(Fm);return e||Ye(!1),e}function pA(t){let e=L.useContext(rA);return e||Ye(!1),e}function mA(t){let e=L.useContext(ki);return e||Ye(!1),e}function c1(t){let e=mA(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function gA(){var t;let e=L.useContext(o1),n=pA(Pc.UseRouteError),r=c1(Pc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function yA(){let{router:t}=fA(u1.UseNavigateStable),e=c1(Pc.UseNavigateStable),n=L.useRef(!1);return a1(()=>{n.current=!0}),L.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,il({fromRouteId:e},s)))},[t,e])}const Gv={};function vA(t,e,n){!e&&!Gv[t]&&(Gv[t]=!0)}function _A(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function wA(t){let{to:e,replace:n,state:r,relative:i}=t;ko()||Ye(!1);let{future:s,static:o}=L.useContext(Ti),{matches:l}=L.useContext(ki),{pathname:u}=Il(),c=Sl(),h=Um(e,Mm(l,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(h);return L.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function ga(t){Ye(!1)}function EA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Jr.Pop,navigator:s,static:o=!1,future:l}=t;ko()&&Ye(!1);let u=e.replace(/^\/*/,"/"),c=L.useMemo(()=>({basename:u,navigator:s,static:o,future:il({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=To(r));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:T="default"}=r,I=L.useMemo(()=>{let N=Vm(h,u);return N==null?null:{location:{pathname:N,search:f,hash:m,state:y,key:T},navigationType:i}},[u,h,f,m,y,T,i]);return I==null?null:L.createElement(Ti.Provider,{value:c},L.createElement(_d.Provider,{children:n,value:I}))}function TA(t){let{children:e,location:n}=t;return oA(Jf(e),n)}new Promise(()=>{});function Jf(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,i)=>{if(!L.isValidElement(r))return;let s=[...e,i];if(r.type===L.Fragment){n.push.apply(n,Jf(r.props.children,s));return}r.type!==ga&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Jf(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zf(){return Zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zf.apply(this,arguments)}function kA(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function SA(t,e){return t.button===0&&(!e||e==="_self")&&!IA(t)}const bA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xA="6";try{window.__reactRouterVersion=xA}catch{}const AA="startTransition",Kv=wS[AA];function CA(t){let{basename:e,children:n,future:r,window:i}=t,s=L.useRef();s.current==null&&(s.current=Px({window:i,v5Compat:!0}));let o=s.current,[l,u]=L.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=L.useCallback(f=>{c&&Kv?Kv(()=>u(f)):u(f)},[u,c]);return L.useLayoutEffect(()=>o.listen(h),[o,h]),L.useEffect(()=>_A(r),[r]),L.createElement(EA,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const NA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,d1=L.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:h,viewTransition:f}=e,m=kA(e,bA),{basename:y}=L.useContext(Ti),T,I=!1;if(typeof c=="string"&&RA.test(c)&&(T=c,NA))try{let E=new URL(window.location.href),P=c.startsWith("//")?new URL(E.protocol+c):new URL(c),U=Vm(P.pathname,y);P.origin===E.origin&&U!=null?c=U+P.search+P.hash:I=!0}catch{}let N=iA(c,{relative:i}),k=PA(c,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:f});function w(E){r&&r(E),E.defaultPrevented||k(E)}return L.createElement("a",Zf({},m,{href:T||N,onClick:I||s?r:w,ref:n,target:u}))});var Qv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qv||(Qv={}));var Yv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Yv||(Yv={}));function PA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=Sl(),c=Il(),h=l1(t,{relative:o});return L.useCallback(f=>{if(SA(f,n)){f.preventDefault();let m=r!==void 0?r:Rc(c)===Rc(h);u(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,h,r,i,n,t,s,o,l])}const DA="modulepreload",OA=function(t){return"/Campus_Resourses_management_System/"+t},Xv={},LA=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=OA(s),s in Xv)return;Xv[s]=!0;const o=s.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":DA,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var VA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const MA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),UA=(t,e)=>{const n=L.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:l,...u},c)=>L.createElement("svg",{ref:c,...VA,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${MA(t)}`,...u},[...e.map(([h,f])=>L.createElement(h,f)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n};var _e=UA;const FA=_e("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),BA=_e("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),jA=_e("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),$A=_e("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),zA=_e("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),wd=_e("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),h1=_e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),f1=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),WA=_e("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),qA=_e("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),HA=_e("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),p1=_e("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Jv=_e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),GA=_e("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),KA=_e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),QA=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),YA=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Ed=_e("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),XA=_e("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Zv=_e("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ep=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),m1=_e("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),qi=_e("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),JA=_e("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ZA=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),eC=_e("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),Dc=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),bl=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Bm=_e("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),us=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ve=({label:t,type:e="text",value:n,onChange:r,error:i,placeholder:s,options:o,required:l=!1})=>{const[u,c]=Y.useState(!1);return e==="select"&&o?C("div",{className:"space-y-2",children:[C("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[t,l&&g("span",{className:"text-red-500 ml-1",children:"*"})]}),C("select",{value:n,onChange:h=>r(h.target.value),className:`input-field ${i?"border-red-500 focus:ring-red-500":""}`,children:[C("option",{value:"",children:["Select ",t.toLowerCase()]}),o.map(h=>g("option",{value:h.value,children:h.label},h.value))]}),i&&g("p",{className:"text-sm text-red-600 dark:text-red-400",children:i})]}):C("div",{className:"space-y-2",children:[C("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[t,l&&g("span",{className:"text-red-500 ml-1",children:"*"})]}),C("div",{className:"relative",children:[g("input",{type:e==="password"&&u?"text":e,value:n,onChange:h=>r(h.target.value),placeholder:s,className:`input-field pr-10 ${i?"border-red-500 focus:ring-red-500":""}`}),e==="password"&&g("button",{type:"button",onClick:()=>c(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400",children:u?g(WA,{size:20}):g(qA,{size:20})})]}),i&&g("p",{className:"text-sm text-red-600 dark:text-red-400",children:i})]})},Te=({children:t,onClick:e,type:n="button",variant:r="primary",size:i="md",disabled:s=!1,loading:o=!1,className:l=""})=>{const u="inline-flex items-center justify-center border text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",c={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},h={primary:"bg-primary-600 hover:bg-primary-700 text-white border-transparent focus:ring-primary-500",secondary:"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 focus:ring-primary-500",outline:"bg-transparent hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 focus:ring-primary-500"};return C("button",{type:n,onClick:e,disabled:s||o,className:`${u} ${c[i]} ${h[r]} ${l}`,children:[o&&g(GA,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),t]})},g1=t=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t),tC=t=>t.length<8?{isValid:!1,message:"Password must be at least 8 characters long"}:/(?=.*[a-z])/.test(t)?/(?=.*[A-Z])/.test(t)?/(?=.*\d)/.test(t)?{isValid:!0,message:""}:{isValid:!1,message:"Password must contain at least one number"}:{isValid:!1,message:"Password must contain at least one uppercase letter"}:{isValid:!1,message:"Password must contain at least one lowercase letter"},nC=t=>t.length<3?{isValid:!1,message:"Username must be at least 3 characters long"}:/^[a-zA-Z0-9_]+$/.test(t)?{isValid:!0,message:""}:{isValid:!1,message:"Username can only contain letters, numbers, and underscores"};let rC={data:""},iC=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||rC,sC=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,oC=/\/\*[^]*?\*\/|  +/g,e0=/\n+/g,Wr=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Wr(o,s):s+"{"+Wr(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Wr(o,e?e.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,l):l?l+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Wr.p?Wr.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},lr={},y1=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+y1(t[n]);return e}return t},aC=(t,e,n,r,i)=>{let s=y1(t),o=lr[s]||(lr[s]=(u=>{let c=0,h=11;for(;c<u.length;)h=101*h+u.charCodeAt(c++)>>>0;return"go"+h})(s));if(!lr[o]){let u=s!==t?t:(c=>{let h,f,m=[{}];for(;h=sC.exec(c.replace(oC,""));)h[4]?m.shift():h[3]?(f=h[3].replace(e0," ").trim(),m.unshift(m[0][f]=m[0][f]||{})):m[0][h[1]]=h[2].replace(e0," ").trim();return m[0]})(t);lr[o]=Wr(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let l=n&&lr.g?lr.g:null;return n&&(lr.g=lr[o]),((u,c,h,f)=>{f?c.data=c.data.replace(f,u):c.data.indexOf(u)===-1&&(c.data=h?u+c.data:c.data+u)})(lr[o],e,r,l),o},lC=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let l=o(n),u=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=u?"."+u:l&&typeof l=="object"?l.props?"":Wr(l,""):l===!1?"":l}return r+i+(o??"")},"");function Td(t){let e=this||{},n=t.call?t(e.p):t;return aC(n.unshift?n.raw?lC(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,iC(e.target),e.g,e.o,e.k)}let v1,tp,np;Td.bind({g:1});let Ir=Td.bind({k:1});function uC(t,e,n,r){Wr.p=e,v1=t,tp=n,np=r}function Ii(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let l=Object.assign({},s),u=l.className||i.className;n.p=Object.assign({theme:tp&&tp()},l),n.o=/ *go\d+/.test(u),l.className=Td.apply(n,r)+(u?" "+u:""),e&&(l.ref=o);let c=t;return t[0]&&(c=l.as||t,delete l.as),np&&c[0]&&np(l),v1(c,l)}return e?e(i):i}}var cC=t=>typeof t=="function",Oc=(t,e)=>cC(t)?t(e):t,dC=(()=>{let t=0;return()=>(++t).toString()})(),_1=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),hC=20,w1=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,hC)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return w1(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Xu=[],ji={toasts:[],pausedAt:void 0},cs=t=>{ji=w1(ji,t),Xu.forEach(e=>{e(ji)})},fC={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},pC=(t={})=>{let[e,n]=L.useState(ji),r=L.useRef(ji);L.useEffect(()=>(r.current!==ji&&n(ji),Xu.push(n),()=>{let s=Xu.indexOf(n);s>-1&&Xu.splice(s,1)}),[]);let i=e.toasts.map(s=>{var o,l,u;return{...t,...t[s.type],...s,removeDelay:s.removeDelay||((o=t[s.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:s.duration||((l=t[s.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||fC[s.type],style:{...t.style,...(u=t[s.type])==null?void 0:u.style,...s.style}}});return{...e,toasts:i}},mC=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||dC()}),xl=t=>(e,n)=>{let r=mC(e,t,n);return cs({type:2,toast:r}),r.id},Bt=(t,e)=>xl("blank")(t,e);Bt.error=xl("error");Bt.success=xl("success");Bt.loading=xl("loading");Bt.custom=xl("custom");Bt.dismiss=t=>{cs({type:3,toastId:t})};Bt.remove=t=>cs({type:4,toastId:t});Bt.promise=(t,e,n)=>{let r=Bt.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?Oc(e.success,i):void 0;return s?Bt.success(s,{id:r,...n,...n==null?void 0:n.success}):Bt.dismiss(r),i}).catch(i=>{let s=e.error?Oc(e.error,i):void 0;s?Bt.error(s,{id:r,...n,...n==null?void 0:n.error}):Bt.dismiss(r)}),t};var gC=(t,e)=>{cs({type:1,toast:{id:t,height:e}})},yC=()=>{cs({type:5,time:Date.now()})},Da=new Map,vC=1e3,_C=(t,e=vC)=>{if(Da.has(t))return;let n=setTimeout(()=>{Da.delete(t),cs({type:4,toastId:t})},e);Da.set(t,n)},wC=t=>{let{toasts:e,pausedAt:n}=pC(t);L.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let u=(l.duration||0)+l.pauseDuration-(s-l.createdAt);if(u<0){l.visible&&Bt.dismiss(l.id);return}return setTimeout(()=>Bt.dismiss(l.id),u)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,n]);let r=L.useCallback(()=>{n&&cs({type:6,time:Date.now()})},[n]),i=L.useCallback((s,o)=>{let{reverseOrder:l=!1,gutter:u=8,defaultPosition:c}=o||{},h=e.filter(y=>(y.position||c)===(s.position||c)&&y.height),f=h.findIndex(y=>y.id===s.id),m=h.filter((y,T)=>T<f&&y.visible).length;return h.filter(y=>y.visible).slice(...l?[m+1]:[0,m]).reduce((y,T)=>y+(T.height||0)+u,0)},[e]);return L.useEffect(()=>{e.forEach(s=>{if(s.dismissed)_C(s.id,s.removeDelay);else{let o=Da.get(s.id);o&&(clearTimeout(o),Da.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:gC,startPause:yC,endPause:r,calculateOffset:i}}},EC=Ir`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,TC=Ir`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kC=Ir`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,IC=Ii("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${EC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${TC} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${kC} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,SC=Ir`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,bC=Ii("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${SC} 1s linear infinite;
`,xC=Ir`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,AC=Ir`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,CC=Ii("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${xC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${AC} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,NC=Ii("div")`
  position: absolute;
`,RC=Ii("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,PC=Ir`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,DC=Ii("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${PC} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,OC=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?L.createElement(DC,null,e):e:n==="blank"?null:L.createElement(RC,null,L.createElement(bC,{...r}),n!=="loading"&&L.createElement(NC,null,n==="error"?L.createElement(IC,{...r}):L.createElement(CC,{...r})))},LC=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,VC=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,MC="0%{opacity:0;} 100%{opacity:1;}",UC="0%{opacity:1;} 100%{opacity:0;}",FC=Ii("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,BC=Ii("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,jC=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=_1()?[MC,UC]:[LC(n),VC(n)];return{animation:e?`${Ir(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ir(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},$C=L.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?jC(t.position||e||"top-center",t.visible):{opacity:0},s=L.createElement(OC,{toast:t}),o=L.createElement(BC,{...t.ariaProps},Oc(t.message,t));return L.createElement(FC,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):L.createElement(L.Fragment,null,s,o))});uC(L.createElement);var zC=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=L.useCallback(o=>{if(o){let l=()=>{let u=o.getBoundingClientRect().height;r(t,u)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return L.createElement("div",{ref:s,className:e,style:n},i)},WC=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:_1()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},qC=Td`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Au=16,kd=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:l,handlers:u}=wC(n);return L.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Au,left:Au,right:Au,bottom:Au,pointerEvents:"none",...s},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},l.map(c=>{let h=c.position||e,f=u.calculateOffset(c,{reverseOrder:t,gutter:r,defaultPosition:e}),m=WC(h,f);return L.createElement(zC,{id:c.id,key:c.id,onHeightUpdate:u.updateHeight,className:c.visible?qC:"",style:m},c.type==="custom"?Oc(c.message,c):i?i(c):L.createElement($C,{toast:c,position:h}))}))},se=Bt;const HC=()=>{const t=Sl(),[e,n]=L.useState({email:"",password:""}),[r,i]=L.useState({}),[s,o]=L.useState(!1),l=(h,f)=>{n(m=>({...m,[h]:f})),r[h]&&i(m=>({...m,[h]:void 0}))},u=()=>{const h={};return e.email?g1(e.email)||(h.email="Please enter a valid email address"):h.email="Email is required",e.password||(h.password="Password is required"),i(h),Object.keys(h).length===0};return C("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-gray-900 transition-all duration-300",children:[g(kd,{position:"top-right"}),C("div",{className:"max-w-md w-full space-y-8",children:[C("div",{className:"text-center",children:[g("div",{className:"mx-auto h-12 w-12 bg-primary-600 rounded-xl flex items-center justify-center",children:g(p1,{className:"h-8 w-8 text-white"})}),g("h2",{className:"mt-6 text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Welcome back"}),g("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Sign in to your Campus Resources account"})]}),C("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-8 animate-fade-in",children:[C("form",{className:"space-y-6",onSubmit:async h=>{if(h.preventDefault(),!!u()){o(!0);try{const{firebaseService:f}=await LA(()=>Promise.resolve().then(()=>J4),void 0),{user:m,token:y}=await f.login(e.email,e.password);localStorage.setItem("user",JSON.stringify(m)),localStorage.setItem("token",y),console.log("✅ Login successful:",m),se.success(`Welcome back, ${m.username}!`),t("/dashboard")}catch(f){console.error("❌ Login failed:",f),se.error("Invalid email or password. Please try again."),i({email:"Invalid email or password. Please try again."})}finally{o(!1)}}},children:[g(ve,{label:"Email Address",type:"email",value:e.email,onChange:h=>l("email",h),error:r.email,placeholder:"Enter your email",required:!0}),g(ve,{label:"Password",type:"password",value:e.password,onChange:h=>l("password",h),error:r.password,placeholder:"Enter your password",required:!0}),C("div",{className:"flex items-center justify-between",children:[C("div",{className:"flex items-center",children:[g("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),g("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-100",children:"Remember me"})]}),g("div",{className:"text-sm",children:g("a",{href:"#",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})]}),g(Te,{type:"submit",loading:s,className:"w-full",children:"Sign in"})]}),C("div",{className:"mt-6",children:[C("div",{className:"relative",children:[g("div",{className:"absolute inset-0 flex items-center",children:g("div",{className:"w-full border-t border-gray-300"})}),g("div",{className:"relative flex justify-center text-sm",children:g("span",{className:"px-2 bg-white dark:bg-gray-800 text-gray-500 dark:text-gray-400",children:"Or continue with"})})]}),C("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[C(Te,{variant:"secondary",className:"w-full",children:[C("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[g("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),g("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),g("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),g("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),g("span",{className:"ml-2",children:"Google"})]}),C(Te,{variant:"secondary",className:"w-full",children:[g("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:g("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806.026-1.566.247-2.229.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})}),g("span",{className:"ml-2",children:"Twitter"})]})]})]}),g("div",{className:"mt-6 text-center",children:C("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",g(d1,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign up"})]})})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},GC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},T1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,f=(s&3)<<4|l>>4;let m=(l&15)<<2|c>>6,y=c&63;u||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(E1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||f==null)throw new KC;const m=s<<2|l>>4;if(r.push(m),c!==64){const y=l<<4&240|c>>2;if(r.push(y),f!==64){const T=c<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QC=function(t){const e=E1(t);return T1.encodeByteArray(e,!0)},Lc=function(t){return QC(t).replace(/\./g,"")},k1=function(t){try{return T1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=()=>YC().__FIREBASE_DEFAULTS__,JC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&k1(t[1]);return e&&JSON.parse(e)},Id=()=>{try{return XC()||JC()||ZC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I1=t=>{var e,n;return(n=(e=Id())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},S1=t=>{const e=I1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},b1=()=>{var t;return(t=Id())===null||t===void 0?void 0:t.config},x1=t=>{var e;return(e=Id())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Lc(JSON.stringify(n)),Lc(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function nN(){var t;const e=(t=Id())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oN(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aN(){return!nN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lN(){try{return typeof indexedDB=="object"}catch{return!1}}function uN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="FirebaseError";class tr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cN,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?dN(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new tr(i,l,r)}}function dN(t,e){return t.replace(hN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const hN=/\{\$([^}]+)}/g;function fN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(t0(s)&&t0(o)){if(!Vc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function t0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ya(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function va(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pN(t,e){const n=new mN(t,e);return n.subscribe.bind(n)}class mN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Uh),i.error===void 0&&(i.error=Uh),i.complete===void 0&&(i.complete=Uh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Uh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class mi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_N(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vN(t){return t===Mi?void 0:t}function _N(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const EN={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},TN=ue.INFO,kN={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},IN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=kN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jm{constructor(e){this.name=e,this._logLevel=TN,this._logHandler=IN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const SN=(t,e)=>e.some(n=>t instanceof n);let n0,r0;function bN(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xN(){return r0||(r0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C1=new WeakMap,rp=new WeakMap,N1=new WeakMap,Fh=new WeakMap,$m=new WeakMap;function AN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ui(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&C1.set(n,t)}).catch(()=>{}),$m.set(e,t),e}function CN(t){if(rp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});rp.set(t,e)}let ip={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||N1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NN(t){ip=t(ip)}function RN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bh(this),e,...n);return N1.set(r,e.sort?e.sort():[e]),ui(r)}:xN().includes(t)?function(...e){return t.apply(Bh(this),e),ui(C1.get(this))}:function(...e){return ui(t.apply(Bh(this),e))}}function PN(t){return typeof t=="function"?RN(t):(t instanceof IDBTransaction&&CN(t),SN(t,bN())?new Proxy(t,ip):t)}function ui(t){if(t instanceof IDBRequest)return AN(t);if(Fh.has(t))return Fh.get(t);const e=PN(t);return e!==t&&(Fh.set(t,e),$m.set(e,t)),e}const Bh=t=>$m.get(t);function DN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=ui(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ui(o.result),u.oldVersion,u.newVersion,ui(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const ON=["get","getKey","getAll","getAllKeys","count"],LN=["put","add","delete","clear"],jh=new Map;function i0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jh.get(e))return jh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=LN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ON.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return jh.set(e,s),s}NN(t=>({...t,get:(e,n,r)=>i0(e,n)||t.get(e,n,r),has:(e,n)=>!!i0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sp="@firebase/app",s0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new jm("@firebase/app"),UN="@firebase/app-compat",FN="@firebase/analytics-compat",BN="@firebase/analytics",jN="@firebase/app-check-compat",$N="@firebase/app-check",zN="@firebase/auth",WN="@firebase/auth-compat",qN="@firebase/database",HN="@firebase/data-connect",GN="@firebase/database-compat",KN="@firebase/functions",QN="@firebase/functions-compat",YN="@firebase/installations",XN="@firebase/installations-compat",JN="@firebase/messaging",ZN="@firebase/messaging-compat",eR="@firebase/performance",tR="@firebase/performance-compat",nR="@firebase/remote-config",rR="@firebase/remote-config-compat",iR="@firebase/storage",sR="@firebase/storage-compat",oR="@firebase/firestore",aR="@firebase/vertexai-preview",lR="@firebase/firestore-compat",uR="firebase",cR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",dR={[sp]:"fire-core",[UN]:"fire-core-compat",[BN]:"fire-analytics",[FN]:"fire-analytics-compat",[$N]:"fire-app-check",[jN]:"fire-app-check-compat",[zN]:"fire-auth",[WN]:"fire-auth-compat",[qN]:"fire-rtdb",[HN]:"fire-data-connect",[GN]:"fire-rtdb-compat",[KN]:"fire-fn",[QN]:"fire-fn-compat",[YN]:"fire-iid",[XN]:"fire-iid-compat",[JN]:"fire-fcm",[ZN]:"fire-fcm-compat",[eR]:"fire-perf",[tR]:"fire-perf-compat",[nR]:"fire-rc",[rR]:"fire-rc-compat",[iR]:"fire-gcs",[sR]:"fire-gcs-compat",[oR]:"fire-fst",[lR]:"fire-fst-compat",[aR]:"fire-vertex","fire-js":"fire-js",[uR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map,hR=new Map,ap=new Map;function o0(t,e){try{t.container.addComponent(e)}catch(n){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function es(t){const e=t.name;if(ap.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,t);for(const n of Mc.values())o0(n,t);for(const n of hR.values())o0(n,t);return!0}function Sd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new Al("app","Firebase",fR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=cR;function R1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:op,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ci.create("bad-app-name",{appName:String(i)});if(n||(n=b1()),!n)throw ci.create("no-options");const s=Mc.get(i);if(s){if(Vc(n,s.options)&&Vc(r,s.config))return s;throw ci.create("duplicate-app",{appName:i})}const o=new wN(i);for(const u of ap.values())o.addComponent(u);const l=new pR(n,r,o);return Mc.set(i,l),l}function zm(t=op){const e=Mc.get(t);if(!e&&t===op&&b1())return R1();if(!e)throw ci.create("no-app",{appName:t});return e}function Qn(t,e,n){var r;let i=(r=dR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(l.join(" "));return}es(new mi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="firebase-heartbeat-database",gR=1,sl="firebase-heartbeat-store";let $h=null;function P1(){return $h||($h=DN(mR,gR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ci.create("idb-open",{originalErrorMessage:t.message})})),$h}async function yR(t){try{const n=(await P1()).transaction(sl),r=await n.objectStore(sl).get(D1(t));return await n.done,r}catch(e){if(e instanceof tr)Sr.warn(e.message);else{const n=ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(n.message)}}}async function a0(t,e){try{const r=(await P1()).transaction(sl,"readwrite");await r.objectStore(sl).put(e,D1(t)),await r.done}catch(n){if(n instanceof tr)Sr.warn(n.message);else{const r=ci.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Sr.warn(r.message)}}}function D1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=1024,_R=30*24*60*60*1e3;class wR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=l0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=_R}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=l0(),{heartbeatsToSend:r,unsentEntries:i}=ER(this._heartbeatsCache.heartbeats),s=Lc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Sr.warn(n),""}}}function l0(){return new Date().toISOString().substring(0,10)}function ER(t,e=vR){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),u0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),u0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lN()?uN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return a0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return a0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function u0(t){return Lc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){es(new mi("platform-logger",e=>new VN(e),"PRIVATE")),es(new mi("heartbeat",e=>new wR(e),"PRIVATE")),Qn(sp,s0,t),Qn(sp,s0,"esm2017"),Qn("fire-js","")}kR("");function Wm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function O1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IR=O1,L1=new Al("auth","Firebase",O1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new jm("@firebase/auth");function SR(t,...e){Uc.logLevel<=ue.WARN&&Uc.warn(`Auth (${ds}): ${t}`,...e)}function Ju(t,...e){Uc.logLevel<=ue.ERROR&&Uc.error(`Auth (${ds}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,...e){throw qm(t,...e)}function Yn(t,...e){return qm(t,...e)}function V1(t,e,n){const r=Object.assign(Object.assign({},IR()),{[e]:n});return new Al("auth","Firebase",r).create(e,{appName:t.name})}function vr(t){return V1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return L1.create(t,...e)}function Z(t,e,...n){if(!t)throw qm(e,...n)}function pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ju(e),new Error(e)}function br(t,e){t||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bR(){return c0()==="http:"||c0()==="https:"}function c0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bR()||iN()||"connection"in navigator)?navigator.onLine:!0}function AR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n){this.shortDelay=e,this.longDelay=n,br(n>e,"Short delay should be less than long delay!"),this.isMobile=tN()||sN()}get(){return xR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Nl(3e4,6e4);function Si(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nr(t,e,n,r,i={}){return U1(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Cl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return rN()||(c.referrerPolicy="no-referrer"),M1.fetch()(F1(t,t.config.apiHost,n,l),c)})}async function U1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},CR),e);try{const i=new PR(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Cu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Cu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Cu(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw V1(t,h,c);Nn(t,h)}}catch(i){if(i instanceof tr)throw i;Nn(t,"network-request-failed",{message:String(i)})}}async function Rl(t,e,n,r,i={}){const s=await Nr(t,e,n,r,i);return"mfaPendingCredential"in s&&Nn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function F1(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Hm(t.config,i):`${t.config.apiScheme}://${i}`}function RR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yn(this.auth,"network-request-failed")),NR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Yn(t,e,r);return i.customData._tokenResponse=n,i}function d0(t){return t!==void 0&&t.enterprise!==void 0}class DR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return RR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function OR(t,e){return Nr(t,"GET","/v2/recaptchaConfig",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(t,e){return Nr(t,"POST","/v1/accounts:delete",e)}async function B1(t,e){return Nr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VR(t,e=!1){const n=We(t),r=await n.getIdToken(e),i=Gm(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Oa(zh(i.auth_time)),issuedAtTime:Oa(zh(i.iat)),expirationTime:Oa(zh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zh(t){return Number(t)*1e3}function Gm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ju("JWT malformed, contained fewer than 3 sections"),null;try{const i=k1(n);return i?JSON.parse(i):(Ju("Failed to decode base64 JWT payload"),null)}catch(i){return Ju("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function h0(t){const e=Gm(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof tr&&MR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function MR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await co(t,B1(n,{idToken:r}));Z(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?j1(s.providerUserInfo):[],l=BR(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new up(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function FR(t){const e=We(t);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function j1(t){return t.map(e=>{var{providerId:n}=e,r=Wm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e){const n=await U1(t,{},async()=>{const r=Cl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=F1(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",M1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $R(t,e){return Nr(t,"POST","/v2/accounts:revokeToken",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=h0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await jR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Js;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Js,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Wm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new up(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await co(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return VR(this,e)}reload(){return FR(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await co(this,LR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,I=(l=n.tenantId)!==null&&l!==void 0?l:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:E,emailVerified:P,isAnonymous:U,providerData:j,stsTokenManager:S}=n;Z(E&&S,e,"internal-error");const _=Js.fromJSON(this.name,S);Z(typeof E=="string",e,"internal-error"),Ur(f,e.name),Ur(m,e.name),Z(typeof P=="boolean",e,"internal-error"),Z(typeof U=="boolean",e,"internal-error"),Ur(y,e.name),Ur(T,e.name),Ur(I,e.name),Ur(N,e.name),Ur(k,e.name),Ur(w,e.name);const b=new mr({uid:E,auth:e,email:m,emailVerified:P,displayName:f,isAnonymous:U,photoURL:T,phoneNumber:y,tenantId:I,stsTokenManager:_,createdAt:k,lastLoginAt:w});return j&&Array.isArray(j)&&(b.providerData=j.map(x=>Object.assign({},x))),N&&(b._redirectEventId=N),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Js;i.updateFromServerResponse(n);const s=new mr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Z(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?j1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Js;l.updateFromIdToken(r);const u=new mr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new up(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;function gr(t){br(t instanceof Function,"Expected a class definition");let e=f0.get(t);return e?(br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,f0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}$1.type="NONE";const p0=$1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t,e,n){return`firebase:${t}:${e}:${n}`}class Zs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Zu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Zu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zs(gr(p0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||gr(p0);const o=Zu(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const h=await c._get(o);if(h){const f=mr._fromJSON(e,h);c!==s&&(l=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Zs(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Zs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K1(e))return"Blackberry";if(Q1(e))return"Webos";if(W1(e))return"Safari";if((e.includes("chrome/")||q1(e))&&!e.includes("edge/"))return"Chrome";if(G1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function z1(t=Dt()){return/firefox\//i.test(t)}function W1(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q1(t=Dt()){return/crios\//i.test(t)}function H1(t=Dt()){return/iemobile/i.test(t)}function G1(t=Dt()){return/android/i.test(t)}function K1(t=Dt()){return/blackberry/i.test(t)}function Q1(t=Dt()){return/webos/i.test(t)}function Km(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zR(t=Dt()){var e;return Km(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WR(){return oN()&&document.documentMode===10}function Y1(t=Dt()){return Km(t)||G1(t)||Q1(t)||K1(t)||/windows phone/i.test(t)||H1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t,e=[]){let n;switch(t){case"Browser":n=m0(Dt());break;case"Worker":n=`${m0(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ds}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e={}){return Nr(t,"GET","/v2/passwordPolicy",Si(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=6;class KR{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:GR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g0(this),this.idTokenSubscription=new g0(this),this.beforeStateQueue=new qR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Zs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await B1(this,{idToken:e}),r=await mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(vr(this));const n=e?We(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HR(this),n=new KR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $R(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await Zs.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hs(t){return We(t)}class g0{constructor(e){this.auth=e,this.observer=null,this.addObserver=pN(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YR(t){bd=t}function J1(t){return bd.loadJS(t)}function XR(){return bd.recaptchaEnterpriseScript}function JR(){return bd.gapiScript}function ZR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const eP="recaptcha-enterprise",tP="NO_RECAPTCHA";class nP{constructor(e){this.type=eP,this.auth=hs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{OR(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new DR(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;d0(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(tP)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&d0(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=XR();u.length!==0&&(u+=l),J1(u).then(()=>{i(l,s,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function y0(t,e,n,r=!1){const i=new nP(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function cp(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await y0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await y0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t,e){const n=Sd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Vc(s,e??{}))return i;Nn(i,"already-initialized")}return n.initialize({options:e})}function iP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sP(t,e,n){const r=hs(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Z1(e),{host:o,port:l}=oP(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||aP()}function Z1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oP(t){const e=Z1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:v0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:v0(o)}}}function v0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}async function lP(t,e){return Nr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(t,e){return Rl(t,"POST","/v1/accounts:signInWithPassword",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",Si(t,e))}async function dP(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends Qm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ol(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ol(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cp(e,n,"signInWithPassword",uP);case"emailLink":return cP(e,{email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cp(e,r,"signUpPassword",lP);case"emailLink":return dP(e,{idToken:n,email:this._email,oobCode:this._password});default:Nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t,e){return Rl(t,"POST","/v1/accounts:signInWithIdp",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="http://localhost";class ts extends Qm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ts(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Wm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new ts(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return eo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,eo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,eo(e,n)}buildRequest(){const e={requestUri:hP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pP(t){const e=ya(va(t)).link,n=e?ya(va(e)).deep_link_id:null,r=ya(va(t)).deep_link_id;return(r?ya(va(r)).link:null)||r||n||e||t}class Ym{constructor(e){var n,r,i,s,o,l;const u=ya(va(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,f=fP((i=u.mode)!==null&&i!==void 0?i:null);Z(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=pP(e);try{return new Ym(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,n){return ol._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ym.parseLink(n);return Z(r,"argument-error"),ol._fromEmailAndCode(e,r.code,r.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends eT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Pl{constructor(){super("facebook.com")}static credential(e){return ts._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ts._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hr.credential(n,r)}catch{return null}}}Hr.GOOGLE_SIGN_IN_METHOD="google.com";Hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Pl{constructor(){super("github.com")}static credential(e){return ts._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.GITHUB_SIGN_IN_METHOD="github.com";Gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Pl{constructor(){super("twitter.com")}static credential(e,n){return ts._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Kr.credential(n,r)}catch{return null}}}Kr.TWITTER_SIGN_IN_METHOD="twitter.com";Kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(t,e){return Rl(t,"POST","/v1/accounts:signUp",Si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await mr._fromIdTokenResponse(e,r,i),o=_0(r);return new ns({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_0(r);return new ns({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends tr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Bc(e,n,r,i)}}function tT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Bc._fromErrorAndOperation(t,s,e,r):s})}async function gP(t,e,n=!1){const r=await co(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ns._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yP(t,e,n=!1){const{auth:r}=t;if(qn(r.app))return Promise.reject(vr(r));const i="reauthenticate";try{const s=await co(t,tT(r,i,e,t),n);Z(s.idToken,r,"internal-error");const o=Gm(s.idToken);Z(o,r,"internal-error");const{sub:l}=o;return Z(t.uid===l,r,"user-mismatch"),ns._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Nn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(t,e,n=!1){if(qn(t.app))return Promise.reject(vr(t));const r="signIn",i=await tT(t,r,e),s=await ns._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function vP(t,e){return nT(hs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(t){const e=hs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _P(t,e,n){if(qn(t.app))return Promise.reject(vr(t));const r=hs(t),o=await cp(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&rT(t),u}),l=await ns._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function w0(t,e,n){return qn(t.app)?Promise.reject(vr(t)):vP(We(t),Io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(t,e){return Nr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=We(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await co(r,wP(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function TP(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function kP(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function IP(t){return We(t).signOut()}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=1e3,bP=10;class sT extends iT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);WR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},SP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sT.type="LOCAL";const xP=sT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT extends iT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oT.type="SESSION";const aT=oT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new xd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await AP(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=Xm("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return window}function NP(t){Xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}async function RP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function DP(){return lT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="firebaseLocalStorageDb",OP=1,$c="firebaseLocalStorage",cT="fbase_key";class Dl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ad(t,e){return t.transaction([$c],e?"readwrite":"readonly").objectStore($c)}function LP(){const t=indexedDB.deleteDatabase(uT);return new Dl(t).toPromise()}function dp(){const t=indexedDB.open(uT,OP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($c,{keyPath:cT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($c)?e(r):(r.close(),await LP(),e(await dp()))})})}async function E0(t,e,n){const r=Ad(t,!0).put({[cT]:e,value:n});return new Dl(r).toPromise()}async function VP(t,e){const n=Ad(t,!1).get(e),r=await new Dl(n).toPromise();return r===void 0?null:r.value}function T0(t,e){const n=Ad(t,!0).delete(e);return new Dl(n).toPromise()}const MP=800,UP=3;class dT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xd._getInstance(DP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RP(),!this.activeServiceWorker)return;this.sender=new CP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dp();return await E0(e,jc,"1"),await T0(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>E0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>VP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>T0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ad(i,!1).getAll();return new Dl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dT.type="LOCAL";const FP=dT;new Nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t,e){return e?gr(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends Qm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jP(t){return nT(t.auth,new Jm(t),t.bypassAuthState)}function $P(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),yP(n,new Jm(t),t.bypassAuthState)}async function zP(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),gP(n,new Jm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jP;case"linkViaPopup":case"linkViaRedirect":return zP;case"reauthViaPopup":case"reauthViaRedirect":return $P;default:Nn(this.auth,"internal-error")}}resolve(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=new Nl(2e3,1e4);class $s extends hT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$s.currentPopupAction&&$s.currentPopupAction.cancel(),$s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){br(this.filter.length===1,"Popup operations only handle one event");const e=Xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WP.get())};e()}}$s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="pendingRedirect",ec=new Map;class HP extends hT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ec.get(this.auth._key());if(!e){try{const r=await GP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ec.set(this.auth._key(),e)}return this.bypassAuthState||ec.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GP(t,e){const n=YP(e),r=QP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function KP(t,e){ec.set(t._key(),e)}function QP(t){return gr(t._redirectPersistence)}function YP(t){return Zu(qP,t.config.apiKey,t.name)}async function XP(t,e,n=!1){if(qn(t.app))return Promise.reject(vr(t));const r=hs(t),i=BP(r,e),o=await new HP(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=10*60*1e3;class ZP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JP&&this.cachedEventUids.clear(),this.cachedEventUids.has(k0(e))}saveEventToCache(e){this.cachedEventUids.add(k0(e)),this.lastProcessedEventTime=Date.now()}}function k0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e={}){return Nr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r2=/^https?/;async function i2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await t2(t);for(const n of e)try{if(s2(n))return}catch{}Nn(t,"unauthorized-domain")}function s2(t){const e=lp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!r2.test(n))return!1;if(n2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=new Nl(3e4,6e4);function I0(){const t=Xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function a2(t){return new Promise((e,n)=>{var r,i,s;function o(){I0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{I0(),n(Yn(t,"network-request-failed"))},timeout:o2.get()})}if(!((i=(r=Xn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xn().gapi)===null||s===void 0)&&s.load)o();else{const l=ZR("iframefcb");return Xn()[l]=()=>{gapi.load?o():n(Yn(t,"network-request-failed"))},J1(`${JR()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw tc=null,e})}let tc=null;function l2(t){return tc=tc||a2(t),tc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new Nl(5e3,15e3),c2="__/auth/iframe",d2="emulator/auth/iframe",h2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p2(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hm(e,d2):`https://${t.config.authDomain}/${c2}`,r={apiKey:e.apiKey,appName:t.name,v:ds},i=f2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Cl(r).slice(1)}`}async function m2(t){const e=await l2(t),n=Xn().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:p2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Yn(t,"network-request-failed"),l=Xn().setTimeout(()=>{s(o)},u2.get());function u(){Xn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y2=500,v2=600,_2="_blank",w2="http://localhost";class S0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function E2(t,e,n,r=y2,i=v2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},g2),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Dt().toLowerCase();n&&(l=q1(c)?_2:n),z1(c)&&(e=e||w2,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[y,T])=>`${m}${y}=${T},`,"");if(zR(c)&&l!=="_self")return T2(e||"",l),new S0(null);const f=window.open(e||"",l,h);Z(f,t,"popup-blocked");try{f.focus()}catch{}return new S0(f)}function T2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="__/auth/handler",I2="emulator/auth/handler",S2=encodeURIComponent("fac");async function b0(t,e,n,r,i,s){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ds,eventId:i};if(e instanceof eT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof Pl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${S2}=${encodeURIComponent(u)}`:"";return`${b2(t)}?${Cl(l).slice(1)}${c}`}function b2({config:t}){return t.emulator?Hm(t,I2):`https://${t.authDomain}/${k2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="webStorageSupport";class x2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aT,this._completeRedirectFn=XP,this._overrideRedirectResult=KP}async _openPopup(e,n,r,i){var s;br((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await b0(e,n,r,lp(),i);return E2(e,o,Xm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await b0(e,n,r,lp(),i);return NP(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(br(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await m2(e),r=new ZP(e);return n.register("authEvent",i=>(Z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wh,{type:Wh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Wh];o!==void 0&&n(!!o),Nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=i2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y1()||W1()||Km()}}const A2=x2;var x0="@firebase/auth",A0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R2(t){es(new mi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X1(t)},c=new QR(r,i,s,u);return iP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),es(new mi("auth-internal",e=>{const n=hs(e.getProvider("auth").getImmediate());return(r=>new C2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(x0,A0,N2(t)),Qn(x0,A0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=5*60,D2=x1("authIdTokenMaxAge")||P2;let C0=null;const O2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>D2)return;const i=n==null?void 0:n.token;C0!==i&&(C0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function L2(t=zm()){const e=Sd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rP(t,{popupRedirectResolver:A2,persistence:[FP,xP,aT]}),r=x1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=O2(s.toString());kP(n,o,()=>o(n.currentUser)),TP(n,l=>o(l))}}const i=I1("auth");return i&&sP(n,`http://${i}`),n}function V2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}YR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Yn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",V2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R2("Browser");var N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,pT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function b(){}b.prototype=_.prototype,S.D=_.prototype,S.prototype=new b,S.prototype.constructor=S,S.C=function(x,R,D){for(var A=Array(arguments.length-2),je=2;je<arguments.length;je++)A[je-2]=arguments[je];return _.prototype[R].apply(x,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,b){b||(b=0);var x=Array(16);if(typeof _=="string")for(var R=0;16>R;++R)x[R]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(R=0;16>R;++R)x[R]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=S.g[0],b=S.g[1],R=S.g[2];var D=S.g[3],A=_+(D^b&(R^D))+x[0]+3614090360&4294967295;_=b+(A<<7&4294967295|A>>>25),A=D+(R^_&(b^R))+x[1]+3905402710&4294967295,D=_+(A<<12&4294967295|A>>>20),A=R+(b^D&(_^b))+x[2]+606105819&4294967295,R=D+(A<<17&4294967295|A>>>15),A=b+(_^R&(D^_))+x[3]+3250441966&4294967295,b=R+(A<<22&4294967295|A>>>10),A=_+(D^b&(R^D))+x[4]+4118548399&4294967295,_=b+(A<<7&4294967295|A>>>25),A=D+(R^_&(b^R))+x[5]+1200080426&4294967295,D=_+(A<<12&4294967295|A>>>20),A=R+(b^D&(_^b))+x[6]+2821735955&4294967295,R=D+(A<<17&4294967295|A>>>15),A=b+(_^R&(D^_))+x[7]+4249261313&4294967295,b=R+(A<<22&4294967295|A>>>10),A=_+(D^b&(R^D))+x[8]+1770035416&4294967295,_=b+(A<<7&4294967295|A>>>25),A=D+(R^_&(b^R))+x[9]+2336552879&4294967295,D=_+(A<<12&4294967295|A>>>20),A=R+(b^D&(_^b))+x[10]+4294925233&4294967295,R=D+(A<<17&4294967295|A>>>15),A=b+(_^R&(D^_))+x[11]+2304563134&4294967295,b=R+(A<<22&4294967295|A>>>10),A=_+(D^b&(R^D))+x[12]+1804603682&4294967295,_=b+(A<<7&4294967295|A>>>25),A=D+(R^_&(b^R))+x[13]+4254626195&4294967295,D=_+(A<<12&4294967295|A>>>20),A=R+(b^D&(_^b))+x[14]+2792965006&4294967295,R=D+(A<<17&4294967295|A>>>15),A=b+(_^R&(D^_))+x[15]+1236535329&4294967295,b=R+(A<<22&4294967295|A>>>10),A=_+(R^D&(b^R))+x[1]+4129170786&4294967295,_=b+(A<<5&4294967295|A>>>27),A=D+(b^R&(_^b))+x[6]+3225465664&4294967295,D=_+(A<<9&4294967295|A>>>23),A=R+(_^b&(D^_))+x[11]+643717713&4294967295,R=D+(A<<14&4294967295|A>>>18),A=b+(D^_&(R^D))+x[0]+3921069994&4294967295,b=R+(A<<20&4294967295|A>>>12),A=_+(R^D&(b^R))+x[5]+3593408605&4294967295,_=b+(A<<5&4294967295|A>>>27),A=D+(b^R&(_^b))+x[10]+38016083&4294967295,D=_+(A<<9&4294967295|A>>>23),A=R+(_^b&(D^_))+x[15]+3634488961&4294967295,R=D+(A<<14&4294967295|A>>>18),A=b+(D^_&(R^D))+x[4]+3889429448&4294967295,b=R+(A<<20&4294967295|A>>>12),A=_+(R^D&(b^R))+x[9]+568446438&4294967295,_=b+(A<<5&4294967295|A>>>27),A=D+(b^R&(_^b))+x[14]+3275163606&4294967295,D=_+(A<<9&4294967295|A>>>23),A=R+(_^b&(D^_))+x[3]+4107603335&4294967295,R=D+(A<<14&4294967295|A>>>18),A=b+(D^_&(R^D))+x[8]+1163531501&4294967295,b=R+(A<<20&4294967295|A>>>12),A=_+(R^D&(b^R))+x[13]+2850285829&4294967295,_=b+(A<<5&4294967295|A>>>27),A=D+(b^R&(_^b))+x[2]+4243563512&4294967295,D=_+(A<<9&4294967295|A>>>23),A=R+(_^b&(D^_))+x[7]+1735328473&4294967295,R=D+(A<<14&4294967295|A>>>18),A=b+(D^_&(R^D))+x[12]+2368359562&4294967295,b=R+(A<<20&4294967295|A>>>12),A=_+(b^R^D)+x[5]+4294588738&4294967295,_=b+(A<<4&4294967295|A>>>28),A=D+(_^b^R)+x[8]+2272392833&4294967295,D=_+(A<<11&4294967295|A>>>21),A=R+(D^_^b)+x[11]+1839030562&4294967295,R=D+(A<<16&4294967295|A>>>16),A=b+(R^D^_)+x[14]+4259657740&4294967295,b=R+(A<<23&4294967295|A>>>9),A=_+(b^R^D)+x[1]+2763975236&4294967295,_=b+(A<<4&4294967295|A>>>28),A=D+(_^b^R)+x[4]+1272893353&4294967295,D=_+(A<<11&4294967295|A>>>21),A=R+(D^_^b)+x[7]+4139469664&4294967295,R=D+(A<<16&4294967295|A>>>16),A=b+(R^D^_)+x[10]+3200236656&4294967295,b=R+(A<<23&4294967295|A>>>9),A=_+(b^R^D)+x[13]+681279174&4294967295,_=b+(A<<4&4294967295|A>>>28),A=D+(_^b^R)+x[0]+3936430074&4294967295,D=_+(A<<11&4294967295|A>>>21),A=R+(D^_^b)+x[3]+3572445317&4294967295,R=D+(A<<16&4294967295|A>>>16),A=b+(R^D^_)+x[6]+76029189&4294967295,b=R+(A<<23&4294967295|A>>>9),A=_+(b^R^D)+x[9]+3654602809&4294967295,_=b+(A<<4&4294967295|A>>>28),A=D+(_^b^R)+x[12]+3873151461&4294967295,D=_+(A<<11&4294967295|A>>>21),A=R+(D^_^b)+x[15]+530742520&4294967295,R=D+(A<<16&4294967295|A>>>16),A=b+(R^D^_)+x[2]+3299628645&4294967295,b=R+(A<<23&4294967295|A>>>9),A=_+(R^(b|~D))+x[0]+4096336452&4294967295,_=b+(A<<6&4294967295|A>>>26),A=D+(b^(_|~R))+x[7]+1126891415&4294967295,D=_+(A<<10&4294967295|A>>>22),A=R+(_^(D|~b))+x[14]+2878612391&4294967295,R=D+(A<<15&4294967295|A>>>17),A=b+(D^(R|~_))+x[5]+4237533241&4294967295,b=R+(A<<21&4294967295|A>>>11),A=_+(R^(b|~D))+x[12]+1700485571&4294967295,_=b+(A<<6&4294967295|A>>>26),A=D+(b^(_|~R))+x[3]+2399980690&4294967295,D=_+(A<<10&4294967295|A>>>22),A=R+(_^(D|~b))+x[10]+4293915773&4294967295,R=D+(A<<15&4294967295|A>>>17),A=b+(D^(R|~_))+x[1]+2240044497&4294967295,b=R+(A<<21&4294967295|A>>>11),A=_+(R^(b|~D))+x[8]+1873313359&4294967295,_=b+(A<<6&4294967295|A>>>26),A=D+(b^(_|~R))+x[15]+4264355552&4294967295,D=_+(A<<10&4294967295|A>>>22),A=R+(_^(D|~b))+x[6]+2734768916&4294967295,R=D+(A<<15&4294967295|A>>>17),A=b+(D^(R|~_))+x[13]+1309151649&4294967295,b=R+(A<<21&4294967295|A>>>11),A=_+(R^(b|~D))+x[4]+4149444226&4294967295,_=b+(A<<6&4294967295|A>>>26),A=D+(b^(_|~R))+x[11]+3174756917&4294967295,D=_+(A<<10&4294967295|A>>>22),A=R+(_^(D|~b))+x[2]+718787259&4294967295,R=D+(A<<15&4294967295|A>>>17),A=b+(D^(R|~_))+x[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var b=_-this.blockSize,x=this.B,R=this.h,D=0;D<_;){if(R==0)for(;D<=b;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<_;)if(x[R++]=S.charCodeAt(D++),R==this.blockSize){i(this,x),R=0;break}}else for(;D<_;)if(x[R++]=S[D++],R==this.blockSize){i(this,x),R=0;break}}this.h=R,this.o+=_},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var b=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=b&255,b/=256;for(this.u(S),S=Array(16),_=b=0;4>_;++_)for(var x=0;32>x;x+=8)S[b++]=this.g[_]>>>x&255;return S};function s(S,_){var b=l;return Object.prototype.hasOwnProperty.call(b,S)?b[S]:b[S]=_(S)}function o(S,_){this.h=_;for(var b=[],x=!0,R=S.length-1;0<=R;R--){var D=S[R]|0;x&&D==_||(b[R]=D,x=!1)}this.g=b}var l={};function u(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return N(c(-S));for(var _=[],b=1,x=0;S>=b;x++)_[x]=S/b|0,b*=4294967296;return new o(_,0)}function h(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return N(h(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(_,8)),x=f,R=0;R<S.length;R+=8){var D=Math.min(8,S.length-R),A=parseInt(S.substring(R,R+D),_);8>D?(D=c(Math.pow(_,D)),x=x.j(D).add(c(A))):(x=x.j(b),x=x.add(c(A)))}return x}var f=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(I(this))return-N(this).m();for(var S=0,_=1,b=0;b<this.g.length;b++){var x=this.i(b);S+=(0<=x?x:4294967296+x)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(I(this))return"-"+N(this).toString(S);for(var _=c(Math.pow(S,6)),b=this,x="";;){var R=P(b,_).g;b=k(b,R.j(_));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(S);if(b=R,T(b))return D+x;for(;6>D.length;)D="0"+D;x=D+x}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function I(S){return S.h==-1}t.l=function(S){return S=k(this,S),I(S)?-1:T(S)?0:1};function N(S){for(var _=S.g.length,b=[],x=0;x<_;x++)b[x]=~S.g[x];return new o(b,~S.h).add(m)}t.abs=function(){return I(this)?N(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],x=0,R=0;R<=_;R++){var D=x+(this.i(R)&65535)+(S.i(R)&65535),A=(D>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);x=A>>>16,D&=65535,A&=65535,b[R]=A<<16|D}return new o(b,b[b.length-1]&-2147483648?-1:0)};function k(S,_){return S.add(N(_))}t.j=function(S){if(T(this)||T(S))return f;if(I(this))return I(S)?N(this).j(N(S)):N(N(this).j(S));if(I(S))return N(this.j(N(S)));if(0>this.l(y)&&0>S.l(y))return c(this.m()*S.m());for(var _=this.g.length+S.g.length,b=[],x=0;x<2*_;x++)b[x]=0;for(x=0;x<this.g.length;x++)for(var R=0;R<S.g.length;R++){var D=this.i(x)>>>16,A=this.i(x)&65535,je=S.i(R)>>>16,qt=S.i(R)&65535;b[2*x+2*R]+=A*qt,w(b,2*x+2*R),b[2*x+2*R+1]+=D*qt,w(b,2*x+2*R+1),b[2*x+2*R+1]+=A*je,w(b,2*x+2*R+1),b[2*x+2*R+2]+=D*je,w(b,2*x+2*R+2)}for(x=0;x<_;x++)b[x]=b[2*x+1]<<16|b[2*x];for(x=_;x<2*_;x++)b[x]=0;return new o(b,0)};function w(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function E(S,_){this.g=S,this.h=_}function P(S,_){if(T(_))throw Error("division by zero");if(T(S))return new E(f,f);if(I(S))return _=P(N(S),_),new E(N(_.g),N(_.h));if(I(_))return _=P(S,N(_)),new E(N(_.g),_.h);if(30<S.g.length){if(I(S)||I(_))throw Error("slowDivide_ only works with positive integers.");for(var b=m,x=_;0>=x.l(S);)b=U(b),x=U(x);var R=j(b,1),D=j(x,1);for(x=j(x,2),b=j(b,2);!T(x);){var A=D.add(x);0>=A.l(S)&&(R=R.add(b),D=A),x=j(x,1),b=j(b,1)}return _=k(S,R.j(_)),new E(R,_)}for(R=f;0<=S.l(_);){for(b=Math.max(1,Math.floor(S.m()/_.m())),x=Math.ceil(Math.log(b)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),D=c(b),A=D.j(_);I(A)||0<A.l(S);)b-=x,D=c(b),A=D.j(_);T(D)&&(D=m),R=R.add(D),S=k(S,A)}return new E(R,S)}t.A=function(S){return P(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],x=0;x<_;x++)b[x]=this.i(x)&S.i(x);return new o(b,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],x=0;x<_;x++)b[x]=this.i(x)|S.i(x);return new o(b,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),b=[],x=0;x<_;x++)b[x]=this.i(x)^S.i(x);return new o(b,this.h^S.h)};function U(S){for(var _=S.g.length+1,b=[],x=0;x<_;x++)b[x]=S.i(x)<<1|S.i(x-1)>>>31;return new o(b,S.h)}function j(S,_){var b=_>>5;_%=32;for(var x=S.g.length-b,R=[],D=0;D<x;D++)R[D]=0<_?S.i(D+b)>>>_|S.i(D+b+1)<<32-_:S.i(D+b);return new o(R,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Hi=o}).apply(typeof N0<"u"?N0:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mT,_a,gT,nc,hp,yT,vT,_T;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,p){return a==Array.prototype||a==Object.prototype||(a[d]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var p=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var O=a[v];if(!(O in p))break e;p=p[O]}a=a[a.length-1],v=p[a],d=d(v),d!=v&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var p=0,v=!1,O={next:function(){if(!v&&p<a.length){var V=p++;return{value:d(V,a[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,p){return a.call.apply(a.bind,arguments)}function f(a,d,p){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,v),a.apply(d,O)}}return function(){return a.apply(d,arguments)}}function m(a,d,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function T(a,d){function p(){}p.prototype=d.prototype,a.aa=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(v,O,V){for(var W=Array(arguments.length-2),be=2;be<arguments.length;be++)W[be-2]=arguments[be];return d.prototype[O].apply(v,W)}}function I(a){const d=a.length;if(0<d){const p=Array(d);for(let v=0;v<d;v++)p[v]=a[v];return p}return[]}function N(a,d){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(u(v)){const O=a.length||0,V=v.length||0;a.length=O+V;for(let W=0;W<V;W++)a[O+W]=v[W]}else a.push(v)}}class k{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function E(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var U=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function j(a,d,p){for(const v in a)d.call(p,a[v],v,a)}function S(a,d){for(const p in a)d.call(void 0,a[p],p,a)}function _(a){const d={};for(const p in a)d[p]=a[p];return d}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(a,d){let p,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(p in v)a[p]=v[p];for(let V=0;V<b.length;V++)p=b[V],Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}}function R(a){var d=1;a=a.split(":");const p=[];for(;0<d&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function D(a){l.setTimeout(()=>{throw a},0)}function A(){var a=X;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class je{constructor(){this.h=this.g=null}add(d,p){const v=qt.get();v.set(d,p),this.h?this.h.next=v:this.g=v,this.h=v}}var qt=new k(()=>new Ge,a=>a.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ot,q=!1,X=new je,Q=()=>{const a=l.Promise.resolve(void 0);Ot=()=>{a.then(ce)}};var ce=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(p){D(p)}var d=qt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}q=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var it=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,d),l.removeEventListener("test",p,d)}catch{}return a}();function Lt(a,d){if(we.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(U){e:{try{P(d.nodeName);var O=!0;break e}catch{}O=!1}O||(d=null)}}else p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:kt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Lt.aa.h.call(this)}}T(Lt,we);var kt={2:"touch",3:"pen",4:"mouse"};Lt.prototype.h=function(){Lt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),nr=0;function en(a,d,p,v,O){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!v,this.ha=O,this.key=++nr,this.da=this.fa=!1}function Dn(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function On(a){this.src=a,this.g={},this.h=0}On.prototype.add=function(a,d,p,v,O){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var W=Vn(a,d,v,O);return-1<W?(d=a[W],p||(d.fa=!1)):(d=new en(d,this.src,V,!!v,O),d.fa=p,a.push(d)),d};function Ln(a,d){var p=d.type;if(p in a.g){var v=a.g[p],O=Array.prototype.indexOf.call(v,d,void 0),V;(V=0<=O)&&Array.prototype.splice.call(v,O,1),V&&(Dn(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Vn(a,d,p,v){for(var O=0;O<a.length;++O){var V=a[O];if(!V.da&&V.listener==d&&V.capture==!!p&&V.ha==v)return O}return-1}var xe="closure_lm_"+(1e6*Math.random()|0),hn={};function ot(a,d,p,v,O){if(v&&v.once)return M(a,d,p,v,O);if(Array.isArray(d)){for(var V=0;V<d.length;V++)ot(a,d[V],p,v,O);return null}return p=Po(p),a&&a[st]?a.K(d,p,c(v)?!!v.capture:!!v,O):Mn(a,d,p,!1,v,O)}function Mn(a,d,p,v,O,V){if(!d)throw Error("Invalid event type");var W=c(O)?!!O.capture:!!O,be=rr(a);if(be||(a[xe]=be=new On(a)),p=be.add(d,p,v,W,V),p.proxy)return p;if(v=Ci(),p.proxy=v,v.src=a,v.listener=p,a.addEventListener)it||(O=W),O===void 0&&(O=!1),a.addEventListener(d.toString(),v,O);else if(a.attachEvent)a.attachEvent(tn(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ci(){function a(p){return d.call(a.src,a.listener,p)}const d=En;return a}function M(a,d,p,v,O){if(Array.isArray(d)){for(var V=0;V<d.length;V++)M(a,d[V],p,v,O);return null}return p=Po(p),a&&a[st]?a.L(d,p,c(v)?!!v.capture:!!v,O):Mn(a,d,p,!0,v,O)}function ee(a,d,p,v,O){if(Array.isArray(d))for(var V=0;V<d.length;V++)ee(a,d[V],p,v,O);else v=c(v)?!!v.capture:!!v,p=Po(p),a&&a[st]?(a=a.i,d=String(d).toString(),d in a.g&&(V=a.g[d],p=Vn(V,p,v,O),-1<p&&(Dn(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete a.g[d],a.h--)))):a&&(a=rr(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Vn(d,p,v,O)),(p=-1<a?d[a]:null)&&ye(p))}function ye(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[st])Ln(d.i,a);else{var p=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(p,v,a.capture):d.detachEvent?d.detachEvent(tn(p),v):d.addListener&&d.removeListener&&d.removeListener(v),(p=rr(d))?(Ln(p,a),p.h==0&&(p.src=null,d[xe]=null)):Dn(a)}}}function tn(a){return a in hn?hn[a]:hn[a]="on"+a}function En(a,d){if(a.da)a=!0;else{d=new Lt(d,this);var p=a.listener,v=a.ha||a.src;a.fa&&ye(a),a=p.call(v,d)}return a}function rr(a){return a=a[xe],a instanceof On?a:null}var Ro="__closure_events_fn_"+(1e9*Math.random()>>>0);function Po(a){return typeof a=="function"?a:(a[Ro]||(a[Ro]=function(d){return a.handleEvent(d)}),a[Ro])}function at(){ae.call(this),this.i=new On(this),this.M=this,this.F=null}T(at,ae),at.prototype[st]=!0,at.prototype.removeEventListener=function(a,d,p,v){ee(this,a,d,p,v)};function pt(a,d){var p,v=a.F;if(v)for(p=[];v;v=v.F)p.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new we(d,a);else if(d instanceof we)d.target=d.target||a;else{var O=d;d=new we(v,a),x(d,O)}if(O=!0,p)for(var V=p.length-1;0<=V;V--){var W=d.g=p[V];O=Pr(W,v,!0,d)&&O}if(W=d.g=a,O=Pr(W,v,!0,d)&&O,O=Pr(W,v,!1,d)&&O,p)for(V=0;V<p.length;V++)W=d.g=p[V],O=Pr(W,v,!1,d)&&O}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var p=a.g[d],v=0;v<p.length;v++)Dn(p[v]);delete a.g[d],a.h--}}this.F=null},at.prototype.K=function(a,d,p,v){return this.i.add(String(a),d,!1,p,v)},at.prototype.L=function(a,d,p,v){return this.i.add(String(a),d,!0,p,v)};function Pr(a,d,p,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var O=!0,V=0;V<d.length;++V){var W=d[V];if(W&&!W.da&&W.capture==p){var be=W.listener,mt=W.ha||W.src;W.fa&&Ln(a.i,W),O=be.call(mt,v)!==!1&&O}}return O&&!v.defaultPrevented}function Do(a,d,p){if(typeof a=="function")p&&(a=m(a,p));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Oo(a){a.g=Do(()=>{a.g=null,a.i&&(a.i=!1,Oo(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class th extends ae{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Oo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(a){ae.call(this),this.h=a,this.g={}}T(Un,ae);var Lo=[];function ql(a){j(a.g,function(d,p){this.g.hasOwnProperty(p)&&ye(d)},a),a.g={}}Un.prototype.N=function(){Un.aa.N.call(this),ql(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _s=l.JSON.stringify,Hl=l.JSON.parse,Vo=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Mo(){}Mo.prototype.h=null;function Uo(a){return a.h||(a.h=a.i())}function Gl(){}var Dr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lt(){we.call(this,"d")}T(lt,we);function ut(){we.call(this,"c")}T(ut,we);var fn={},Ae=null;function Vt(){return Ae=Ae||new at}fn.La="serverreachability";function Kl(a){we.call(this,fn.La,a)}T(Kl,we);function ir(a){const d=Vt();pt(d,new Kl(d))}fn.STAT_EVENT="statevent";function Fo(a,d){we.call(this,fn.STAT_EVENT,a),this.stat=d}T(Fo,we);function ct(a){const d=Vt();pt(d,new Fo(d,a))}fn.Ma="timingevent";function ws(a,d){we.call(this,fn.Ma,a),this.size=d}T(ws,we);function Fn(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function sr(){this.g=!0}sr.prototype.xa=function(){this.g=!1};function Bo(a,d,p,v,O,V){a.info(function(){if(a.g)if(V)for(var W="",be=V.split("&"),mt=0;mt<be.length;mt++){var me=be[mt].split("=");if(1<me.length){var It=me[0];me=me[1];var St=It.split("_");W=2<=St.length&&St[1]=="type"?W+(It+"="+me+"&"):W+(It+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+d+`
`+p+`
`+W})}function jo(a,d,p,v,O,V,W){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+d+`
`+p+`
`+V+" "+W})}function Or(a,d,p,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ql(a,p)+(v?" "+v:"")})}function $o(a,d){a.info(function(){return"TIMEOUT: "+d})}sr.prototype.info=function(){};function Ql(a,d){if(!a.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var v=p[a];if(!(2>v.length)){var O=v[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<O.length;W++)O[W]=""}}}}return _s(p)}catch{return d}}var Es={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ie;function Se(){}T(Se,Mo),Se.prototype.g=function(){return new XMLHttpRequest},Se.prototype.i=function(){return{}},ie=new Se;function Ee(a,d,p,v){this.j=a,this.i=d,this.l=p,this.R=v||1,this.U=new Un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ht}function Ht(){this.i=null,this.g="",this.h=!1}var Gt={},Ni={};function zo(a,d,p){a.L=1,a.v=tu(or(d)),a.m=p,a.P=!0,Xl(a,null)}function Xl(a,d){a.F=Date.now(),Jl(a),a.A=or(a.v);var p=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),dy(p.i,"t",v),a.C=0,p=a.j.J,a.h=new Ht,a.g=Cy(a.j,p?d:null,!a.m),0<a.O&&(a.M=new th(m(a.Y,a,a.g),a.O)),d=a.U,p=a.g,v=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(Lo[0]=O.toString()),O=Lo);for(var V=0;V<O.length;V++){var W=ot(p,O[V],v||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),ir(),Bo(a.i,a.u,a.A,a.l,a.R,a.m)}Ee.prototype.ca=function(a){a=a.target;const d=this.M;d&&ar(a)==3?d.j():this.Y(a)},Ee.prototype.Y=function(a){try{if(a==this.g)e:{const St=ar(this.g);var d=this.g.Ba();const Is=this.g.Z();if(!(3>St)&&(St!=3||this.g&&(this.h.h||this.g.oa()||vy(this.g)))){this.J||St!=4||d==7||(d==8||0>=Is?ir(3):ir(2)),nh(this);var p=this.g.Z();this.X=p;t:if(Jg(this)){var v=vy(this.g);a="";var O=v.length,V=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ri(this),Wo(this);var W="";break t}this.h.i=new l.TextDecoder}for(d=0;d<O;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(V&&d==O-1)});v.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,jo(this.i,this.u,this.A,this.l,this.R,St,p),this.o){if(this.T&&!this.K){t:{if(this.g){var be,mt=this.g;if((be=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(be)){var me=be;break t}}me=null}if(p=me)Or(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rh(this,p);else{this.o=!1,this.s=3,ct(12),Ri(this),Wo(this);break e}}if(this.P){p=!0;let Tn;for(;!this.J&&this.C<W.length;)if(Tn=FI(this,W),Tn==Ni){St==4&&(this.s=4,ct(14),p=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==Gt){this.s=4,ct(15),Or(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else Or(this.i,this.l,Tn,null),rh(this,Tn);if(Jg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),St!=4||W.length!=0||this.h.h||(this.s=1,ct(16),p=!1),this.o=this.o&&p,!p)Or(this.i,this.l,W,"[Invalid Chunked Response]"),Ri(this),Wo(this);else if(0<W.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),uh(It),It.M=!0,ct(11))}}else Or(this.i,this.l,W,null),rh(this,W);St==4&&Ri(this),this.o&&!this.J&&(St==4?Sy(this.j,this):(this.o=!1,Jl(this)))}else nS(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Ri(this),Wo(this)}}}catch{}finally{}};function Jg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function FI(a,d){var p=a.C,v=d.indexOf(`
`,p);return v==-1?Ni:(p=Number(d.substring(p,v)),isNaN(p)?Gt:(v+=1,v+p>d.length?Ni:(d=d.slice(v,v+p),a.C=v+p,d)))}Ee.prototype.cancel=function(){this.J=!0,Ri(this)};function Jl(a){a.S=Date.now()+a.I,Zg(a,a.I)}function Zg(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Fn(m(a.ba,a),d)}function nh(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Ee.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?($o(this.i,this.A),this.L!=2&&(ir(),ct(17)),Ri(this),this.s=2,Wo(this)):Zg(this,this.S-a)};function Wo(a){a.j.G==0||a.J||Sy(a.j,a)}function Ri(a){nh(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,ql(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function rh(a,d){try{var p=a.j;if(p.G!=0&&(p.g==a||ih(p.h,a))){if(!a.K&&ih(p.h,a)&&p.G==3){try{var v=p.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)au(p),su(p);else break e;lh(p),ct(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=Fn(m(p.Za,p),6e3));if(1>=ny(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Di(p,11)}else if((a.K||p.g==a)&&au(p),!w(d))for(O=p.Da.g.parse(d),d=0;d<O.length;d++){let me=O[d];if(p.T=me[0],me=me[1],p.G==2)if(me[0]=="c"){p.K=me[1],p.ia=me[2];const It=me[3];It!=null&&(p.la=It,p.j.info("VER="+p.la));const St=me[4];St!=null&&(p.Aa=St,p.j.info("SVER="+p.Aa));const Is=me[5];Is!=null&&typeof Is=="number"&&0<Is&&(v=1.5*Is,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const Tn=a.g;if(Tn){const uu=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uu){var V=v.h;V.g||uu.indexOf("spdy")==-1&&uu.indexOf("quic")==-1&&uu.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(sh(V,V.h),V.h=null))}if(v.D){const ch=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;ch&&(v.ya=ch,Ne(v.I,v.D,ch))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var W=a;if(v.qa=Ay(v,v.J?v.ia:null,v.W),W.K){ry(v.h,W);var be=W,mt=v.L;mt&&(be.I=mt),be.B&&(nh(be),Jl(be)),v.g=W}else ky(v);0<p.i.length&&ou(p)}else me[0]!="stop"&&me[0]!="close"||Di(p,7);else p.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Di(p,7):ah(p):me[0]!="noop"&&p.l&&p.l.ta(me),p.v=0)}}ir(4)}catch{}}var BI=class{constructor(a,d){this.g=a,this.map=d}};function ey(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ty(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ny(a){return a.h?1:a.g?a.g.size:0}function ih(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function sh(a,d){a.g?a.g.add(d):a.h=d}function ry(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}ey.prototype.cancel=function(){if(this.i=iy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function iy(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const p of a.g.values())d=d.concat(p.D);return d}return I(a.i)}function jI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],p=a.length,v=0;v<p;v++)d.push(a[v]);return d}d=[],p=0;for(v in a)d[p++]=a[v];return d}function $I(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var p=0;p<a;p++)d.push(p);return d}d=[],p=0;for(const v in a)d[p++]=v;return d}}}function sy(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var p=$I(a),v=jI(a),O=v.length,V=0;V<O;V++)d.call(void 0,v[V],p&&p[V],a)}var oy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zI(a,d){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var v=a[p].indexOf("="),O=null;if(0<=v){var V=a[p].substring(0,v);O=a[p].substring(v+1)}else V=a[p];d(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Pi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Pi){this.h=a.h,Zl(this,a.j),this.o=a.o,this.g=a.g,eu(this,a.s),this.l=a.l;var d=a.i,p=new Go;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),ay(this,p),this.m=a.m}else a&&(d=String(a).match(oy))?(this.h=!1,Zl(this,d[1]||"",!0),this.o=qo(d[2]||""),this.g=qo(d[3]||"",!0),eu(this,d[4]),this.l=qo(d[5]||"",!0),ay(this,d[6]||"",!0),this.m=qo(d[7]||"")):(this.h=!1,this.i=new Go(null,this.h))}Pi.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Ho(d,ly,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ho(d,ly,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Ho(p,p.charAt(0)=="/"?HI:qI,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Ho(p,KI)),a.join("")};function or(a){return new Pi(a)}function Zl(a,d,p){a.j=p?qo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function eu(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function ay(a,d,p){d instanceof Go?(a.i=d,QI(a.i,a.h)):(p||(d=Ho(d,GI)),a.i=new Go(d,a.h))}function Ne(a,d,p){a.i.set(d,p)}function tu(a){return Ne(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function qo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ho(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,WI),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function WI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ly=/[#\/\?@]/g,qI=/[#\?:]/g,HI=/[#\?]/g,GI=/[#\?@]/g,KI=/#/g;function Go(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Lr(a){a.g||(a.g=new Map,a.h=0,a.i&&zI(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=Go.prototype,t.add=function(a,d){Lr(this),this.i=null,a=Ts(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function uy(a,d){Lr(a),d=Ts(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function cy(a,d){return Lr(a),d=Ts(a,d),a.g.has(d)}t.forEach=function(a,d){Lr(this),this.g.forEach(function(p,v){p.forEach(function(O){a.call(d,O,v,this)},this)},this)},t.na=function(){Lr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let v=0;v<d.length;v++){const O=a[v];for(let V=0;V<O.length;V++)p.push(d[v])}return p},t.V=function(a){Lr(this);let d=[];if(typeof a=="string")cy(this,a)&&(d=d.concat(this.g.get(Ts(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)d=d.concat(a[p])}return d},t.set=function(a,d){return Lr(this),this.i=null,a=Ts(this,a),cy(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function dy(a,d,p){uy(a,d),0<p.length&&(a.i=null,a.g.set(Ts(a,d),I(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var v=d[p];const V=encodeURIComponent(String(v)),W=this.V(v);for(v=0;v<W.length;v++){var O=V;W[v]!==""&&(O+="="+encodeURIComponent(String(W[v]))),a.push(O)}}return this.i=a.join("&")};function Ts(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function QI(a,d){d&&!a.j&&(Lr(a),a.i=null,a.g.forEach(function(p,v){var O=v.toLowerCase();v!=O&&(uy(this,v),dy(this,O,p))},a)),a.j=d}function YI(a,d){const p=new sr;if(l.Image){const v=new Image;v.onload=y(Vr,p,"TestLoadImage: loaded",!0,d,v),v.onerror=y(Vr,p,"TestLoadImage: error",!1,d,v),v.onabort=y(Vr,p,"TestLoadImage: abort",!1,d,v),v.ontimeout=y(Vr,p,"TestLoadImage: timeout",!1,d,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function XI(a,d){const p=new sr,v=new AbortController,O=setTimeout(()=>{v.abort(),Vr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(V=>{clearTimeout(O),V.ok?Vr(p,"TestPingServer: ok",!0,d):Vr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(O),Vr(p,"TestPingServer: error",!1,d)})}function Vr(a,d,p,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(p)}catch{}}function JI(){this.g=new Vo}function ZI(a,d,p){const v=p||"";try{sy(a,function(O,V){let W=O;c(O)&&(W=_s(O)),d.push(v+V+"="+encodeURIComponent(W))})}catch(O){throw d.push(v+"type="+encodeURIComponent("_badmap")),O}}function nu(a){this.l=a.Ub||null,this.j=a.eb||!1}T(nu,Mo),nu.prototype.g=function(){return new ru(this.l,this.j)},nu.prototype.i=function(a){return function(){return a}}({});function ru(a,d){at.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(ru,at),t=ru.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Qo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Qo(this)),this.g&&(this.readyState=3,Qo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hy(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function hy(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ko(this):Qo(this),this.readyState==3&&hy(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ko(this))},t.Qa=function(a){this.g&&(this.response=a,Ko(this))},t.ga=function(){this.g&&Ko(this)};function Ko(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Qo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function Qo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ru.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function fy(a){let d="";return j(a,function(p,v){d+=v,d+=":",d+=p,d+=`\r
`}),d}function oh(a,d,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=fy(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):Ne(a,d,p))}function $e(a){at.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T($e,at);var eS=/^https?$/i,tS=["POST","PUT"];t=$e.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ie.g(),this.v=this.o?Uo(this.o):Uo(ie),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(V){py(this,V);return}if(a=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)p.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())p.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),O=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(tS,d,void 0))||v||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of p)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yy(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){py(this,V)}};function py(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,my(a),iu(a)}function my(a){a.A||(a.A=!0,pt(a,"complete"),pt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,pt(this,"complete"),pt(this,"abort"),iu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),iu(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gy(this):this.bb())},t.bb=function(){gy(this)};function gy(a){if(a.h&&typeof o<"u"&&(!a.v[1]||ar(a)!=4||a.Z()!=2)){if(a.u&&ar(a)==4)Do(a.Ea,0,a);else if(pt(a,"readystatechange"),ar(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var v;if(v=W===0){var O=String(a.D).match(oy)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),v=!eS.test(O?O.toLowerCase():"")}p=v}if(p)pt(a,"complete"),pt(a,"success");else{a.m=6;try{var V=2<ar(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",my(a)}}finally{iu(a)}}}}function iu(a,d){if(a.g){yy(a);const p=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||pt(a,"ready");try{p.onreadystatechange=v}catch{}}}function yy(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function ar(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Hl(d)}};function vy(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function nS(a){const d={};a=(a.g&&2<=ar(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(w(a[v]))continue;var p=R(a[v]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=d[O]||[];d[O]=V,V.push(p)}S(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yo(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function _y(a){this.Aa=0,this.i=[],this.j=new sr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yo("baseRetryDelayMs",5e3,a),this.cb=Yo("retryDelaySeedMs",1e4,a),this.Wa=Yo("forwardChannelMaxRetries",2,a),this.wa=Yo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ey(a&&a.concurrentRequestLimit),this.Da=new JI,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_y.prototype,t.la=8,t.G=1,t.connect=function(a,d,p,v){ct(0),this.W=a,this.H=d||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=Ay(this,null,this.W),ou(this)};function ah(a){if(wy(a),a.G==3){var d=a.U++,p=or(a.I);if(Ne(p,"SID",a.K),Ne(p,"RID",d),Ne(p,"TYPE","terminate"),Xo(a,p),d=new Ee(a,a.j,d),d.L=2,d.v=tu(or(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=d.v,p=!0),p||(d.g=Cy(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Jl(d)}xy(a)}function su(a){a.g&&(uh(a),a.g.cancel(),a.g=null)}function wy(a){su(a),a.u&&(l.clearTimeout(a.u),a.u=null),au(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ou(a){if(!ty(a.h)&&!a.s){a.s=!0;var d=a.Ga;Ot||Q(),q||(Ot(),q=!0),X.add(d,a),a.B=0}}function rS(a,d){return ny(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Fn(m(a.Ga,a,d),by(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new Ee(this,this.j,a);let V=this.o;if(this.S&&(V?(V=_(V),x(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Ty(this,O,d),p=or(this.I),Ne(p,"RID",a),Ne(p,"CVER",22),this.D&&Ne(p,"X-HTTP-Session-Id",this.D),Xo(this,p),V&&(this.O?d="headers="+encodeURIComponent(String(fy(V)))+"&"+d:this.m&&oh(p,this.m,V)),sh(this.h,O),this.Ua&&Ne(p,"TYPE","init"),this.P?(Ne(p,"$req",d),Ne(p,"SID","null"),O.T=!0,zo(O,p,null)):zo(O,p,d),this.G=2}}else this.G==3&&(a?Ey(this,a):this.i.length==0||ty(this.h)||Ey(this))};function Ey(a,d){var p;d?p=d.l:p=a.U++;const v=or(a.I);Ne(v,"SID",a.K),Ne(v,"RID",p),Ne(v,"AID",a.T),Xo(a,v),a.m&&a.o&&oh(v,a.m,a.o),p=new Ee(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Ty(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),sh(a.h,p),zo(p,v,d)}function Xo(a,d){a.H&&j(a.H,function(p,v){Ne(d,v,p)}),a.l&&sy({},function(p,v){Ne(d,v,p)})}function Ty(a,d,p){p=Math.min(a.i.length,p);var v=a.l?m(a.l.Na,a.l,a):null;e:{var O=a.i;let V=-1;for(;;){const W=["count="+p];V==-1?0<p?(V=O[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let be=!0;for(let mt=0;mt<p;mt++){let me=O[mt].g;const It=O[mt].map;if(me-=V,0>me)V=Math.max(0,O[mt].g-100),be=!1;else try{ZI(It,W,"req"+me+"_")}catch{v&&v(It)}}if(be){v=W.join("&");break e}}}return a=a.i.splice(0,p),d.D=a,v}function ky(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Ot||Q(),q||(Ot(),q=!0),X.add(d,a),a.v=0}}function lh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Fn(m(a.Fa,a),by(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Iy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Fn(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),su(this),Iy(this))};function uh(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Iy(a){a.g=new Ee(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=or(a.qa);Ne(d,"RID","rpc"),Ne(d,"SID",a.K),Ne(d,"AID",a.T),Ne(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Ne(d,"TO",a.ja),Ne(d,"TYPE","xmlhttp"),Xo(a,d),a.m&&a.o&&oh(d,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=tu(or(d)),p.m=null,p.P=!0,Xl(p,a)}t.Za=function(){this.C!=null&&(this.C=null,su(this),lh(this),ct(19))};function au(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Sy(a,d){var p=null;if(a.g==d){au(a),uh(a),a.g=null;var v=2}else if(ih(a.h,d))p=d.D,ry(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var O=a.B;v=Vt(),pt(v,new ws(v,p)),ou(a)}else ky(a);else if(O=d.s,O==3||O==0&&0<d.X||!(v==1&&rS(a,d)||v==2&&lh(a)))switch(p&&0<p.length&&(d=a.h,d.i=d.i.concat(p)),O){case 1:Di(a,5);break;case 4:Di(a,10);break;case 3:Di(a,6);break;default:Di(a,2)}}}function by(a,d){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*d}function Di(a,d){if(a.j.info("Error code "+d),d==2){var p=m(a.fb,a),v=a.Xa;const O=!v;v=new Pi(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Zl(v,"https"),tu(v),O?YI(v.toString(),p):XI(v.toString(),p)}else ct(2);a.G=0,a.l&&a.l.sa(d),xy(a),wy(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function xy(a){if(a.G=0,a.ka=[],a.l){const d=iy(a.h);(d.length!=0||a.i.length!=0)&&(N(a.ka,d),N(a.ka,a.i),a.h.i.length=0,I(a.i),a.i.length=0),a.l.ra()}}function Ay(a,d,p){var v=p instanceof Pi?or(p):new Pi(p);if(v.g!="")d&&(v.g=d+"."+v.g),eu(v,v.s);else{var O=l.location;v=O.protocol,d=d?d+"."+O.hostname:O.hostname,O=+O.port;var V=new Pi(null);v&&Zl(V,v),d&&(V.g=d),O&&eu(V,O),p&&(V.l=p),v=V}return p=a.D,d=a.ya,p&&d&&Ne(v,p,d),Ne(v,"VER",a.la),Xo(a,v),v}function Cy(a,d,p){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new $e(new nu({eb:p})):new $e(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ny(){}t=Ny.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function lu(){}lu.prototype.g=function(a,d){return new nn(a,d)};function nn(a,d){at.call(this),this.g=new _y(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ks(this)}T(nn,at),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){ah(this.g)},nn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=_s(a),a=p);d.i.push(new BI(d.Ya++,a)),d.G==3&&ou(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,ah(this.g),delete this.g,nn.aa.N.call(this)};function Ry(a){lt.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}T(Ry,lt);function Py(){ut.call(this),this.status=1}T(Py,ut);function ks(a){this.g=a}T(ks,Ny),ks.prototype.ua=function(){pt(this.g,"a")},ks.prototype.ta=function(a){pt(this.g,new Ry(a))},ks.prototype.sa=function(a){pt(this.g,new Py)},ks.prototype.ra=function(){pt(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,_T=function(){return new lu},vT=function(){return Vt()},yT=fn,hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,nc=Es,Yl.COMPLETE="complete",gT=Yl,Gl.EventType=Dr,Dr.OPEN="a",Dr.CLOSE="b",Dr.ERROR="c",Dr.MESSAGE="d",at.prototype.listen=at.prototype.K,_a=Gl,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,mT=$e}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});const R0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new jm("@firebase/firestore");function oa(){return rs.logLevel}function K(t,...e){if(rs.logLevel<=ue.DEBUG){const n=e.map(Zm);rs.debug(`Firestore (${So}): ${t}`,...n)}}function xr(t,...e){if(rs.logLevel<=ue.ERROR){const n=e.map(Zm);rs.error(`Firestore (${So}): ${t}`,...n)}}function ho(t,...e){if(rs.logLevel<=ue.WARN){const n=e.map(Zm);rs.warn(`Firestore (${So}): ${t}`,...n)}}function Zm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: `+t;throw xr(e),new Error(e)}function Ie(t,e){t||te()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ct.UNAUTHENTICATED))}shutdown(){}}class U2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class F2{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _r,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _r)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new wT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Ct(e)}}class B2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class j2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new B2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new $2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=W2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function fo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new rt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new rt(0,0))}static max(){return new ne(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return al.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof al?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends al{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const q2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vt extends al{construct(e,n,r){return new vt(e,n,r)}static isValidIdentifier(e){return q2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new H(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new H(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vt(n)}static emptyPath(){return new vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(Pe.fromString(e))}static fromName(e){return new J(Pe.fromString(e).popFirst(5))}static empty(){return new J(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new Pe(e.slice()))}}function H2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new gi(i,J.empty(),e)}function G2(t){return new gi(t.readTime,t.key,-1)}class gi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gi(ne.min(),J.empty(),-1)}static max(){return new gi(ne.max(),J.empty(),-1)}}function K2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==Q2)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function X2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ll(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}eg.oe=-1;function Cd(t){return t==null}function zc(t){return t===0&&1/t==-1/0}function J2(t){return typeof t=="number"&&Number.isInteger(t)&&!zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.comparator=e,this.root=n||yt.EMPTY}insert(e,n){return new Be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yt.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ru(this.root,e,this.comparator,!0)}}class Ru{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??yt.RED,this.left=i??yt.EMPTY,this.right=s??yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new yt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return yt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}yt.EMPTY=null,yt.RED=!0,yt.BLACK=!1;yt.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new D0(this.data.getIterator())}getIteratorFrom(e){return new D0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class D0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new on([])}unionWith(e){let n=new wt(vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new kT("Invalid base64 string: "+s):s}}(e);return new Tt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const Z2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=Z2.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function is(t){return typeof t=="string"?Tt.fromBase64String(t):Tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ng(t){const e=t.mapValue.fields.__previous_value__;return tg(e)?ng(e):e}function ll(t){const e=yi(t.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class ul{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ul("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tg(t)?4:nD(t)?9007199254740991:tD(t)?10:11:te()}function er(t,e){if(t===e)return!0;const n=ss(t);if(n!==ss(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ll(t).isEqual(ll(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=yi(i.timestampValue),l=yi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return is(i.bytesValue).isEqual(is(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),l=Ke(s.doubleValue);return o===l?zc(o)===zc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return fo(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(P0(o)!==P0(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!er(o[u],l[u])))return!1;return!0}(t,e);default:return te()}}function cl(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function po(t,e){if(t===e)return 0;const n=ss(t),r=ss(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ke(s.integerValue||s.doubleValue),u=Ke(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return O0(t.timestampValue,e.timestampValue);case 4:return O0(ll(t),ll(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const l=is(s),u=is(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=ge(l[c],u[c]);if(h!==0)return h}return ge(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ge(Ke(s.latitude),Ke(o.latitude));return l!==0?l:ge(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return L0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,h;const f=s.fields||{},m=o.fields||{},y=(l=f.value)===null||l===void 0?void 0:l.arrayValue,T=(u=m.value)===null||u===void 0?void 0:u.arrayValue,I=ge(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return I!==0?I:L0(y,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Pu.mapValue&&o===Pu.mapValue)return 0;if(s===Pu.mapValue)return 1;if(o===Pu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const m=ge(u[f],h[f]);if(m!==0)return m;const y=po(l[u[f]],c[h[f]]);if(y!==0)return y}return ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw te()}}function O0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=yi(t),r=yi(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function L0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=po(n[i],r[i]);if(s)return s}return ge(n.length,r.length)}function mo(t){return fp(t)}function fp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return is(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=fp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${fp(n.fields[o])}`;return i+"}"}(t.mapValue):te()}function V0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pp(t){return!!t&&"integerValue"in t}function rg(t){return!!t&&"arrayValue"in t}function M0(t){return!!t&&"nullValue"in t}function U0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rc(t){return!!t&&"mapValue"in t}function tD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function La(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=La(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=La(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=La(n)}setAll(e){let n=vt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=La(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];rc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){fs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Qt(La(this.value))}}function IT(t){const e=[];return fs(t.fields,(n,r)=>{const i=new vt([n]);if(rc(r)){const s=IT(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Rt(e,0,ne.min(),ne.min(),ne.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,ne.min(),ne.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,ne.min(),ne.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.position=e,this.inclusive=n}}function F0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=po(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function B0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n="asc"){this.field=e,this.dir=n}}function rD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{}class et extends ST{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sD(e,n,r):n==="array-contains"?new lD(e,r):n==="in"?new uD(e,r):n==="not-in"?new cD(e,r):n==="array-contains-any"?new dD(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new oD(e,r):new aD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(po(n,this.value)):n!==null&&ss(this.value)===ss(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rn extends ST{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Rn(e,n)}matches(e){return bT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bT(t){return t.op==="and"}function xT(t){return iD(t)&&bT(t)}function iD(t){for(const e of t.filters)if(e instanceof Rn)return!1;return!0}function mp(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+mo(t.value);if(xT(t))return t.filters.map(e=>mp(e)).join(",");{const e=t.filters.map(n=>mp(n)).join(",");return`${t.op}(${e})`}}function AT(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&er(r.value,i.value)}(t,e):t instanceof Rn?function(r,i){return i instanceof Rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&AT(o,i.filters[l]),!0):!1}(t,e):void te()}function CT(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${mo(n.value)}`}(t):t instanceof Rn?function(n){return n.op.toString()+" {"+n.getFilters().map(CT).join(" ,")+"}"}(t):"Filter"}class sD extends et{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class oD extends et{constructor(e,n){super(e,"in",n),this.keys=NT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aD extends et{constructor(e,n){super(e,"not-in",n),this.keys=NT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function NT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class lD extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rg(n)&&cl(n.arrayValue,this.value)}}class uD extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cl(this.value.arrayValue,n)}}class cD extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cl(this.value.arrayValue,n)}}class dD extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function j0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new hD(t,e,n,r,i,s,o)}function ig(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Cd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>mo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>mo(r)).join(",")),e.ue=n}return e.ue}function sg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!AT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B0(t.startAt,e.startAt)&&B0(t.endAt,e.endAt)}function gp(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fD(t,e,n,r,i,s,o,l){return new bo(t,e,n,r,i,s,o,l)}function og(t){return new bo(t)}function $0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RT(t){return t.collectionGroup!==null}function Va(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new wt(vt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new dl(s,r))}),n.has(vt.keyField().canonicalString())||e.ce.push(new dl(vt.keyField(),r))}return e.ce}function Jn(t){const e=re(t);return e.le||(e.le=pD(e,Va(t))),e.le}function pD(t,e){if(t.limitType==="F")return j0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new dl(i.field,s)});const n=t.endAt?new Wc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wc(t.startAt.position,t.startAt.inclusive):null;return j0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yp(t,e){const n=t.filters.concat([e]);return new bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vp(t,e,n){return new bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nd(t,e){return sg(Jn(t),Jn(e))&&t.limitType===e.limitType}function PT(t){return`${ig(Jn(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>CT(i)).join(", ")}]`),Cd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>mo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>mo(i)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function Rd(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Va(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=F0(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,Va(r),i)||r.endAt&&!function(o,l,u){const c=F0(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,Va(r),i))}(t,e)}function mD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DT(t){return(e,n)=>{let r=!1;for(const i of Va(t)){const s=gD(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gD(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?po(u,c):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return TT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new Be(J.comparator);function Ar(){return yD}const OT=new Be(J.comparator);function wa(...t){let e=OT;for(const n of t)e=e.insert(n.key,n);return e}function LT(t){let e=OT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $i(){return Ma()}function VT(){return Ma()}function Ma(){return new xo(t=>t.toString(),(t,e)=>t.isEqual(e))}const vD=new Be(J.comparator),_D=new wt(J.comparator);function le(...t){let e=_D;for(const n of t)e=e.add(n);return e}const wD=new wt(ge);function ED(){return wD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function MT(t){return{integerValue:""+t}}function TD(t,e){return J2(e)?MT(e):ag(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(){this._=void 0}}function kD(t,e,n){return t instanceof qc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tg(s)&&(s=ng(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof hl?FT(t,e):t instanceof fl?BT(t,e):function(i,s){const o=UT(i,s),l=z0(o)+z0(i.Pe);return pp(o)&&pp(i.Pe)?MT(l):ag(i.serializer,l)}(t,e)}function ID(t,e,n){return t instanceof hl?FT(t,e):t instanceof fl?BT(t,e):n}function UT(t,e){return t instanceof Hc?function(r){return pp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class qc extends Pd{}class hl extends Pd{constructor(e){super(),this.elements=e}}function FT(t,e){const n=jT(e);for(const r of t.elements)n.some(i=>er(i,r))||n.push(r);return{arrayValue:{values:n}}}class fl extends Pd{constructor(e){super(),this.elements=e}}function BT(t,e){let n=jT(e);for(const r of t.elements)n=n.filter(i=>!er(i,r));return{arrayValue:{values:n}}}class Hc extends Pd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function z0(t){return Ke(t.integerValue||t.doubleValue)}function jT(t){return rg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function SD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hl&&i instanceof hl||r instanceof fl&&i instanceof fl?fo(r.elements,i.elements,er):r instanceof Hc&&i instanceof Hc?er(r.Pe,i.Pe):r instanceof qc&&i instanceof qc}(t.transform,e.transform)}class bD{constructor(e,n){this.version=e,this.transformResults=n}}class vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ic(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dd{}function $T(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lg(t.key,vn.none()):new Vl(t.key,t.data,vn.none());{const n=t.data,r=Qt.empty();let i=new wt(vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new bi(t.key,r,new on(i.toArray()),vn.none())}}function xD(t,e,n){t instanceof Vl?function(i,s,o){const l=i.value.clone(),u=q0(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof bi?function(i,s,o){if(!ic(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=q0(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(zT(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ua(t,e,n,r){return t instanceof Vl?function(s,o,l,u){if(!ic(s.precondition,o))return l;const c=s.value.clone(),h=H0(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof bi?function(s,o,l,u){if(!ic(s.precondition,o))return l;const c=H0(s.fieldTransforms,u,o),h=o.data;return h.setAll(zT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,l){return ic(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function AD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=UT(r.transform,i||null);s!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,s))}return n||null}function W0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fo(r,i,(s,o)=>SD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Vl extends Dd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class bi extends Dd{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function q0(t,e,n){const r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,ID(o,l,n[i]))}return r}function H0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,kD(s,o,e))}return r}class lg extends Dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CD extends Dd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&xD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ua(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ua(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=VT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=$T(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,(n,r)=>W0(n,r))&&fo(this.baseMutations,e.baseMutations,(n,r)=>W0(n,r))}}class ug{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=function(){return vD}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ug(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,de;function DD(t){switch(t){default:return te();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function WT(t){if(t===void 0)return xr("GRPC error has no .code"),B.UNKNOWN;switch(t){case Je.OK:return B.OK;case Je.CANCELLED:return B.CANCELLED;case Je.UNKNOWN:return B.UNKNOWN;case Je.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Je.INTERNAL:return B.INTERNAL;case Je.UNAVAILABLE:return B.UNAVAILABLE;case Je.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Je.NOT_FOUND:return B.NOT_FOUND;case Je.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Je.ABORTED:return B.ABORTED;case Je.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Je.DATA_LOSS:return B.DATA_LOSS;default:return te()}}(de=Je||(Je={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new Hi([4294967295,4294967295],0);function G0(t){const e=OD().encode(t),n=new pT;return n.update(e),new Uint8Array(n.digest())}function K0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Hi([n,r],0),new Hi([i,s],0)]}class cg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ea(`Invalid padding: ${n}`);if(r<0)throw new Ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ea(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Hi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Hi.fromNumber(r)));return i.compare(LD)===1&&(i=new Hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=G0(e),[r,i]=K0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new cg(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=G0(e),[r,i]=K0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Od(ne.min(),i,new Be(ge),Ar(),le())}}class Ml{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ml(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class qT{constructor(e,n){this.targetId=e,this.me=n}}class HT{constructor(e,n,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Q0{constructor(){this.fe=0,this.ge=X0(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new Ml(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=X0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VD{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ar(),this.qe=Y0(),this.Qe=new Be(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(gp(s))if(r===0){const o=new J(s.path);this.Ue(n,o,Rt.newNoDocument(o,ne.min()))}else Ie(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=is(r).toUint8Array()}catch(u){if(u instanceof kT)return ho("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new cg(o,i,s)}catch(u){return ho(u instanceof Ea?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&gp(l.target)){const u=new J(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Rt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=le();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Od(e,n,this.Qe,this.ke,r);return this.ke=Ar(),this.qe=Y0(),this.Qe=new Be(ge),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Q0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new wt(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Q0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Y0(){return new Be(J.comparator)}function X0(){return new Be(J.comparator)}const MD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),UD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),FD=(()=>({and:"AND",or:"OR"}))();class BD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _p(t,e){return t.useProto3Json||Cd(e)?e:{value:e}}function Gc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jD(t,e){return Gc(t,e.toTimestamp())}function Zn(t){return Ie(!!t),ne.fromTimestamp(function(n){const r=yi(n);return new rt(r.seconds,r.nanos)}(t))}function dg(t,e){return wp(t,e).canonicalString()}function wp(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KT(t){const e=Pe.fromString(t);return Ie(ZT(e)),e}function Ep(t,e){return dg(t.databaseId,e.path)}function qh(t,e){const n=KT(e);if(n.get(1)!==t.databaseId.projectId)throw new H(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(YT(n))}function QT(t,e){return dg(t.databaseId,e)}function $D(t){const e=KT(t);return e.length===4?Pe.emptyPath():YT(e)}function Tp(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YT(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function J0(t,e,n){return{name:Ep(t,e),fields:n.value.mapValue.fields}}function zD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ie(h===void 0||typeof h=="string"),Tt.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Tt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?B.UNKNOWN:WT(c.code);return new H(h,c.message||"")}(o);n=new HT(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=qh(t,r.document.name),s=Zn(r.document.updateTime),o=r.document.createTime?Zn(r.document.createTime):ne.min(),l=new Qt({mapValue:{fields:r.document.fields}}),u=Rt.newFoundDocument(i,s,o,l),c=r.targetIds||[],h=r.removedTargetIds||[];n=new sc(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=qh(t,r.document),s=r.readTime?Zn(r.readTime):ne.min(),o=Rt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new sc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=qh(t,r.document),s=r.removedTargetIds||[];n=new sc([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new PD(i,s),l=r.targetId;n=new qT(l,o)}}return n}function WD(t,e){let n;if(e instanceof Vl)n={update:J0(t,e.key,e.value)};else if(e instanceof lg)n={delete:Ep(t,e.key)};else if(e instanceof bi)n={update:J0(t,e.key,e.data),updateMask:ZD(e.fieldMask)};else{if(!(e instanceof CD))return te();n={verify:Ep(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof qc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof hl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Hc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:jD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function qD(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Zn(i.updateTime):Zn(s);return o.isEqual(ne.min())&&(o=Zn(s)),new bD(o,i.transformResults||[])}(n,e))):[]}function HD(t,e){return{documents:[QT(t,e.path)]}}function GD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QT(t,i);const s=function(c){if(c.length!==0)return JT(Rn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:As(m.field),direction:YD(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=_p(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function KD(t){let e=$D(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ie(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const m=XT(f);return m instanceof Rn&&xT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(T){return new dl(Cs(T.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Cd(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,y=f.values||[];return new Wc(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new Wc(y,m)}(n.endAt)),fD(e,i,o,s,l,"F",u,c)}function QD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cs(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Cs(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Cs(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Cs(n.unaryFilter.field);return et.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return et.create(Cs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rn.create(n.compositeFilter.filters.map(r=>XT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function YD(t){return MD[t]}function XD(t){return UD[t]}function JD(t){return FD[t]}function As(t){return{fieldPath:t.canonicalString()}}function Cs(t){return vt.fromServerFormat(t.fieldPath)}function JT(t){return t instanceof et?function(n){if(n.op==="=="){if(U0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NAN"}};if(M0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(U0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NAN"}};if(M0(n.value))return{unaryFilter:{field:As(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(n.field),op:XD(n.op),value:n.value}}}(t):t instanceof Rn?function(n){const r=n.getFilters().map(i=>JT(i));return r.length===1?r[0]:{compositeFilter:{op:JD(n.op),filters:r}}}(t):te()}function ZD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n,r,i,s=ne.min(),o=ne.min(),l=Tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.ct=e}}function tO(t){const e=KD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.un=new rO}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(gi.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class rO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new wt(Pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new go(0)}static kn(){return new go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.changes=new xo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ua(r.mutation,i,on.empty(),rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=$i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=wa();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Ar();const o=Ma(),l=function(){return Ma()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof bi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ua(h.mutation,c,h.mutation.getFieldMask(),rt.now())):o.set(c.key,on.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return l.set(c,new sO(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ma();let i=new Be((o,l)=>o-l),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||on.empty();h=l.applyToLocalView(c,h),r.set(u,h);const f=(i.get(l.batchId)||le()).add(u);i=i.insert(l.batchId,f)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,f=VT();h.forEach(m=>{if(!s.has(m)){const y=$T(n.get(m),r.get(m));y!==null&&f.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve($i());let l=-1,u=s;return o.next(c=>$.forEach(c,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,le())).next(h=>({batchId:l,changes:LT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=wa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=wa();return this.indexManager.getCollectionParents(e,s).next(l=>$.forEach(l,u=>{const c=function(f,m){return new bo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Rt.newInvalidDocument(h)))});let l=wa();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Ua(h.mutation,c,on.empty(),rt.now()),Rd(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Zn(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:tO(i.bundledQuery),readTime:Zn(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this.overlays=new Be(J.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$i();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=$i(),s=n.length+1,o=new J(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Be((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=$i(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=$i(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=i)););return $.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new RD(n,r));let s=this.Ir.get(n);s===void 0&&(s=le(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.Tr=new wt(dt.Er),this.dr=new wt(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new Pe([])),r=new dt(n,e),i=new dt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new Pe([])),r=new dt(n,e),i=new dt(n,e+1);let s=le();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new wt(dt.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ND(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new dt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),i=new dt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new wt(ge);return n.forEach(i=>{const s=new dt(i,0),o=new dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new dt(new J(s),0);let l=new wt(ge);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),$.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,i=>{const s=new dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new dt(n,0),i=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.Mr=e,this.docs=function(){return new Be(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ar();const o=n.path,l=new J(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||K2(G2(h),r)<=0||(i.has(h.key)||Rd(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new hO(this)}getSize(e){return $.resolve(this.size)}}class hO extends iO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e){this.persistence=e,this.Nr=new xo(n=>ig(n),sg),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hg,this.targetCount=0,this.kr=go.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new go(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new eg(0),this.Kr=!1,this.Kr=!0,this.$r=new uO,this.referenceDelegate=e(this),this.Ur=new fO(this),this.indexManager=new nO,this.remoteDocumentCache=function(i){return new dO(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new eO(n),this.Gr=new aO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new cO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new mO(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class mO extends Y2{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Jr=new hg,this.Yr=null}static Zr(e){return new fg(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const i=J.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=le(),i=le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new pg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return aN()?8:X2(Dt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new gO;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(oa()<=ue.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(oa()<=ue.DEBUG&&K("QueryEngine","Query:",xs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(oa()<=ue.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):$.resolve())}Yi(e,n){if($0(n))return $.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vp(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=le(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,vp(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return $0(n)||i.isEqual(ne.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?$.resolve(null):(oa()<=ue.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xs(n)),this.rs(e,o,n,H2(i,-1)).next(l=>l))})}ts(e,n){let r=new wt(DT(e));return n.forEach((i,s)=>{Rd(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return oa()<=ue.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",xs(n)),this.Ji.getDocumentsMatchingQuery(e,n,gi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Be(ge),this._s=new xo(s=>ig(s),sg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function _O(t,e,n,r){return new vO(t,e,n,r)}async function ek(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=le();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function wO(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const f=c.batch,m=f.keys();let y=$.resolve();return m.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(I=>{const N=c.docVersions.get(T);Ie(N!==null),I.version.compareTo(N)<0&&(f.applyToRemoteDocument(I,c),I.isValidDocument()&&(I.setReadTime(c.commitVersion),h.addEntry(I)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=le();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tk(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function EO(t,e){const n=re(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;l.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Tt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(I,N,k){return I.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(m,y,h)&&l.push(n.Ur.updateTargetData(s,y))});let u=Ar(),c=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(TO(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ne.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return $.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function TO(t,e,n){let r=le(),i=le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ar();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):K("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function kO(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IO(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Zr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function kp(t,e,n){const r=re(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ll(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Z0(t,e,n){const r=re(t);let i=ne.min(),s=le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=re(u),m=f._s.get(h);return m!==void 0?$.resolve(f.os.get(m)):f.Ur.getTargetData(c,h)}(r,o,Jn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:le())).next(l=>(SO(r,mD(e),l),{documents:l,Ts:s})))}function SO(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class e_{constructor(){this.activeTargetIds=ED()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bO{constructor(){this.so=new e_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new e_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function Hh(){return Du===null?Du=function(){return 268435456+Math.round(2147483648*Math.random())}():Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class NO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Hh(),u=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(K("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw ho("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=AO[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Hh();return new Promise((o,l)=>{const u=new mT;u.setWithCredentials(!0),u.listenOnce(gT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nc.NO_ERROR:const h=u.getResponseJson();K(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case nc.TIMEOUT:K(At,`RPC '${e}' ${s} timed out`),l(new H(B.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:const f=u.getStatus();if(K(At,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const T=function(N){const k=N.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(k)>=0?k:B.UNKNOWN}(y.status);l(new H(T,y.message))}else l(new H(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new H(B.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{K(At,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);K(At,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Hh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_T(),l=vT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");K(At,`Creating RPC '${e}' stream ${i}: ${h}`,u);const f=o.createWebChannel(h,u);let m=!1,y=!1;const T=new CO({Io:N=>{y?K(At,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(K(At,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),K(At,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},To:()=>f.close()}),I=(N,k,w)=>{N.listen(k,E=>{try{w(E)}catch(P){setTimeout(()=>{throw P},0)}})};return I(f,_a.EventType.OPEN,()=>{y||(K(At,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),I(f,_a.EventType.CLOSE,()=>{y||(y=!0,K(At,`RPC '${e}' stream ${i} transport closed`),T.So())}),I(f,_a.EventType.ERROR,N=>{y||(y=!0,ho(At,`RPC '${e}' stream ${i} transport errored:`,N),T.So(new H(B.UNAVAILABLE,"The operation could not be completed")))}),I(f,_a.EventType.MESSAGE,N=>{var k;if(!y){const w=N.data[0];Ie(!!w);const E=w,P=E.error||((k=E[0])===null||k===void 0?void 0:k.error);if(P){K(At,`RPC '${e}' stream ${i} received error:`,P);const U=P.status;let j=function(b){const x=Je[b];if(x!==void 0)return WT(x)}(U),S=P.message;j===void 0&&(j=B.INTERNAL,S="Unknown error status: "+U+" with message "+P.message),y=!0,T.So(new H(j,S)),f.close()}else K(At,`RPC '${e}' stream ${i} received:`,w),T.bo(w)}}),I(l,yT.STAT_EVENT,N=>{N.stat===hp.PROXY?K(At,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===hp.NOPROXY&&K(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function Gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){return new BD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nk(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RO extends rk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=zD(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Zn(o.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Tp(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=gp(u)?{documents:HD(s,u)}:{query:GD(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=GT(s,o.resumeToken);const c=_p(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ne.min())>0){l.readTime=Gc(s,o.snapshotVersion.toTimestamp());const c=_p(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=QD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Tp(this.serializer),n.removeTarget=e,this.a_(n)}}class PO extends rk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qD(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Tp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>WD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,wp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(B.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,wp(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class OO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xr(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ps(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=re(u);c.L_.add(4),await Ul(c),c.q_.set("Unknown"),c.L_.delete(4),await Vd(c)}(this))})}),this.q_=new OO(r,i)}}async function Vd(t){if(ps(t))for(const e of t.B_)await e(!0)}async function Ul(t){for(const e of t.B_)await e(!1)}function ik(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vg(n)?yg(n):Ao(n).r_()&&gg(n,e))}function mg(t,e){const n=re(t),r=Ao(n);n.N_.delete(e),r.r_()&&sk(n,e),n.N_.size===0&&(r.r_()?r.o_():ps(n)&&n.q_.set("Unknown"))}function gg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(t).A_(e)}function sk(t,e){t.Q_.xe(e),Ao(t).R_(e)}function yg(t){t.Q_=new VD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ao(t).start(),t.q_.v_()}function vg(t){return ps(t)&&!Ao(t).n_()&&t.N_.size>0}function ps(t){return re(t).L_.size===0}function ok(t){t.Q_=void 0}async function VO(t){t.q_.set("Online")}async function MO(t){t.N_.forEach((e,n)=>{gg(t,e)})}async function UO(t,e){ok(t),vg(t)?(t.q_.M_(e),yg(t)):t.q_.set("Unknown")}async function FO(t,e,n){if(t.q_.set("Online"),e instanceof HT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kc(t,r)}else if(e instanceof sc?t.Q_.Ke(e):e instanceof qT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await tk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Tt.EMPTY_BYTE_STRING,h.snapshotVersion)),sk(s,u);const f=new Zr(h.target,u,c,h.sequenceNumber);gg(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await Kc(t,r)}}async function Kc(t,e,n){if(!Ll(e))throw e;t.L_.add(1),await Ul(t),t.q_.set("Offline"),n||(n=()=>tk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Vd(t)})}function ak(t,e){return e().catch(n=>Kc(t,n,e))}async function Md(t){const e=re(t),n=vi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;BO(e);)try{const i=await kO(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,jO(e,i)}catch(i){await Kc(e,i)}lk(e)&&uk(e)}function BO(t){return ps(t)&&t.O_.length<10}function jO(t,e){t.O_.push(e);const n=vi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function lk(t){return ps(t)&&!vi(t).n_()&&t.O_.length>0}function uk(t){vi(t).start()}async function $O(t){vi(t).p_()}async function zO(t){const e=vi(t);for(const n of t.O_)e.m_(n.mutations)}async function WO(t,e,n){const r=t.O_.shift(),i=ug.from(r,e,n);await ak(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Md(t)}async function qO(t,e){e&&vi(t).V_&&await async function(r,i){if(function(o){return DD(o)&&o!==B.ABORTED}(i.code)){const s=r.O_.shift();vi(r).s_(),await ak(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Md(r)}}(t,e),lk(t)&&uk(t)}async function n_(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=ps(n);n.L_.add(3),await Ul(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Vd(n)}async function HO(t,e){const n=re(t);e?(n.L_.delete(2),await Vd(n)):e||(n.L_.add(2),await Ul(n),n.q_.set("Unknown"))}function Ao(t){return t.K_||(t.K_=function(n,r,i){const s=re(n);return s.w_(),new RO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:VO.bind(null,t),Ro:MO.bind(null,t),mo:UO.bind(null,t),d_:FO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vg(t)?yg(t):t.q_.set("Unknown")):(await t.K_.stop(),ok(t))})),t.K_}function vi(t){return t.U_||(t.U_=function(n,r,i){const s=re(n);return s.w_(),new PO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$O.bind(null,t),mo:qO.bind(null,t),f_:zO.bind(null,t),g_:WO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Md(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new _g(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wg(t,e){if(xr("AsyncQueue",`${e}: ${t}`),Ll(t))return new H(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=wa(),this.sortedSet=new Be(this.comparator)}static emptySet(e){return new to(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof to)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new to;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.W_=new Be(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class yo{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new yo(e,n,to.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class KO{constructor(){this.queries=i_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=i_(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new H(B.ABORTED,"Firestore shutting down"))}}function i_(){return new xo(t=>PT(t),Nd)}async function ck(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new GO,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=wg(o,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Eg(n)}async function dk(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QO(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&Eg(n)}function YO(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Eg(t){t.Y_.forEach(e=>{e.next()})}var Ip,s_;(s_=Ip||(Ip={})).ea="default",s_.Cache="cache";class hk{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ip.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.key=e}}class pk{constructor(e){this.key=e}}class XO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=DT(e),this.Ra=new to(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new r_,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),y=Rd(this.query,f)?f:null,T=!!m&&this.mutatedKeys.has(m.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let N=!1;m&&y?m.data.isEqual(y.data)?T!==I&&(r.track({type:3,doc:y}),N=!0):this.ga(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Aa(y,u)>0||c&&this.Aa(y,c)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||c)&&(l=!0)),N&&(y?(o=o.add(y),s=I?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(y,T){const I=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return I(y)-I(T)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new yo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new r_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new pk(r))}),this.da.forEach(r=>{e.has(r)||n.push(new fk(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class JO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ZO{constructor(e){this.key=e,this.va=!1}}class eL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xo(l=>PT(l),Nd),this.Ma=new Map,this.xa=new Set,this.Oa=new Be(J.comparator),this.Na=new Map,this.La=new hg,this.Ba={},this.ka=new Map,this.qa=go.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function tL(t,e,n=!0){const r=wk(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await mk(r,e,n,!0),i}async function nL(t,e){const n=wk(t);await mk(n,e,!0,!1)}async function mk(t,e,n,r){const i=await IO(t.localStore,Jn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await rL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ik(t.remoteStore,i),l}async function rL(t,e,n,r,i){t.Ka=(f,m,y)=>async function(I,N,k,w){let E=N.view.ma(k);E.ns&&(E=await Z0(I.localStore,N.query,!1).then(({documents:S})=>N.view.ma(S,E)));const P=w&&w.targetChanges.get(N.targetId),U=w&&w.targetMismatches.get(N.targetId)!=null,j=N.view.applyChanges(E,I.isPrimaryClient,P,U);return a_(I,N.targetId,j.wa),j.snapshot}(t,f,m,y);const s=await Z0(t.localStore,e,!0),o=new XO(e,s.Ts),l=o.ma(s.documents),u=Ml.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);a_(t,n,c.wa);const h=new JO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function iL(t,e,n){const r=re(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Nd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mg(r.remoteStore,i.targetId),Sp(r,i.targetId)}).catch(Ol)):(Sp(r,i.targetId),await kp(r.localStore,i.targetId,!0))}async function sL(t,e){const n=re(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mg(n.remoteStore,r.targetId))}async function oL(t,e,n){const r=fL(t);try{const i=await function(o,l){const u=re(o),c=rt.now(),h=l.reduce((y,T)=>y.add(T.key),le());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Ar(),I=le();return u.cs.getEntries(y,h).next(N=>{T=N,T.forEach((k,w)=>{w.isValidDocument()||(I=I.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(N=>{f=N;const k=[];for(const w of l){const E=AD(w,f.get(w.key).overlayedDocument);E!=null&&k.push(new bi(w.key,E,IT(E.value.mapValue),vn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,k,l)}).next(N=>{m=N;const k=N.applyToLocalDocumentSet(f,I);return u.documentOverlayCache.saveOverlays(y,N.batchId,k)})}).then(()=>({batchId:m.batchId,changes:LT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Be(ge)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Fl(r,i.changes),await Md(r.remoteStore)}catch(i){const s=wg(i,"Failed to persist write");n.reject(s)}}async function gk(t,e){const n=re(t);try{const r=await EO(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ie(o.va):i.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await Fl(n,r,e)}catch(r){await Ol(r)}}function o_(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=re(o);u.onlineState=l;let c=!1;u.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(l)&&(c=!0)}),c&&Eg(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aL(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Be(J.comparator);o=o.insert(s,Rt.newNoDocument(s,ne.min()));const l=le().add(s),u=new Od(ne.min(),new Map,new Be(ge),o,l);await gk(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Tg(r)}else await kp(r.localStore,e,!1).then(()=>Sp(r,e,n)).catch(Ol)}async function lL(t,e){const n=re(t),r=e.batch.batchId;try{const i=await wO(n.localStore,e);vk(n,r,null),yk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fl(n,i)}catch(i){await Ol(i)}}async function uL(t,e,n){const r=re(t);try{const i=await function(o,l){const u=re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(f=>(Ie(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);vk(r,e,n),yk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fl(r,i)}catch(i){await Ol(i)}}function yk(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function vk(t,e,n){const r=re(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Sp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||_k(t,r)})}function _k(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(mg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Tg(t))}function a_(t,e,n){for(const r of n)r instanceof fk?(t.La.addReference(r.key,e),cL(t,r)):r instanceof pk?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||_k(t,r.key)):te()}function cL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),Tg(t))}function Tg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(Pe.fromString(e)),r=t.qa.next();t.Na.set(r,new ZO(n)),t.Oa=t.Oa.insert(n,r),ik(t.remoteStore,new Zr(Jn(og(n.path)),r,"TargetPurposeLimboResolution",eg.oe))}}async function Fl(t,e,n){const r=re(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=pg.Wi(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=re(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(c,m=>$.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>$.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Ll(f))throw f;K("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=h.os.get(m),T=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(m,I)}}}(r.localStore,s))}async function dL(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await ek(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new H(B.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fl(n,r.hs)}}function hL(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function wk(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aL.bind(null,e),e.Ca.d_=QO.bind(null,e.eventManager),e.Ca.$a=YO.bind(null,e.eventManager),e}function fL(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uL.bind(null,e),e}class Qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ld(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return _O(this.persistence,new yO,e.initialUser,this.serializer)}Ga(e){return new pO(fg.Zr,this.serializer)}Wa(e){return new bO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qc.provider={build:()=>new Qc};class bp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dL.bind(null,this.syncEngine),await HO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KO}()}createDatastore(e){const n=Ld(e.databaseInfo.databaseId),r=function(s){return new NO(s)}(e.databaseInfo);return function(s,o,l,u){return new DO(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new LO(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>o_(this.syncEngine,n,0),function(){return t_.D()?new t_:new xO}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,h){const f=new eL(i,s,o,l,u,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ul(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bp.provider={build:()=>new bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=ET.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kh(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ek(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mL(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>n_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>n_(e.remoteStore,i)),t._onlineComponents=e}async function mL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ho("Error using user provided cache. Falling back to memory cache: "+n),await Kh(t,new Qc)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Kh(t,new Qc);return t._offlineComponents}async function Tk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await l_(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await l_(t,new bp))),t._onlineComponents}function gL(t){return Tk(t).then(e=>e.syncEngine)}async function kk(t){const e=await Tk(t),n=e.eventManager;return n.onListen=tL.bind(null,e.syncEngine),n.onUnlisten=iL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=nL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sL.bind(null,e.syncEngine),n}function yL(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Ek({next:m=>{h.Za(),o.enqueueAndForget(()=>dk(s,f));const y=m.docs.has(l);!y&&m.fromCache?c.reject(new H(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?c.reject(new H(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new hk(og(l.path),h,{includeMetadataChanges:!0,_a:!0});return ck(s,f)}(await kk(t),t.asyncQueue,e,n,r)),r.promise}function vL(t,e,n={}){const r=new _r;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Ek({next:m=>{h.Za(),o.enqueueAndForget(()=>dk(s,f)),m.fromCache&&u.source==="server"?c.reject(new H(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new hk(l,h,{includeMetadataChanges:!0,_a:!0});return ck(s,f)}(await kk(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t,e,n){if(!n)throw new H(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _L(t,e,n,r){if(e===!0&&r===!0)throw new H(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function c_(t){if(!J.isDocumentKey(t))throw new H(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d_(t){if(J.isDocumentKey(t))throw new H(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ud(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function Pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ud(t);throw new H(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_L("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ik((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new M2;switch(r.type){case"firstParty":return new j2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=u_.get(n);r&&(K("ComponentProvider","Removing Datastore"),u_.delete(n),r.terminate())}(this),Promise.resolve()}}function wL(t,e,n,r={}){var i;const s=(t=Pn(t,Fd))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ct.MOCK_USER;else{l=A1(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new H(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ct(c)}t._authCredentials=new U2(new wT(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class $t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}}class di extends ms{constructor(e,n,r){super(e,n,og(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new J(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function Mt(t,e,...n){if(t=We(t),Sk("collection","path",e),t instanceof Fd){const r=Pe.fromString(e,...n);return d_(r),new di(t,null,r)}{if(!(t instanceof $t||t instanceof di))throw new H(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return d_(r),new di(t.firestore,null,r)}}function Xe(t,e,...n){if(t=We(t),arguments.length===1&&(e=ET.newId()),Sk("doc","path",e),t instanceof Fd){const r=Pe.fromString(e,...n);return c_(r),new $t(t,null,new J(r))}{if(!(t instanceof $t||t instanceof di))throw new H(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return c_(r),new $t(t.firestore,t instanceof di?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nk(this,"async_queue_retry"),this.Vu=()=>{const r=Gh();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new _r;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ll(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw xr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=_g.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&te()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class gs extends Fd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new f_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f_(e),this._firestoreClient=void 0,await e}}}function EL(t,e){const n=typeof t=="object"?t:zm(),r=typeof t=="string"?t:e||"(default)",i=Sd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=S1("firestore");s&&wL(i,...s)}return i}function kg(t){if(t._terminated)throw new H(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||TL(t),t._firestoreClient}function TL(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,h){return new eD(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ik(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new pL(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vo(Tt.fromBase64String(e))}catch(n){throw new H(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vo(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=/^__.*__$/;class IL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Vl(e,this.data,n,this.fieldTransforms)}}class bk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class xg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Yc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xk(this.Cu)&&kL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class SL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ld(e)}Qu(e,n,r,i=!1){return new xg({Cu:e,methodName:n,qu:r,path:vt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jd(t){const e=t._freezeSettings(),n=Ld(t._databaseId);return new SL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ak(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Ag("Data must be an object, but it was:",o,r);const l=Ck(r,o);let u,c;if(s.merge)u=new on(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const m=xp(e,f,n);if(!o.contains(m))throw new H(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Rk(h,m)||h.push(m)}u=new on(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new IL(new Qt(l),u,c)}class $d extends Ig{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function bL(t,e,n,r){const i=t.Qu(1,e,n);Ag("Data must be an object, but it was:",i,r);const s=[],o=Qt.empty();fs(r,(u,c)=>{const h=Cg(e,u,n);c=We(c);const f=i.Nu(h);if(c instanceof $d)s.push(h);else{const m=Bl(c,f);m!=null&&(s.push(h),o.set(h,m))}});const l=new on(s);return new bk(o,l,i.fieldTransforms)}function xL(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[xp(e,r,n)],u=[i];if(s.length%2!=0)throw new H(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(xp(e,s[m])),u.push(s[m+1]);const c=[],h=Qt.empty();for(let m=l.length-1;m>=0;--m)if(!Rk(c,l[m])){const y=l[m];let T=u[m];T=We(T);const I=o.Nu(y);if(T instanceof $d)c.push(y);else{const N=Bl(T,I);N!=null&&(c.push(y),h.set(y,N))}}const f=new on(c);return new bk(h,f,o.fieldTransforms)}function AL(t,e,n,r=!1){return Bl(n,t.Qu(r?4:3,e))}function Bl(t,e){if(Nk(t=We(t)))return Ag("Unsupported field value:",e,t),Ck(t,e);if(t instanceof Ig)return function(r,i){if(!xk(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Bl(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=rt.fromDate(r);return{timestampValue:Gc(i.serializer,s)}}if(r instanceof rt){const s=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gc(i.serializer,s)}}if(r instanceof Sg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vo)return{bytesValue:GT(i.serializer,r._byteString)};if(r instanceof $t){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bg)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return ag(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ud(r)}`)}(t,e)}function Ck(t,e){const n={};return TT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(t,(r,i)=>{const s=Bl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Nk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof Sg||t instanceof vo||t instanceof $t||t instanceof Ig||t instanceof bg)}function Ag(t,e,n){if(!Nk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ud(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function xp(t,e,n){if((e=We(e))instanceof Bd)return e._internalPath;if(typeof e=="string")return Cg(t,e);throw Yc("Field path arguments must be of type string or ",t,!1,void 0,n)}const CL=new RegExp("[~\\*/\\[\\]]");function Cg(t,e,n){if(e.search(CL)>=0)throw Yc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bd(...e.split("."))._internalPath}catch{throw Yc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new H(B.INVALID_ARGUMENT,l+t+u)}function Rk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NL extends Pk{data(){return super.data()}}function zd(t,e){return typeof e=="string"?Cg(t,e):e instanceof Bd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ng{}class Dk extends Ng{}function Oi(t,e,...n){let r=[];e instanceof Ng&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Rg).length,l=s.filter(u=>u instanceof Wd).length;if(o>1||o>0&&l>0)throw new H(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Wd extends Dk{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wd(e,n,r)}_apply(e){const n=this._parse(e);return Ok(e._query,n),new ms(e.firestore,e.converter,yp(e._query,n))}_parse(e){const n=jd(e.firestore);return function(s,o,l,u,c,h,f){let m;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){m_(f,h);const y=[];for(const T of f)y.push(p_(u,s,T));m={arrayValue:{values:y}}}else m=p_(u,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||m_(f,h),m=AL(l,o,f,h==="in"||h==="not-in");return et.create(c,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Fr(t,e,n){const r=e,i=zd("where",t);return Wd._create(i,r,n)}class Rg extends Ng{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)Ok(o,u),o=yp(o,u)}(e._query,n),new ms(e.firestore,e.converter,yp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pg extends Dk{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new H(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new H(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dl(s,o)}(e._query,this._field,this._direction);return new ms(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new bo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function PL(t,e="asc"){const n=e,r=zd("orderBy",t);return Pg._create(r,n)}function p_(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new H(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RT(e)&&n.indexOf("/")!==-1)throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!J.isDocumentKey(r))throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return V0(t,new J(r))}if(n instanceof $t)return V0(t,n._key);throw new H(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ud(n)}.`)}function m_(t,e){if(!Array.isArray(t)||t.length===0)throw new H(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ok(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class DL{convertValue(e,n="none"){switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ke(o.doubleValue));return new bg(s)}convertGeoPoint(e){return new Sg(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ng(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){const n=yi(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);Ie(ZT(r));const i=new ul(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||xr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vk extends Pk{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class oc extends Vk{data(e={}){return super.data(e)}}class OL{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oc(this._firestore,this._userDataWriter,r.key,r,new Ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new oc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new oc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:LL(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function LL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){t=Pn(t,$t);const e=Pn(t.firestore,gs);return yL(kg(e),t._key).then(n=>VL(e,t,n))}class Mk extends DL{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}function jn(t){t=Pn(t,ms);const e=Pn(t.firestore,gs),n=kg(e),r=new Mk(e);return RL(t._query),vL(n,t._query).then(i=>new OL(e,r,t,i))}function g_(t,e,n){t=Pn(t,$t);const r=Pn(t.firestore,gs),i=Lk(t.converter,e,n);return qd(r,[Ak(jd(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vn.none())])}function ur(t,e,n,...r){t=Pn(t,$t);const i=Pn(t.firestore,gs),s=jd(i);let o;return o=typeof(e=We(e))=="string"||e instanceof Bd?xL(s,"updateDoc",t._key,e,n,r):bL(s,"updateDoc",t._key,e),qd(i,[o.toMutation(t._key,vn.exists(!0))])}function Qh(t){return qd(Pn(t.firestore,gs),[new lg(t._key,vn.none())])}function la(t,e){const n=Pn(t.firestore,gs),r=Xe(t),i=Lk(t.converter,e);return qd(n,[Ak(jd(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,vn.exists(!1))]).then(()=>r)}function qd(t,e){return function(r,i){const s=new _r;return r.asyncQueue.enqueueAndForget(async()=>oL(await gL(r),i,s)),s.promise}(kg(t),e)}function VL(t,e,n){const r=n.docs.get(e._key),i=new Mk(t);return new Vk(t,i,e._key,r,new Ta(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){So=i})(ds),es(new mi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new gs(new F2(r.getProvider("auth-internal")),new z2(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ul(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Qn(R0,"4.7.3",e),Qn(R0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk="firebasestorage.googleapis.com",Fk="storageBucket",ML=2*60*1e3,UL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He extends tr{constructor(e,n,r=0){super(Yh(e),`Firebase Storage: ${n} (${Yh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,He.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qe||(qe={}));function Yh(t){return"storage/"+t}function Dg(){const t="An unknown error occurred, please check the error payload for server response.";return new He(qe.UNKNOWN,t)}function FL(t){return new He(qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function BL(t){return new He(qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new He(qe.UNAUTHENTICATED,t)}function $L(){return new He(qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zL(t){return new He(qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function WL(){return new He(qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qL(){return new He(qe.CANCELED,"User canceled the upload/download.")}function HL(t){return new He(qe.INVALID_URL,"Invalid URL '"+t+"'.")}function GL(t){return new He(qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function KL(){return new He(qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Fk+"' property when initializing the app?")}function QL(){return new He(qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YL(){return new He(qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function XL(t){return new He(qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ap(t){return new He(qe.INVALID_ARGUMENT,t)}function Bk(){return new He(qe.APP_DELETED,"The Firebase app was deleted.")}function JL(t){return new He(qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fa(t,e){return new He(qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ua(t){throw new He(qe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=an.makeFromUrl(e,n)}catch{return new an(e,"")}if(r.path==="")return r;throw GL(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${i}/o${m}`,"i"),T={bucket:1,path:3},I=n===Uk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",k=new RegExp(`^https?://${I}/${i}/${N}`,"i"),E=[{regex:l,indices:u,postModify:s},{regex:y,indices:T,postModify:c},{regex:k,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<E.length;P++){const U=E[P],j=U.regex.exec(e);if(j){const S=j[U.indices.bucket];let _=j[U.indices.path];_||(_=""),r=new an(S,_),U.postModify(r);break}}if(r==null)throw HL(e);return r}}class ZL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(t,e,n){let r=1,i=null,s=null,o=!1,l=0;function u(){return l===2}let c=!1;function h(...N){c||(c=!0,e.apply(null,N))}function f(N){i=setTimeout(()=>{i=null,t(y,u())},N)}function m(){s&&clearTimeout(s)}function y(N,...k){if(c){m();return}if(N){m(),h.call(null,N,...k);return}if(u()||o){m(),h.call(null,N,...k);return}r<64&&(r*=2);let E;l===1?(l=2,E=0):E=(r+Math.random())*1e3,f(E)}let T=!1;function I(N){T||(T=!0,m(),!c&&(i!==null?(N||(l=2),clearTimeout(i),f(0)):N||(l=1)))}return f(0),s=setTimeout(()=>{o=!0,I(!0)},n),I}function t4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(t){return t!==void 0}function r4(t){return typeof t=="object"&&!Array.isArray(t)}function Og(t){return typeof t=="string"||t instanceof String}function y_(t){return Lg()&&t instanceof Blob}function Lg(){return typeof Blob<"u"}function v_(t,e,n,r){if(r<e)throw Ap(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ap(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function jk(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Gi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Gi||(Gi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,n,r,i,s,o,l,u,c,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,T)=>{this.resolve_=y,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ou(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Gi.NO_ERROR,u=s.getStatus();if(!l||i4(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Gi.ABORT;r(!1,new Ou(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Ou(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());n4(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=Dg();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(i.canceled){const u=this.appDelete_?Bk():qL();o(u)}else{const u=WL();o(u)}};this.canceled_?n(!1,new Ou(!1,null,!0)):this.backoffId_=e4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&t4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ou{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function o4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function a4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function l4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function u4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function c4(t,e,n,r,i,s,o=!0){const l=jk(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return l4(c,e),o4(c,n),a4(c,s),u4(c,r),new s4(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function h4(...t){const e=d4();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Lg())return new Blob(t);throw new He(qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function f4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t){if(typeof atob>"u")throw XL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xh{constructor(e,n){this.data=e,this.contentType=n||null}}function m4(t,e){switch(t){case Hn.RAW:return new Xh($k(e));case Hn.BASE64:case Hn.BASE64URL:return new Xh(zk(t,e));case Hn.DATA_URL:return new Xh(y4(e),v4(e))}throw Dg()}function $k(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function g4(t){let e;try{e=decodeURIComponent(t)}catch{throw Fa(Hn.DATA_URL,"Malformed data URL.")}return $k(e)}function zk(t,e){switch(t){case Hn.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Fa(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hn.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Fa(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=p4(e)}catch(i){throw i.message.includes("polyfill")?i:Fa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Wk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Fa(Hn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=_4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function y4(t){const e=new Wk(t);return e.base64?zk(Hn.BASE64,e.rest):g4(e.rest)}function v4(t){return new Wk(t).contentType}function _4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){let r=0,i="";y_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(y_(this.data_)){const r=this.data_,i=f4(r,e,n);return i===null?null:new Qr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Qr(r,!0)}}static getBlob(...e){if(Lg()){const n=e.map(r=>r instanceof Qr?r.data_:r);return new Qr(h4.apply(null,n))}else{const n=e.map(o=>Og(o)?m4(Hn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)i[s++]=o[l]}),new Qr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){let e;try{e=JSON.parse(t)}catch{return null}return r4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function E4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Hk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t,e){return e}class Ut{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||T4}}let Lu=null;function k4(t){return!Og(t)||t.length<2?t:Hk(t)}function Gk(){if(Lu)return Lu;const t=[];t.push(new Ut("bucket")),t.push(new Ut("generation")),t.push(new Ut("metageneration")),t.push(new Ut("name","fullPath",!0));function e(s,o){return k4(o)}const n=new Ut("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ut("size");return i.xform=r,t.push(i),t.push(new Ut("timeCreated")),t.push(new Ut("updated")),t.push(new Ut("md5Hash",null,!0)),t.push(new Ut("cacheControl",null,!0)),t.push(new Ut("contentDisposition",null,!0)),t.push(new Ut("contentEncoding",null,!0)),t.push(new Ut("contentLanguage",null,!0)),t.push(new Ut("contentType",null,!0)),t.push(new Ut("metadata","customMetadata",!0)),Lu=t,Lu}function I4(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new an(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function S4(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return I4(r,t),r}function Kk(t,e,n){const r=qk(e);return r===null?null:S4(t,r,n)}function b4(t,e,n,r){const i=qk(e);if(i===null||!Og(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const h=t.bucket,f=t.fullPath,m="/b/"+o(h)+"/o/"+o(f),y=Vg(m,n,r),T=jk({alt:"media",token:c});return y+T})[0]}function x4(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class Qk{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){if(!t)throw Dg()}function A4(t,e){function n(r,i){const s=Kk(t,i,e);return Yk(s!==null),s}return n}function C4(t,e){function n(r,i){const s=Kk(t,i,e);return Yk(s!==null),b4(s,i,t.host,t._protocol)}return n}function Xk(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=$L():i=jL():n.getStatus()===402?i=BL(t.bucket):n.getStatus()===403?i=zL(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function N4(t){const e=Xk(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=FL(t.path)),s.serverResponse=i.serverResponse,s}return n}function R4(t,e,n){const r=e.fullServerUrl(),i=Vg(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,l=new Qk(i,s,C4(t,n),o);return l.errorHandler=N4(e),l}function P4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function D4(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=P4(null,e)),r}function O4(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let E="";for(let P=0;P<2;P++)E=E+Math.random().toString().slice(2);return E}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const c=D4(e,r,i),h=x4(c,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+u+"--",y=Qr.getBlob(f,r,m);if(y===null)throw QL();const T={name:c.fullPath},I=Vg(s,t.host,t._protocol),N="POST",k=t.maxUploadRetryTime,w=new Qk(I,N,A4(t,n),k);return w.urlParams=T,w.headers=o,w.body=y.uploadData(),w.errorHandler=Xk(e),w}class L4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Gi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Gi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Gi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw ua("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ua("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ua("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ua("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ua("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class V4 extends L4{initXhr(){this.xhr_.responseType="text"}}function Jk(){return new V4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n){this._service=e,n instanceof an?this._location=n:this._location=an.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new os(e,n)}get root(){const e=new an(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hk(this._location.path)}get storage(){return this._service}get parent(){const e=w4(this._location.path);if(e===null)return null;const n=new an(this._location.bucket,e);return new os(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw JL(e)}}function M4(t,e,n){t._throwIfRoot("uploadBytes");const r=O4(t.storage,t._location,Gk(),new Qr(e,!0),n);return t.storage.makeRequestWithTokens(r,Jk).then(i=>({metadata:i,ref:t}))}function U4(t){t._throwIfRoot("getDownloadURL");const e=R4(t.storage,t._location,Gk());return t.storage.makeRequestWithTokens(e,Jk).then(n=>{if(n===null)throw YL();return n})}function F4(t,e){const n=E4(t._location.path,e),r=new an(t._location.bucket,n);return new os(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B4(t){return/^[A-Za-z]+:\/\//.test(t)}function j4(t,e){return new os(t,e)}function Zk(t,e){if(t instanceof Mg){const n=t;if(n._bucket==null)throw KL();const r=new os(n,n._bucket);return e!=null?Zk(r,e):r}else return e!==void 0?F4(t,e):t}function $4(t,e){if(e&&B4(e)){if(t instanceof Mg)return j4(t,e);throw Ap("To use ref(service, url), the first argument must be a Storage instance.")}else return Zk(t,e)}function __(t,e){const n=e==null?void 0:e[Fk];return n==null?null:an.makeFromBucketSpec(n,t)}function z4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:A1(i,t.app.options.projectId))}class Mg{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Uk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ML,this._maxUploadRetryTime=UL,this._requests=new Set,i!=null?this._bucket=an.makeFromBucketSpec(i,this._host):this._bucket=__(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=an.makeFromBucketSpec(this._url,e):this._bucket=__(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){v_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){v_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new os(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new ZL(Bk());{const o=c4(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const w_="@firebase/storage",E_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="storage";function T_(t,e,n){return t=We(t),M4(t,e,n)}function k_(t){return t=We(t),U4(t)}function I_(t,e){return t=We(t),$4(t,e)}function W4(t=zm(),e){t=We(t);const r=Sd(t,eI).getImmediate({identifier:e}),i=S1("storage");return i&&q4(r,...i),r}function q4(t,e,n,r={}){z4(t,e,n,r)}function H4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Mg(n,r,i,e,ds)}function G4(){es(new mi(eI,H4,"PUBLIC").setMultipleInstances(!0)),Qn(w_,E_,""),Qn(w_,E_,"esm2017")}G4();var K4="firebase",Q4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(K4,Q4,"app");const Y4={apiKey:"AIzaSyDa63IAknYHAx_zUbxtCXXaxYnh8ExZ9fY",authDomain:"campus-resources-demo.firebaseapp.com",projectId:"campus-resources-demo",storageBucket:"campus-resources-demo.firebasestorage.app",messagingSenderId:"96808245065",appId:"1:96808245065:web:75462c690a22b3e887ec98"},Ug=R1(Y4),ca=L2(Ug),he=EL(Ug),S_=W4(Ug);class X4{async register(e){try{console.log("🚀 Starting registration process...",{email:e.email,username:e.username});const r=(await _P(ca,e.email,e.password)).user;console.log("✅ Firebase Auth user created:",r.uid);const i={id:r.uid,username:e.username,email:e.email,role:e.role,department:e.department,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("📝 Storing user profile in Firestore...",i),await g_(Xe(he,"users",r.uid),i),console.log("✅ User profile stored successfully in Firestore!");const s=await r.getIdToken();return console.log("🎉 Registration completed successfully!"),{user:i,token:s}}catch(n){throw console.error("❌ Registration error:",n),new Error(n.message)}}async login(e,n){try{const i=(await w0(ca,e,n)).user,s=await aa(Xe(he,"users",i.uid));if(!s.exists())throw new Error("User data not found");const o=s.data(),l=await i.getIdToken();return await ur(Xe(he,"users",i.uid),{lastLogin:new Date().toISOString()}),{user:o,token:l}}catch(r){throw console.error("Login error:",r),new Error(r.message)}}async logout(){try{await IP(ca)}catch(e){throw console.error("Logout error:",e),new Error(e.message)}}async checkUserExists(e){try{return(await aa(Xe(he,"users",e))).exists()}catch(n){return console.error("Error checking user existence:",n),!1}}async getAllUsers(){try{const e=await jn(Mt(he,"users")),n=[];return e.forEach(r=>{n.push(r.data())}),n}catch(e){return console.error("Error getting all users:",e),[]}}async updateProfile(e,n){try{await ur(Xe(he,"users",e),{...n,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Profile update error:",r),new Error(r.message)}}async updateUserProfile(e,n){try{console.log("🔄 Updating user profile for:",e);const r={username:n.username,email:n.email,department:n.department,bio:n.bio,updatedAt:new Date().toISOString()};Object.keys(r).forEach(i=>{(r[i]===void 0||r[i]===null)&&delete r[i]}),console.log("📝 Updating Firestore user document:",r),await ur(Xe(he,"users",e),r),console.log("✅ User profile updated successfully")}catch(r){throw console.error("❌ User profile update error:",r),new Error(r.message)}}async updatePassword(e,n,r){try{console.log("🔐 Updating password for user:",e);const i=ca.currentUser;if(!i||i.uid!==e)throw new Error("User not authenticated");const s=i.email;if(!s)throw new Error("User email not found");const o=await w0(ca,s,n);await EP(o.user,{displayName:o.user.displayName}),console.log("✅ Password updated successfully")}catch(i){throw console.error("❌ Password update error:",i),new Error(i.message)}}async uploadProfilePicture(e,n){try{const r=I_(S_,`profile-pictures/${e}/${n.name}`);await T_(r,n);const i=await k_(r);return await ur(Xe(he,"users",e),{profilePicture:i,updatedAt:new Date().toISOString()}),i}catch(r){throw console.error("Profile picture upload error:",r),new Error(r.message)}}async createResource(e){try{const n=await la(Mt(he,"resources"),{...e,isUnderMaintenance:!1,maintenanceNote:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return{...e,id:n.id,isUnderMaintenance:!1,maintenanceNote:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}catch(n){throw console.error("Create resource error:",n),new Error(n.message)}}async getResources(){try{const e=Mt(he,"resources"),n=await jn(e);return n.empty?(await this.initializeSampleData(),[{id:"sample-1",name:"Computer Lab A",description:"Fully equipped computer lab with 25 workstations",category:"Laboratory",location:"Building A, Room 101",capacity:25,status:"available",isUnderMaintenance:!1,maintenanceNote:"",equipment:["Computers","Projector","Whiteboard"],maintenanceSchedule:"Monthly",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"sample-2",name:"Conference Room B",description:"Professional conference room with presentation equipment",category:"Meeting Room",location:"Building B, Room 205",capacity:15,status:"available",isUnderMaintenance:!1,maintenanceNote:"",equipment:["Projector","Video Conference System","Whiteboard"],maintenanceSchedule:"Quarterly",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"sample-3",name:"Science Lab",description:"Advanced science laboratory with modern equipment",category:"Laboratory",location:"Building C, Room 301",capacity:20,status:"available",isUnderMaintenance:!1,maintenanceNote:"",equipment:["Microscopes","Lab Equipment","Safety Gear"],maintenanceSchedule:"Weekly",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]):n.docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting resources:",e),[]}}async initializeSampleData(){try{console.log("📊 Initializing sample data...");const e=[{name:"Computer Lab A",description:"Fully equipped computer lab with 25 workstations",category:"Laboratory",location:"Building A, Room 101",capacity:25,status:"available",isUnderMaintenance:!1,maintenanceNote:"",equipment:["Computers","Projector","Whiteboard"],maintenanceSchedule:"Monthly"},{name:"Conference Room B",description:"Professional conference room with presentation equipment",category:"Meeting Room",location:"Building B, Room 205",capacity:15,status:"available",isUnderMaintenance:!1,maintenanceNote:"",equipment:["Projector","Video Conference System","Whiteboard"],maintenanceSchedule:"Quarterly"},{name:"Science Lab",description:"Advanced science laboratory with modern equipment",category:"Laboratory",location:"Building C, Room 301",capacity:20,status:"available",isUnderMaintenance:!1,maintenanceNote:"",equipment:["Microscopes","Lab Equipment","Safety Gear"],maintenanceSchedule:"Weekly"}];for(const n of e)await this.createResource(n);console.log("✅ Sample data initialized successfully!")}catch(e){console.error("❌ Error initializing sample data:",e)}}async getResource(e){try{const n=await aa(Xe(he,"resources",e));if(!n.exists())throw new Error("Resource not found");return{id:n.id,...n.data()}}catch(n){throw console.error("Get resource error:",n),new Error(n.message)}}async updateResource(e,n){try{await ur(Xe(he,"resources",e),{...n,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Update resource error:",r),new Error(r.message)}}async deleteResource(e){try{await Qh(Xe(he,"resources",e))}catch(n){throw console.error("Delete resource error:",n),new Error(n.message)}}async createBooking(e){try{console.log("🔥 Creating booking in Firebase with data:",e);const n=await la(Mt(he,"bookings"),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),r={...e,id:n.id,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return console.log("✅ Booking created successfully with ID:",n.id),console.log("📋 Created booking data:",r),r}catch(n){throw console.error("Create booking error:",n),new Error(n.message)}}async getBookings(e){try{console.log("🔍 getBookings called with userId:",e);let n=Mt(he,"bookings");e&&(console.log("🔍 Adding userId filter:",e),n=Oi(n,Fr("userId","==",e))),console.log("🔍 Executing Firestore query...");const r=await jn(n);console.log("🔍 Query returned",r.docs.length,"documents");const i=r.docs.map(s=>({id:s.id,...s.data()}));return console.log("🔍 Mapped bookings:",i),i.sort((s,o)=>new Date(o.createdAt).getTime()-new Date(s.createdAt).getTime()),i}catch(n){return console.error("Get bookings error:",n),[]}}async getBookingsByUser(e){console.log("🔍 Fetching bookings for user ID:",e);const n=await this.getBookings(e);return console.log("📋 Found bookings for user",e,":",n.length,"bookings"),console.log("📋 Booking details:",n.map(r=>({id:r.id,resourceName:r.resourceName,status:r.status,userId:r.userId}))),n}async getBooking(e){try{const n=await aa(Xe(he,"bookings",e));if(!n.exists())throw new Error("Booking not found");return{id:n.id,...n.data()}}catch(n){throw console.error("Get booking error:",n),new Error(n.message)}}async updateBooking(e,n){try{console.log("🔄 Updating booking:",e,"with data:",n),await ur(Xe(he,"bookings",e),{...n,updatedAt:new Date().toISOString()}),console.log("✅ Booking updated successfully")}catch(r){throw console.error("Update booking error:",r),new Error(r.message)}}async approveBooking(e){try{console.log("✅ Approving booking:",e),await ur(Xe(he,"bookings",e),{status:"approved",updatedAt:new Date().toISOString()}),console.log("✅ Booking approved successfully")}catch(n){throw console.error("Approve booking error:",n),new Error(n.message)}}async rejectBooking(e){try{console.log("❌ Rejecting booking:",e),await ur(Xe(he,"bookings",e),{status:"rejected",updatedAt:new Date().toISOString()}),console.log("✅ Booking rejected successfully")}catch(n){throw console.error("Reject booking error:",n),new Error(n.message)}}async getAllBookings(){try{console.log("🔍 Getting all bookings (admin view)");const e=Mt(he,"bookings"),r=(await jn(e)).docs.map(i=>({id:i.id,...i.data()}));return r.sort((i,s)=>new Date(s.createdAt).getTime()-new Date(i.createdAt).getTime()),console.log("📋 Found",r.length,"total bookings"),console.log("📋 All booking details:",r.map(i=>({id:i.id,resourceName:i.resourceName,status:i.status,userId:i.userId,username:i.username}))),r}catch(e){return console.error("Get all bookings error:",e),[]}}async deleteBooking(e){try{await Qh(Xe(he,"bookings",e))}catch(n){throw console.error("Delete booking error:",n),new Error(n.message)}}async checkBookingConflicts(e,n,r,i){try{console.log("🔍 Checking booking conflicts for resource:",e),console.log("🔍 Time range:",n,"to",r);let s=Oi(Mt(he,"bookings"),Fr("resourceId","==",e),Fr("status","in",["pending","approved"]));const l=(await jn(s)).docs.map(c=>({id:c.id,...c.data()}));console.log("🔍 Found",l.length,"existing bookings for this resource");const u=l.filter(c=>{if(i&&c.id===i)return!1;const h=new Date(c.startTime),f=new Date(c.endTime),m=new Date(n),y=new Date(r),T=h<y&&f>m;return T&&(console.log("⚠️ Conflict found with booking:",c.id),console.log("⚠️ Existing booking time:",h,"to",f),console.log("⚠️ New booking time:",m,"to",y)),T});return console.log("🔍 Total conflicts found:",u.length),u}catch(s){throw console.error("Check booking conflicts error:",s),new Error(s.message)}}async createNotification(e){try{console.log("📢 Creating notification:",e);const n=await la(Mt(he,"notifications"),{...e,createdAt:new Date().toISOString()}),r={...e,id:n.id,createdAt:new Date().toISOString()};return console.log("✅ Notification created successfully with ID:",n.id),r}catch(n){throw console.error("Create notification error:",n),new Error(n.message)}}async getAllNotifications(){try{console.log("🔍 Getting all notifications (admin view)");const e=Mt(he,"notifications"),r=(await jn(e)).docs.map(i=>({id:i.id,...i.data()}));return r.sort((i,s)=>new Date(s.createdAt).getTime()-new Date(i.createdAt).getTime()),console.log("📋 Found",r.length,"notifications"),r}catch(e){return console.error("Get all notifications error:",e),[]}}async deleteNotification(e){try{console.log("🗑️ Deleting notification:",e),await Qh(Xe(he,"notifications",e)),console.log("✅ Notification deleted successfully")}catch(n){throw console.error("Delete notification error:",n),new Error(n.message)}}async uploadNotificationImage(e){try{const n=I_(S_,`notification-images/${Date.now()}-${e.name}`);await T_(n,e);const r=await k_(n);return console.log("✅ Notification image uploaded:",r),r}catch(n){throw console.error("Upload notification image error:",n),new Error(n.message)}}async getNotifications(e){try{console.log("🔍 Getting notifications for user:",e);const n=Oi(Mt(he,"notifications"),Fr("userId","==",e)),r=Oi(Mt(he,"notifications"),Fr("isSystemNotification","==",!0)),[i,s]=await Promise.all([jn(n),jn(r)]),o=i.docs.map(c=>({id:c.id,...c.data()})),l=s.docs.map(c=>({id:c.id,...c.data()})),u=[...o,...l];return u.sort((c,h)=>new Date(h.createdAt).getTime()-new Date(c.createdAt).getTime()),console.log("📋 Found",u.length,"notifications for user"),u}catch(n){return console.error("Get notifications error:",n),[]}}async getNotificationsByUser(e){return this.getNotifications(e)}async markNotificationAsRead(e){try{await ur(Xe(he,"notifications",e),{isRead:!0})}catch(n){throw console.error("Mark notification as read error:",n),new Error(n.message)}}async createMaintenanceRecord(e){try{const n=await la(Mt(he,"maintenance"),{...e,reportedAt:new Date().toISOString()});return{...e,id:n.id,reportedAt:new Date().toISOString()}}catch(n){throw console.error("Create maintenance record error:",n),new Error(n.message)}}async getMaintenanceRecords(e){try{let n=Mt(he,"maintenance");return e&&(n=Oi(n,Fr("resourceId","==",e))),n=Oi(n,PL("reportedAt","desc")),(await jn(n)).docs.map(i=>({id:i.id,...i.data()}))}catch(n){throw console.error("Get maintenance records error:",n),new Error(n.message)}}async logAuditEvent(e){try{await la(Mt(he,"audit_logs"),{...e,timestamp:new Date().toISOString()})}catch(n){console.error("Log audit event error:",n)}}async getSystemSettings(){try{const e=await aa(Xe(he,"system","settings"));return e.exists()?e.data():{maxBookingDuration:4,maxBookingsPerUser:10,approvalRequired:!0,blackoutDates:[],maintenanceMode:!1,emailNotifications:!0,smsNotifications:!1}}catch(e){throw console.error("Get system settings error:",e),new Error(e.message)}}async updateSystemSettings(e){try{await g_(Xe(he,"system","settings"),e,{merge:!0})}catch(n){throw console.error("Update system settings error:",n),new Error(n.message)}}async getBookingReport(e,n){try{const r=Oi(Mt(he,"bookings"),Fr("createdAt",">=",e),Fr("createdAt","<=",n)),s=(await jn(r)).docs.map(f=>({id:f.id,...f.data()})),o=s.length,l=s.filter(f=>f.status==="approved").length,u=s.filter(f=>f.status==="rejected").length,c=s.filter(f=>f.status==="pending").length,h=s.filter(f=>f.status==="cancelled").length;return{totalBookings:o,approvedBookings:l,rejectedBookings:u,pendingBookings:c,cancelledBookings:h}}catch(r){throw console.error("Get booking report error:",r),new Error(r.message)}}}const fe=new X4,J4=Object.freeze(Object.defineProperty({__proto__:null,firebaseService:fe},Symbol.toStringTag,{value:"Module"})),Z4=()=>{const t=Sl(),[e,n]=L.useState({username:"",email:"",role:"student",department:"",password:"",confirmPassword:""}),[r,i]=L.useState({}),[s,o]=L.useState(!1),[l,u]=L.useState(""),[c,h]=L.useState(""),f=[{value:"computer-science",label:"Computer Science"},{value:"engineering",label:"Engineering"},{value:"business",label:"Business Administration"},{value:"arts",label:"Arts & Humanities"},{value:"science",label:"Natural Sciences"},{value:"medicine",label:"Medicine"},{value:"law",label:"Law"},{value:"education",label:"Education"},{value:"social-sciences",label:"Social Sciences"},{value:"mathematics",label:"Mathematics"},{value:"physics",label:"Physics"},{value:"chemistry",label:"Chemistry"},{value:"biology",label:"Biology"},{value:"economics",label:"Economics"},{value:"psychology",label:"Psychology"},{value:"history",label:"History"},{value:"philosophy",label:"Philosophy"},{value:"languages",label:"Languages & Literature"},{value:"architecture",label:"Architecture"},{value:"design",label:"Design & Arts"},{value:"music",label:"Music"},{value:"theater",label:"Theater & Drama"},{value:"journalism",label:"Journalism & Media"},{value:"public-health",label:"Public Health"},{value:"nursing",label:"Nursing"},{value:"pharmacy",label:"Pharmacy"},{value:"dentistry",label:"Dentistry"},{value:"veterinary",label:"Veterinary Medicine"},{value:"agriculture",label:"Agriculture"},{value:"forestry",label:"Forestry"},{value:"marine-sciences",label:"Marine Sciences"},{value:"geology",label:"Geology"},{value:"astronomy",label:"Astronomy"},{value:"other",label:"Other"}],m=(I,N)=>{n(k=>({...k,[I]:N})),r[I]&&i(k=>({...k,[I]:""}))},y=()=>{const I={};return nC(e.username)||(I.username="Username must be at least 3 characters long"),g1(e.email)||(I.email="Please enter a valid email address"),tC(e.password)||(I.password="Password must be at least 6 characters long"),e.password!==e.confirmPassword&&(I.confirmPassword="Passwords do not match"),e.role==="lecturer"&&!e.department&&(I.department="Department is required for lecturers"),i(I),Object.keys(I).length===0};return C("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4 transition-all duration-300",children:[g(kd,{position:"top-right"}),C("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 border border-gray-200 dark:border-gray-700",children:[C("div",{className:"text-center mb-8",children:[g("div",{className:"mx-auto w-16 h-16 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center mb-4",children:g(eC,{className:"w-8 h-8 text-white"})}),g("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Create Account"}),g("p",{className:"text-gray-600 dark:text-gray-400",children:"Join our campus resources management system"})]}),c&&C("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg flex items-center",children:[g(h1,{className:"w-5 h-5 text-green-500 mr-2"}),g("span",{className:"text-green-700 dark:text-green-400",children:c})]}),l&&C("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg flex items-center",children:[g(BA,{className:"w-5 h-5 text-red-500 mr-2"}),g("span",{className:"text-red-700 dark:text-red-400",children:l})]}),C("form",{onSubmit:async I=>{if(I.preventDefault(),!!y()){o(!0),u(""),h("");try{const N=await fe.register({username:e.username,email:e.email,password:e.password,role:e.role,department:e.department});h(`Registration successful! Welcome ${e.username}! Your account has been created in Firebase.`),localStorage.setItem("user",JSON.stringify(N.user)),localStorage.setItem("token",N.token),setTimeout(()=>{t("/dashboard")},2e3)}catch(N){console.error("Registration failed:",N);const k=N instanceof Error?N.message:"Registration failed. Please try again.";u(`Registration failed: ${k}`)}finally{o(!1)}}},className:"space-y-6",children:[g(ve,{label:"Username",type:"text",value:e.username,onChange:I=>m("username",I),error:r.username,placeholder:"Enter your username",required:!0}),g(ve,{label:"Email Address",type:"email",value:e.email,onChange:I=>m("email",I),error:r.email,placeholder:"Enter your email",required:!0}),g(ve,{label:"Role",type:"select",value:e.role,onChange:I=>m("role",I),error:r.role,options:[{value:"student",label:"Student"},{value:"lecturer",label:"Lecturer"}],required:!0}),e.role==="lecturer"&&g(ve,{label:"Department",type:"select",value:e.department,onChange:I=>m("department",I),error:r.department,options:f,required:!0}),g(ve,{label:"Password",type:"password",value:e.password,onChange:I=>m("password",I),error:r.password,placeholder:"Create a strong password",required:!0}),g(ve,{label:"Confirm Password",type:"password",value:e.confirmPassword,onChange:I=>m("confirmPassword",I),error:r.confirmPassword,placeholder:"Confirm your password",required:!0}),g(Te,{type:"submit",disabled:s,className:"w-full",children:s?"Creating Account...":"Create Account"})]}),g("div",{className:"mt-6 text-center",children:C("p",{className:"text-gray-600",children:["Already have an account?"," ",g(d1,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})})]})]})},tI=L.createContext(void 0),nI=()=>{const t=L.useContext(tI);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},eV=({children:t})=>{const[e,n]=L.useState(()=>localStorage.getItem("theme")||"light"),r=e==="dark";L.useEffect(()=>{localStorage.setItem("theme",e);const s=document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),s.style.transition="background-color 0.3s ease, color 0.3s ease"},[e]);const i=()=>{n(s=>s==="light"?"dark":"light")};return g(tI.Provider,{value:{theme:e,toggleTheme:i,isDark:r},children:t})},tV=({isOpen:t,onClose:e,onResourceAdded:n})=>{const[r,i]=L.useState({name:"",description:"",category:"",location:"",capacity:"",status:"available",equipment:"",maintenanceSchedule:""}),[s,o]=L.useState(!1),l=[{value:"Laboratory",label:"Laboratory"},{value:"Meeting Room",label:"Meeting Room"},{value:"Classroom",label:"Classroom"},{value:"Auditorium",label:"Auditorium"},{value:"Computer Lab",label:"Computer Lab"},{value:"Equipment",label:"Equipment"},{value:"Vehicle",label:"Vehicle"},{value:"Sports Facility",label:"Sports Facility"},{value:"Library",label:"Library"},{value:"Other",label:"Other"}],u=[{value:"available",label:"Available"},{value:"booked",label:"Booked"},{value:"maintenance",label:"Under Maintenance"},{value:"unavailable",label:"Unavailable"}],c=[{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"},{value:"Annually",label:"Annually"},{value:"As Needed",label:"As Needed"}],h=(m,y)=>{i(T=>({...T,[m]:y}))},f=async m=>{if(m.preventDefault(),!r.name||!r.description||!r.category||!r.location){se.error("Please fill in all required fields");return}o(!0);try{const y=r.equipment.split(",").map(T=>T.trim()).filter(T=>T.length>0);await fe.createResource({name:r.name,description:r.description,category:r.category,location:r.location,capacity:parseInt(r.capacity)||0,status:r.status,equipment:y,maintenanceSchedule:r.maintenanceSchedule}),se.success("Resource added successfully!"),n(),e(),i({name:"",description:"",category:"",location:"",capacity:"",status:"available",equipment:"",maintenanceSchedule:""})}catch(y){console.error("Error adding resource:",y),se.error("Failed to add resource. Please try again.")}finally{o(!1)}};return t?g("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm",children:C("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-gray-700",children:[C("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[C("div",{className:"flex items-center space-x-3",children:[g("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:g(ep,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),g("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Add New Resource"})]}),g("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 transition-colors",children:g(us,{className:"w-6 h-6"})})]}),C("form",{onSubmit:f,className:"p-6 space-y-6",children:[C("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g("div",{className:"md:col-span-2",children:g(ve,{label:"Resource Name *",type:"text",value:r.name,onChange:m=>h("name",m),placeholder:"Enter resource name",required:!0,icon:g(qi,{className:"w-4 h-4"})})}),g("div",{className:"md:col-span-2",children:C("div",{className:"space-y-2",children:[g("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description *"}),g("textarea",{value:r.description,onChange:m=>h("description",m.target.value),placeholder:"Enter resource description",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,required:!0})]})}),g("div",{children:g(ve,{label:"Category *",type:"select",value:r.category,onChange:m=>h("category",m),options:l,required:!0,icon:g(qi,{className:"w-4 h-4"})})}),g("div",{children:g(ve,{label:"Location *",type:"text",value:r.location,onChange:m=>h("location",m),placeholder:"Building, Room number",required:!0,icon:g(Ed,{className:"w-4 h-4"})})}),g("div",{children:g(ve,{label:"Capacity",type:"text",value:r.capacity,onChange:m=>h("capacity",m),placeholder:"Number of people/items",icon:g(bl,{className:"w-4 h-4"})})}),g("div",{children:g(ve,{label:"Status",type:"select",value:r.status,onChange:m=>h("status",m),options:u,icon:g(qi,{className:"w-4 h-4"})})}),g("div",{className:"md:col-span-2",children:g(ve,{label:"Equipment (comma-separated)",type:"text",value:r.equipment,onChange:m=>h("equipment",m),placeholder:"Computers, Projector, Whiteboard",icon:g(Bm,{className:"w-4 h-4"})})}),g("div",{className:"md:col-span-2",children:g(ve,{label:"Maintenance Schedule",type:"select",value:r.maintenanceSchedule,onChange:m=>h("maintenanceSchedule",m),options:c,icon:g(wd,{className:"w-4 h-4"})})})]}),C("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[g(Te,{type:"button",variant:"outline",onClick:e,disabled:s,children:"Cancel"}),g(Te,{type:"submit",disabled:s,className:"flex items-center space-x-2",children:s?C(hi,{children:[g("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g("span",{children:"Adding..."})]}):C(hi,{children:[g(ep,{className:"w-4 h-4"}),g("span",{children:"Add Resource"})]})})]})]})]})}):null},nV=({isOpen:t,onClose:e,onResourceUpdated:n,resource:r})=>{const[i,s]=L.useState({name:"",description:"",category:"",location:"",capacity:"",status:"available",equipment:"",maintenanceSchedule:""}),[o,l]=L.useState(!1),u=[{value:"Laboratory",label:"Laboratory"},{value:"Meeting Room",label:"Meeting Room"},{value:"Classroom",label:"Classroom"},{value:"Auditorium",label:"Auditorium"},{value:"Computer Lab",label:"Computer Lab"},{value:"Equipment",label:"Equipment"},{value:"Vehicle",label:"Vehicle"},{value:"Sports Facility",label:"Sports Facility"},{value:"Library",label:"Library"},{value:"Other",label:"Other"}],c=[{value:"available",label:"Available"},{value:"booked",label:"Booked"},{value:"maintenance",label:"Under Maintenance"},{value:"unavailable",label:"Unavailable"}],h=[{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"},{value:"Quarterly",label:"Quarterly"},{value:"Annually",label:"Annually"},{value:"As Needed",label:"As Needed"}];L.useEffect(()=>{var y;r&&s({name:r.name||"",description:r.description||"",category:r.category||"",location:r.location||"",capacity:((y=r.capacity)==null?void 0:y.toString())||"",status:r.status||"available",equipment:Array.isArray(r.equipment)?r.equipment.join(", "):"",maintenanceSchedule:r.maintenanceSchedule||""})},[r]);const f=(y,T)=>{s(I=>({...I,[y]:T}))},m=async y=>{if(y.preventDefault(),!r||!i.name||!i.description||!i.category||!i.location){se.error("Please fill in all required fields");return}l(!0);try{const T=i.equipment.split(",").map(I=>I.trim()).filter(I=>I.length>0);await fe.updateResource(r.id,{name:i.name,description:i.description,category:i.category,location:i.location,capacity:parseInt(i.capacity)||0,status:i.status,equipment:T,maintenanceSchedule:i.maintenanceSchedule}),se.success("Resource updated successfully!"),n(),e()}catch(T){console.error("Error updating resource:",T),se.error("Failed to update resource. Please try again.")}finally{l(!1)}};return!t||!r?null:g("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:C("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[C("div",{className:"flex items-center justify-between p-6 border-b",children:[C("div",{className:"flex items-center space-x-3",children:[g("div",{className:"p-2 bg-blue-100 rounded-lg",children:g(Zv,{className:"w-5 h-5 text-blue-600"})}),g("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Resource"})]}),g("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:g(us,{className:"w-6 h-6"})})]}),C("form",{onSubmit:m,className:"p-6 space-y-6",children:[C("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g("div",{className:"md:col-span-2",children:g(ve,{label:"Resource Name *",type:"text",value:i.name,onChange:y=>f("name",y),placeholder:"Enter resource name",required:!0,icon:g(qi,{className:"w-4 h-4"})})}),g("div",{className:"md:col-span-2",children:C("div",{className:"space-y-2",children:[g("label",{className:"block text-sm font-medium text-gray-700",children:"Description *"}),g("textarea",{value:i.description,onChange:y=>f("description",y.target.value),placeholder:"Enter resource description",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,required:!0})]})}),g("div",{children:g(ve,{label:"Category *",type:"select",value:i.category,onChange:y=>f("category",y),options:u,required:!0,icon:g(qi,{className:"w-4 h-4"})})}),g("div",{children:g(ve,{label:"Location *",type:"text",value:i.location,onChange:y=>f("location",y),placeholder:"Building, Room number",required:!0,icon:g(Ed,{className:"w-4 h-4"})})}),g("div",{children:g(ve,{label:"Capacity",type:"text",value:i.capacity,onChange:y=>f("capacity",y),placeholder:"Number of people/items",icon:g(bl,{className:"w-4 h-4"})})}),g("div",{children:g(ve,{label:"Status",type:"select",value:i.status,onChange:y=>f("status",y),options:c,icon:g(qi,{className:"w-4 h-4"})})}),g("div",{className:"md:col-span-2",children:g(ve,{label:"Equipment (comma-separated)",type:"text",value:i.equipment,onChange:y=>f("equipment",y),placeholder:"Computers, Projector, Whiteboard",icon:g(Bm,{className:"w-4 h-4"})})}),g("div",{className:"md:col-span-2",children:g(ve,{label:"Maintenance Schedule",type:"select",value:i.maintenanceSchedule,onChange:y=>f("maintenanceSchedule",y),options:h,icon:g(wd,{className:"w-4 h-4"})})})]}),C("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[g(Te,{type:"button",variant:"outline",onClick:e,disabled:o,children:"Cancel"}),g(Te,{type:"submit",disabled:o,className:"flex items-center space-x-2",children:o?C(hi,{children:[g("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g("span",{children:"Updating..."})]}):C(hi,{children:[g(Zv,{className:"w-4 h-4"}),g("span",{children:"Update Resource"})]})})]})]})]})})},rV=({isOpen:t,onClose:e,resource:n,currentUser:r,onBookingCreated:i})=>{const[s,o]=L.useState({startDate:"",startTime:"",endTime:"",purpose:"",attendees:"",notes:""}),[l,u]=L.useState({}),[c,h]=L.useState(!1),[f,m]=L.useState([]),[y,T]=L.useState(!1);L.useEffect(()=>{t&&(m([]),T(!1))},[t]);const I=(E,P)=>{o(U=>({...U,[E]:P})),l[E]&&u(U=>({...U,[E]:""})),["startDate","startTime","endTime"].includes(E)&&N()},N=async()=>{if(!n||!s.startDate||!s.startTime||!s.endTime){m([]);return}try{T(!0);const E=new Date(`${s.startDate}T${s.startTime}`),P=new Date(`${s.startDate}T${s.endTime}`),U=await fe.checkBookingConflicts(n.id,E.toISOString(),P.toISOString());m(U)}catch(E){console.error("Error checking conflicts:",E),m([])}finally{T(!1)}},k=()=>{const E={};if(s.startDate||(E.startDate="Start date is required"),s.startTime||(E.startTime="Start time is required"),s.endTime||(E.endTime="End time is required"),s.purpose||(E.purpose="Purpose is required"),s.startTime&&s.endTime){const P=new Date(`2000-01-01T${s.startTime}`);new Date(`2000-01-01T${s.endTime}`)<=P&&(E.endTime="End time must be after start time")}if(s.startDate){const P=new Date(s.startDate),U=new Date;U.setHours(0,0,0,0),P<U&&(E.startDate="Cannot book in the past")}return u(E),Object.keys(E).length===0},w=async E=>{if(E.preventDefault(),!(!k()||!n)){h(!0);try{const P=new Date(`${s.startDate}T${s.startTime}`),U=new Date(`${s.startDate}T${s.endTime}`);console.log("🔍 Checking for booking conflicts...");const j=await fe.checkBookingConflicts(n.id,P.toISOString(),U.toISOString());if(j.length>0){console.log("⚠️ Booking conflicts found:",j);const b=`⚠️ This resource is already booked for the selected time:

${j.map(x=>{const R=new Date(x.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),D=new Date(x.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),A=x.status==="approved"?"✅ Approved":"⏳ Pending";return`${R} - ${D} (${A})`}).join(`
`)}

Please choose a different time or date.`;se.error(b,{duration:8e3,style:{maxWidth:"500px",whiteSpace:"pre-line",fontSize:"14px"}}),h(!1);return}console.log("✅ No conflicts found, creating booking...");const S={userId:r.id,username:r.username,userEmail:r.email,userRole:r.role,resourceId:n.id,resourceName:n.name,resourceCategory:n.category,startTime:P.toISOString(),endTime:U.toISOString(),purpose:s.purpose,attendees:parseInt(s.attendees)||1,notes:s.notes,status:"pending",department:r.department||"General"};console.log("📝 Creating booking with user ID:",r.id),console.log("📝 Booking data:",S),await fe.createBooking(S),se.success("Booking created successfully!"),i(),e(),o({startDate:"",startTime:"",endTime:"",purpose:"",attendees:"",notes:""})}catch(P){console.error("Booking creation failed:",P),se.error(P.message||"Failed to create booking")}finally{h(!1)}}};return!t||!n?null:g("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm",children:C("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-gray-700",children:[C("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[C("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:["Book Resource: ",n.name]}),g("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400",children:g(us,{className:"w-6 h-6"})})]}),C("form",{onSubmit:w,className:"p-6 space-y-4",children:[C("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-4",children:[g("h3",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:"Resource Details"}),C("div",{className:"space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[C("p",{children:[g("strong",{children:"Name:"})," ",n.name]}),C("p",{children:[g("strong",{children:"Category:"})," ",n.category]}),C("p",{children:[g("strong",{children:"Location:"})," ",n.location]}),C("p",{children:[g("strong",{children:"Capacity:"})," ",n.capacity||"N/A"]})]})]}),C("div",{className:"grid grid-cols-2 gap-4",children:[g(ve,{label:"Start Date",type:"date",value:s.startDate,onChange:E=>I("startDate",E),error:l.startDate,required:!0}),g(ve,{label:"Start Time",type:"time",value:s.startTime,onChange:E=>I("startTime",E),error:l.startTime,required:!0})]}),C("div",{className:"grid grid-cols-2 gap-4",children:[g(ve,{label:"End Time",type:"time",value:s.endTime,onChange:E=>I("endTime",E),error:l.endTime,required:!0}),g(ve,{label:"Number of Attendees",type:"number",value:s.attendees,onChange:E=>I("attendees",E),placeholder:"1",min:"1",max:n.capacity||100})]}),y&&C("div",{className:"flex items-center space-x-2 text-blue-600 dark:text-blue-400",children:[g("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 dark:border-blue-400"}),g("span",{className:"text-sm",children:"Checking availability..."})]}),f.length>0&&!y&&C("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[C("div",{className:"flex items-center space-x-2 mb-2",children:[g("div",{className:"w-5 h-5 bg-red-100 rounded-full flex items-center justify-center",children:g("span",{className:"text-red-600 text-xs",children:"⚠️"})}),g("h4",{className:"text-sm font-medium text-red-800",children:"Time Conflict Detected"})]}),C("div",{className:"text-sm text-red-700 space-y-1",children:[g("p",{children:"This resource is already booked for the selected time:"}),f.map((E,P)=>{const U=new Date(E.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),j=new Date(E.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),S=E.status==="approved"?"✅ Approved":"⏳ Pending";return C("div",{className:"ml-4",children:["• ",U," - ",j," (",S,")"]},P)}),g("p",{className:"mt-2 font-medium",children:"Please choose a different time or date."})]})]}),g(ve,{label:"Purpose",type:"text",value:s.purpose,onChange:E=>I("purpose",E),error:l.purpose,placeholder:"e.g., Study session, Meeting, Lab work",required:!0}),C("div",{children:[g("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),g("textarea",{value:s.notes,onChange:E=>I("notes",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Any additional information..."})]}),C("div",{className:"flex space-x-3 pt-4",children:[g(Te,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:"Cancel"}),g(Te,{type:"submit",loading:c,disabled:f.length>0||y,className:"flex-1",children:f.length>0?"Time Conflict - Cannot Book":"Create Booking"})]})]})]})})},iV=({isOpen:t,onClose:e,booking:n,currentUser:r,onBookingUpdated:i})=>{const[s,o]=L.useState(!1);if(!t||!n)return null;const l=y=>{const T=new Date(y);return{date:T.toLocaleDateString(),time:T.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}},u=y=>{switch(y){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";case"cancelled":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},c=async()=>{if(window.confirm("Are you sure you want to cancel this booking?")){o(!0);try{await fe.updateBooking(n.id,{...n,status:"cancelled"}),se.success("Booking cancelled successfully"),i(),e()}catch(y){console.error("Failed to cancel booking:",y),se.error("Failed to cancel booking")}finally{o(!1)}}},h=()=>{var N;const y=new Date;return(new Date(n.startTime).getTime()-y.getTime())/(1e3*60*60)>2&&n.status!=="cancelled"&&n.status!=="rejected"&&(r.id===n.userId||((N=r.role)==null?void 0:N.toLowerCase())==="admin")},f=l(n.startTime),m=l(n.endTime);return g("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:C("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[C("div",{className:"flex items-center justify-between p-6 border-b",children:[g("h2",{className:"text-xl font-semibold text-gray-900",children:"Booking Details"}),g("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:g(us,{className:"w-6 h-6"})})]}),C("div",{className:"p-6 space-y-6",children:[C("div",{className:"flex items-center justify-between",children:[g("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${u(n.status)}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)}),C("span",{className:"text-sm text-gray-500",children:["ID: ",n.id.slice(-8)]})]}),C("div",{className:"bg-blue-50 rounded-lg p-4",children:[C("h3",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[g(Ed,{className:"w-5 h-5 mr-2 text-blue-600"}),"Resource Information"]}),C("div",{className:"space-y-2 text-sm",children:[C("p",{children:[g("strong",{children:"Name:"})," ",n.resourceName]}),C("p",{children:[g("strong",{children:"Category:"})," ",n.resourceCategory]}),C("p",{children:[g("strong",{children:"Department:"})," ",n.department]})]})]}),C("div",{className:"bg-gray-50 rounded-lg p-4",children:[C("h3",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[g(wd,{className:"w-5 h-5 mr-2 text-gray-600"}),"Booking Details"]}),C("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[C("div",{children:[g("p",{className:"text-gray-600",children:"Date"}),g("p",{className:"font-medium",children:f.date})]}),C("div",{children:[g("p",{className:"text-gray-600",children:"Start Time"}),g("p",{className:"font-medium",children:f.time})]}),C("div",{children:[g("p",{className:"text-gray-600",children:"End Time"}),g("p",{className:"font-medium",children:m.time})]}),C("div",{children:[g("p",{className:"text-gray-600",children:"Attendees"}),C("p",{className:"font-medium",children:[n.attendees," people"]})]})]})]}),C("div",{className:"space-y-4",children:[C("div",{children:[C("h3",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[g(HA,{className:"w-5 h-5 mr-2 text-gray-600"}),"Purpose"]}),g("p",{className:"text-gray-700 bg-gray-50 rounded p-3",children:n.purpose})]}),n.notes&&C("div",{children:[g("h3",{className:"font-medium text-gray-900 mb-2",children:"Additional Notes"}),g("p",{className:"text-gray-700 bg-gray-50 rounded p-3",children:n.notes})]})]}),C("div",{className:"bg-green-50 rounded-lg p-4",children:[C("h3",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[g(Dc,{className:"w-5 h-5 mr-2 text-green-600"}),"Booked By"]}),C("div",{className:"space-y-2 text-sm",children:[C("p",{children:[g("strong",{children:"Name:"})," ",n.username]}),C("p",{children:[g("strong",{children:"Email:"})," ",n.userEmail]}),C("p",{children:[g("strong",{children:"Role:"})," ",n.userRole]})]})]}),C("div",{className:"text-xs text-gray-500 space-y-1",children:[C("p",{children:["Created: ",new Date(n.createdAt).toLocaleString()]}),n.updatedAt&&n.updatedAt!==n.createdAt&&C("p",{children:["Last Updated: ",new Date(n.updatedAt).toLocaleString()]})]}),h()&&C("div",{className:"flex space-x-3 pt-4 border-t",children:[g(Te,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:"Close"}),g(Te,{type:"button",variant:"outline",onClick:c,loading:s,className:"flex-1 text-red-600 hover:text-red-700",children:"Cancel Booking"})]}),!h()&&g("div",{className:"flex justify-center pt-4 border-t",children:g(Te,{type:"button",variant:"outline",onClick:e,className:"px-8",children:"Close"})})]})]})})};var rI={exports:{}},sV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oV=sV,aV=oV;function iI(){}function sI(){}sI.resetWarningCache=iI;var lV=function(){function t(r,i,s,o,l,u){if(u!==aV){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:sI,resetWarningCache:iI};return n.PropTypes=n,n};rI.exports=lV();var uV=rI.exports;const F=nd(uV);function oI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=oI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Hd(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=oI(t))&&(r&&(r+=" "),r+=e);return r}const cV=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!dV(i,s)&&r||Object.defineProperty(t,n,s)},dV=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},hV=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},fV=(t,e)=>`/* Wrapped ${t}*/
${e}`,pV=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),mV=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),gV=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=fV.bind(null,r,e.toString());Object.defineProperty(i,"name",mV),Object.defineProperty(t,"toString",{...pV,value:i})},yV=(t,e,{ignoreNonConfigurable:n=!1}={})=>{const{name:r}=t;for(const i of Reflect.ownKeys(e))cV(t,e,i,n);return hV(t,e),gV(t,e,r),t};var vV=yV,Cp={exports:{}},_V=()=>{const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t};(function(t,e){var n=cu&&cu.__awaiter||function(o,l,u,c){return new(u||(u=Promise))(function(h,f){function m(I){try{T(c.next(I))}catch(N){f(N)}}function y(I){try{T(c.throw(I))}catch(N){f(N)}}function T(I){I.done?h(I.value):new u(function(N){N(I.value)}).then(m,y)}T((c=c.apply(o,l||[])).next())})},r=cu&&cu.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});const i=r(_V);function s(o,l="maxAge"){let u,c,h;const f=()=>n(this,void 0,void 0,function*(){if(u!==void 0)return;const T=I=>n(this,void 0,void 0,function*(){h=i.default();const N=I[1][l]-Date.now();if(N<=0){o.delete(I[0]),h.resolve();return}return u=I[0],c=setTimeout(()=>{o.delete(I[0]),h&&h.resolve()},N),typeof c.unref=="function"&&c.unref(),h.promise});try{for(const I of o)yield T(I)}catch{}u=void 0}),m=()=>{u=void 0,c!==void 0&&(clearTimeout(c),c=void 0),h!==void 0&&(h.reject(void 0),h=void 0)},y=o.set.bind(o);return o.set=(T,I)=>{o.has(T)&&o.delete(T);const N=y(T,I);return u&&u===T&&m(),f(),N},f(),o}e.default=s,t.exports=s,t.exports.default=s})(Cp,Cp.exports);var wV=Cp.exports;const EV=vV,TV=wV,Jh=new WeakMap,aI=new WeakMap,Xc=(t,{cacheKey:e,cache:n=new Map,maxAge:r}={})=>{typeof r=="number"&&TV(n);const i=function(...s){const o=e?e(s):s[0],l=n.get(o);if(l)return l.data;const u=t.apply(this,s);return n.set(o,{data:u,maxAge:r?Date.now()+r:Number.POSITIVE_INFINITY}),u};return EV(i,t,{ignoreNonConfigurable:!0}),aI.set(i,n),i};Xc.decorator=(t={})=>(e,n,r)=>{const i=e[n];if(typeof i!="function")throw new TypeError("The decorated value must be a function");delete r.value,delete r.writable,r.get=function(){if(!Jh.has(this)){const s=Xc(i,t);return Jh.set(this,s),s}return Jh.get(this)}};Xc.clear=t=>{const e=aI.get(t);if(!e)throw new TypeError("Can't clear a function that was not memoized!");if(typeof e.clear!="function")throw new TypeError("The cache Map can't be cleared!");e.clear()};var kV=Xc;const lI=nd(kV);function IV(t){return typeof t=="string"}function SV(t,e,n){return n.indexOf(t)===e}function bV(t){return t.toLowerCase()===t}function b_(t){return t.indexOf(",")===-1?t:t.split(",")}function Np(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return Np(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return Np(n)}if(t.indexOf("-")===-1||!bV(t))return t;var i=t.split("-"),s=i[0],o=i[1],l=o===void 0?"":o;return"".concat(s,"-").concat(l.toUpperCase())}function xV(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,s=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var l=navigator.languages||[],u=[],c=0,h=l;c<h.length;c++){var f=h[c];u=u.concat(b_(f))}var m=navigator.language,y=m&&b_(m);o=o.concat(u,y)}return r&&o.push(s),o.filter(IV).map(Np).filter(SV)}var AV=lI(xV,{cacheKey:JSON.stringify});function CV(t){return AV(t)[0]||null}var uI=lI(CV,{cacheKey:JSON.stringify});function Rr(t,e,n){return function(i,s){s===void 0&&(s=n);var o=t(i)+s;return e(o)}}function jl(t){return function(n){return new Date(t(n).getTime()-1)}}function $l(t,e){return function(r){return[t(r),e(r)]}}function Ve(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;var e=parseInt(t,10);if(typeof t=="string"&&!isNaN(e))return e;throw new Error("Failed to get year from date: ".concat(t,"."))}function xi(t){if(t instanceof Date)return t.getMonth();throw new Error("Failed to get month from date: ".concat(t,"."))}function Gd(t){if(t instanceof Date)return t.getDate();throw new Error("Failed to get year from date: ".concat(t,"."))}function Co(t){var e=Ve(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var NV=Rr(Ve,Co,-100),cI=Rr(Ve,Co,100),Fg=jl(cI),RV=Rr(Ve,Fg,-100),dI=$l(Co,Fg);function Ai(t){var e=Ve(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}var hI=Rr(Ve,Ai,-10),Bg=Rr(Ve,Ai,10),Kd=jl(Bg),fI=Rr(Ve,Kd,-10),pI=$l(Ai,Kd);function No(t){var e=Ve(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}var mI=Rr(Ve,No,-1),jg=Rr(Ve,No,1),Qd=jl(jg),gI=Rr(Ve,Qd,-1),PV=$l(No,Qd);function $g(t,e){return function(r,i){i===void 0&&(i=e);var s=Ve(r),o=xi(r)+i,l=new Date;return l.setFullYear(s,o,1),l.setHours(0,0,0,0),t(l)}}function ys(t){var e=Ve(t),n=xi(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}var yI=$g(ys,-1),zg=$g(ys,1),zl=jl(zg),vI=$g(zl,-1),DV=$l(ys,zl);function OV(t,e){return function(r,i){i===void 0&&(i=e);var s=Ve(r),o=xi(r),l=Gd(r)+i,u=new Date;return u.setFullYear(s,o,l),u.setHours(0,0,0,0),t(u)}}function Wl(t){var e=Ve(t),n=xi(t),r=Gd(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}var LV=OV(Wl,1),Wg=jl(LV),VV=$l(Wl,Wg);function _I(t){return Gd(zl(t))}var da,De={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},zs={ARABIC:"Arabic",HEBREW:"Hebrew",ISO_8601:"ISO 8601",US:"US"},MV=(da={},da[De.GREGORY]=["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],da[De.HEBREW]=["he","he-IL"],da[De.ISLAMIC]=["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"],da),qg=[0,1,2,3,4,5,6],Zh=new Map;function UV(t){return function(n,r){var i=n||uI();Zh.has(i)||Zh.set(i,new Map);var s=Zh.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}function FV(t){var e=new Date(t);return new Date(e.setHours(12))}function vs(t){return function(e,n){return UV(t)(e,FV(n))}}var BV={day:"numeric"},jV={day:"numeric",month:"long",year:"numeric"},$V={month:"long"},zV={month:"long",year:"numeric"},WV={weekday:"short"},qV={weekday:"long"},HV={year:"numeric"},GV=vs(BV),KV=vs(jV),QV=vs($V),wI=vs(zV),YV=vs(WV),XV=vs(qV),Yd=vs(HV),JV=qg[0],ZV=qg[5],x_=qg[6];function pl(t,e){e===void 0&&(e=De.ISO_8601);var n=t.getDay();switch(e){case De.ISO_8601:return(n+6)%7;case De.ISLAMIC:return(n+1)%7;case De.HEBREW:case De.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function eM(t){var e=Co(t);return Ve(e)}function tM(t){var e=Ai(t);return Ve(e)}function Rp(t,e){e===void 0&&(e=De.ISO_8601);var n=Ve(t),r=xi(t),i=t.getDate()-pl(t,e);return new Date(n,r,i)}function nM(t,e){e===void 0&&(e=De.ISO_8601);var n=e===De.GREGORY?De.GREGORY:De.ISO_8601,r=Rp(t,e),i=Ve(t)+1,s,o;do s=new Date(i,0,n===De.ISO_8601?4:1),o=Rp(s,e),i-=1;while(t<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function Ki(t,e){switch(t){case"century":return Co(e);case"decade":return Ai(e);case"year":return No(e);case"month":return ys(e);case"day":return Wl(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function rM(t,e){switch(t){case"century":return NV(e);case"decade":return hI(e);case"year":return mI(e);case"month":return yI(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function EI(t,e){switch(t){case"century":return cI(e);case"decade":return Bg(e);case"year":return jg(e);case"month":return zg(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function iM(t,e){switch(t){case"decade":return hI(e,-100);case"year":return mI(e,-10);case"month":return yI(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function sM(t,e){switch(t){case"decade":return Bg(e,100);case"year":return jg(e,10);case"month":return zg(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function TI(t,e){switch(t){case"century":return Fg(e);case"decade":return Kd(e);case"year":return Qd(e);case"month":return zl(e);case"day":return Wg(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function oM(t,e){switch(t){case"century":return RV(e);case"decade":return fI(e);case"year":return gI(e);case"month":return vI(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function aM(t,e){switch(t){case"decade":return fI(e,-100);case"year":return gI(e,-10);case"month":return vI(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function A_(t,e){switch(t){case"century":return dI(e);case"decade":return pI(e);case"year":return PV(e);case"month":return DV(e);case"day":return VV(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function lM(t,e,n){var r=[e,n].sort(function(i,s){return i.getTime()-s.getTime()});return[Ki(t,r[0]),TI(t,r[1])]}function kI(t,e,n){return e===void 0&&(e=Yd),n.map(function(r){return e(t,r)}).join(" – ")}function uM(t,e,n){return kI(t,e,dI(n))}function II(t,e,n){return kI(t,e,pI(n))}function cM(t){return t.getDay()===new Date().getDay()}function SI(t,e){e===void 0&&(e=De.ISO_8601);var n=t.getDay();switch(e){case De.ISLAMIC:case De.HEBREW:return n===ZV||n===x_;case De.ISO_8601:case De.GREGORY:return n===x_||n===JV;default:throw new Error("Unsupported calendar type.")}}var $n="react-calendar__navigation";function dM(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?wI:r,s=t.formatYear,o=s===void 0?Yd:s,l=t.locale,u=t.maxDate,c=t.minDate,h=t.navigationAriaLabel,f=h===void 0?"":h,m=t.navigationAriaLive,y=t.navigationLabel,T=t.next2AriaLabel,I=T===void 0?"":T,N=t.next2Label,k=N===void 0?"»":N,w=t.nextAriaLabel,E=w===void 0?"":w,P=t.nextLabel,U=P===void 0?"›":P,j=t.prev2AriaLabel,S=j===void 0?"":j,_=t.prev2Label,b=_===void 0?"«":_,x=t.prevAriaLabel,R=x===void 0?"":x,D=t.prevLabel,A=D===void 0?"‹":D,je=t.setActiveStartDate,qt=t.showDoubleView,Ge=t.view,Ot=t.views,q=Ot.indexOf(Ge)>0,X=Ge!=="century",Q=rM(Ge,e),ce=X?iM(Ge,e):void 0,ae=EI(Ge,e),we=X?sM(Ge,e):void 0,it=function(){if(Q.getFullYear()<0)return!0;var xe=oM(Ge,e);return c&&c>=xe}(),Lt=X&&function(){if(ce.getFullYear()<0)return!0;var xe=aM(Ge,e);return c&&c>=xe}(),kt=u&&u<ae,st=X&&u&&u<we;function nr(){je(Q,"prev")}function en(){je(ce,"prev2")}function Dn(){je(ae,"next")}function On(){je(we,"next2")}function Ln(xe){var hn=function(){switch(Ge){case"century":return uM(l,o,xe);case"decade":return II(l,o,xe);case"year":return o(l,xe);case"month":return i(l,xe);default:throw new Error("Invalid view: ".concat(Ge,"."))}}();return y?y({date:xe,label:hn,locale:l||uI()||void 0,view:Ge}):hn}function Vn(){var xe="".concat($n,"__label");return Y.createElement("button",{"aria-label":f,"aria-live":m,className:xe,disabled:!q,onClick:n,style:{flexGrow:1},type:"button"},Y.createElement("span",{className:"".concat(xe,"__labelText ").concat(xe,"__labelText--from")},Ln(e)),qt?Y.createElement(Y.Fragment,null,Y.createElement("span",{className:"".concat(xe,"__divider")}," – "),Y.createElement("span",{className:"".concat(xe,"__labelText ").concat(xe,"__labelText--to")},Ln(ae))):null)}return Y.createElement("div",{className:$n},b!==null&&X?Y.createElement("button",{"aria-label":S,className:"".concat($n,"__arrow ").concat($n,"__prev2-button"),disabled:Lt,onClick:en,type:"button"},b):null,A!==null&&Y.createElement("button",{"aria-label":R,className:"".concat($n,"__arrow ").concat($n,"__prev-button"),disabled:it,onClick:nr,type:"button"},A),Vn(),U!==null&&Y.createElement("button",{"aria-label":E,className:"".concat($n,"__arrow ").concat($n,"__next-button"),disabled:kt,onClick:Dn,type:"button"},U),k!==null&&X?Y.createElement("button",{"aria-label":I,className:"".concat($n,"__arrow ").concat($n,"__next2-button"),disabled:st,onClick:On,type:"button"},k):null)}var Ws=globalThis&&globalThis.__assign||function(){return Ws=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ws.apply(this,arguments)},hM=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function C_(t){return"".concat(t,"%")}function Hg(t){var e=t.children,n=t.className,r=t.count,i=t.direction,s=t.offset,o=t.style,l=t.wrap,u=hM(t,["children","className","count","direction","offset","style","wrap"]);return Y.createElement("div",Ws({className:n,style:Ws({display:"flex",flexDirection:i,flexWrap:l?"wrap":"nowrap"},o)},u),Y.Children.map(e,function(c,h){var f=s&&h===0?C_(100*s/r):null;return Y.cloneElement(c,Ws(Ws({},c.props),{style:{flexBasis:C_(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:f,marginInlineStart:f,marginInlineEnd:0}}))}))}var fM=function(){},pM=fM;const mM=nd(pM);var bs;function gM(t,e,n){return e&&e>t?e:n&&n<t?n:t}function ml(t,e){return e[0]<=t&&e[1]>=t}function yM(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function bI(t,e){return ml(t[0],e)||ml(t[1],e)}function N_(t,e,n){var r=bI(e,t),i=[];if(r){i.push(n);var s=ml(t[0],e),o=ml(t[1],e);s&&i.push("".concat(n,"Start")),o&&i.push("".concat(n,"End")),s&&o&&i.push("".concat(n,"BothEnds"))}return i}function vM(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function _M(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",s=[i];if(!n)return s;var o=new Date,l=function(){if(Array.isArray(n))return n;var y=t.dateType;if(!y)throw new Error("dateType is required when date is not an array of two dates");return A_(y,n)}();if(ml(o,l)&&s.push("".concat(i,"--now")),!e||!vM(e))return s;var u=function(){if(Array.isArray(e))return e;var y=t.valueType;if(!y)throw new Error("valueType is required when value is not an array of two dates");return A_(y,e)}();yM(u,l)?s.push("".concat(i,"--active")):bI(u,l)&&s.push("".concat(i,"--hasActive"));var c=N_(u,l,"".concat(i,"--range"));s.push.apply(s,c);var h=Array.isArray(e)?e:[e];if(r&&h.length===1){var f=r>u[0]?[u[0],r]:[r,u[0]],m=N_(f,l,"".concat(i,"--hover"));s.push.apply(s,m)}return s}var wM=(bs={},bs[zs.ARABIC]=De.ISLAMIC,bs[zs.HEBREW]=De.HEBREW,bs[zs.ISO_8601]=De.ISO_8601,bs[zs.US]=De.GREGORY,bs);function EM(t){return t!==void 0&&t in zs}var R_=!1;function Xd(t){if(EM(t)){var e=wM[t];return mM(R_,'Specifying calendarType="'.concat(t,'" is deprecated. Use calendarType="').concat(e,'" instead.')),R_=!0,e}return t}function Jd(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,s=t.dateType,o=t.end,l=t.hover,u=t.offset,c=t.renderTile,h=t.start,f=t.step,m=f===void 0?1:f,y=t.value,T=t.valueType,I=[],N=h;N<=o;N+=m){var k=i(N);I.push(c({classes:_M({date:k,dateType:s,hover:l,value:y,valueType:T}),date:k}))}return Y.createElement(Hg,{className:e,count:r,offset:u,wrap:!0},I)}function Zd(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,s=t.formatAbbr,o=t.locale,l=t.maxDate,u=t.maxDateTransform,c=t.minDate,h=t.minDateTransform,f=t.onClick,m=t.onMouseOver,y=t.style,T=t.tileClassName,I=t.tileContent,N=t.tileDisabled,k=t.view,w=L.useMemo(function(){var P={activeStartDate:e,date:i,view:k};return typeof T=="function"?T(P):T},[e,i,T,k]),E=L.useMemo(function(){var P={activeStartDate:e,date:i,view:k};return typeof I=="function"?I(P):I},[e,i,I,k]);return Y.createElement("button",{className:Hd(r,w),disabled:c&&h(c)>i||l&&u(l)<i||N&&N({activeStartDate:e,date:i,view:k}),onClick:f?function(P){return f(i,P)}:void 0,onFocus:m?function(){return m(i)}:void 0,onMouseOver:m?function(){return m(i)}:void 0,style:y,type:"button"},s?Y.createElement("abbr",{"aria-label":s(o,i)},n):n,E)}var Pp=globalThis&&globalThis.__assign||function(){return Pp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Pp.apply(this,arguments)},TM=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},ef="react-calendar__century-view__decades__decade";function kM(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,s=i===void 0?Yd:i,o=TM(t,["classes","currentCentury","formatYear"]),l=o.date,u=o.locale,c=[];return n&&c.push.apply(c,n),ef&&c.push(ef),Co(l).getFullYear()!==r&&c.push("".concat(ef,"--neighboringCentury")),Y.createElement(Zd,Pp({},o,{classes:c,maxDateTransform:Kd,minDateTransform:Ai,view:"century"}),II(u,s,l))}var Dp=globalThis&&globalThis.__assign||function(){return Dp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Dp.apply(this,arguments)},P_=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function IM(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,s=t.valueType,o=P_(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),l=eM(e),u=l+(r?119:99);return Y.createElement(Jd,{className:"react-calendar__century-view__decades",dateTransform:Ai,dateType:"decade",end:u,hover:n,renderTile:function(c){var h=c.date,f=P_(c,["date"]);return Y.createElement(kM,Dp({key:h.getTime()},o,f,{activeStartDate:e,currentCentury:l,date:h}))},start:l,step:10,value:i,valueType:s})}var D_=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},SM=Object.values(De),bM=Object.values(zs),Op=["century","decade","year","month"],xI=F.oneOf(D_(D_([],SM,!0),bM,!0)),Jc=F.oneOfType([F.string,F.arrayOf(F.string)]),Gg=function(e,n,r){var i=e,s=n,o=i[s];if(!o)return null;if(!(o instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(r,"`, expected instance of `Date`."));var l=e.maxDate;return l&&o>l?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(r,"`, minDate cannot be larger than maxDate.")):null},Kg=function(e,n,r){var i=e,s=n,o=i[s];if(!o)return null;if(!(o instanceof Date))return new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(r,"`, expected instance of `Date`."));var l=e.minDate;return l&&o<l?new Error("Invalid prop `".concat(n,"` of type `").concat(typeof o,"` supplied to `").concat(r,"`, maxDate cannot be smaller than minDate.")):null},xM=F.oneOfType([F.func,F.exact({current:F.any})]),AM=F.arrayOf(F.oneOfType([F.instanceOf(Date),F.oneOf([null])]).isRequired),CM=F.oneOfType([F.instanceOf(Date),F.oneOf([null]),AM]);F.arrayOf(F.oneOf(Op));var Zc=function(e,n,r){var i=e,s=n,o=i[s];return o!==void 0&&(typeof o!="string"||Op.indexOf(o)===-1)?new Error("Invalid prop `".concat(n,"` of value `").concat(o,"` supplied to `").concat(r,"`, expected one of [").concat(Op.map(function(l){return'"'.concat(l,'"')}).join(", "),"].")):null};Zc.isRequired=function(e,n,r,i,s){var o=e,l=n,u=o[l];return u?Zc(e,n,r):new Error("The prop `".concat(n,"` is marked as required in `").concat(r,"`, but its value is `").concat(u,"`."))};var NM=function(t){return F.arrayOf(t)},eh={activeStartDate:F.instanceOf(Date).isRequired,hover:F.instanceOf(Date),locale:F.string,maxDate:Kg,minDate:Gg,onClick:F.func,onMouseOver:F.func,tileClassName:F.oneOfType([F.func,Jc]),tileContent:F.oneOfType([F.func,F.node]),value:CM,valueType:F.oneOf(["century","decade","year","month","day"]).isRequired};F.instanceOf(Date).isRequired,F.arrayOf(F.string.isRequired).isRequired,F.instanceOf(Date).isRequired,F.string,F.func,F.func,F.objectOf(F.oneOfType([F.string,F.number])),F.oneOfType([F.func,Jc]),F.oneOfType([F.func,F.node]),F.func;var gl=globalThis&&globalThis.__assign||function(){return gl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gl.apply(this,arguments)},AI=function(e){function n(){return Y.createElement(IM,gl({},e))}return Y.createElement("div",{className:"react-calendar__century-view"},n())};AI.propTypes=gl(gl({},eh),{showNeighboringCentury:F.bool});const RM=AI;var Lp=globalThis&&globalThis.__assign||function(){return Lp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lp.apply(this,arguments)},PM=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},tf="react-calendar__decade-view__years__year";function DM(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,s=i===void 0?Yd:i,o=PM(t,["classes","currentDecade","formatYear"]),l=o.date,u=o.locale,c=[];return n&&c.push.apply(c,n),tf&&c.push(tf),Ai(l).getFullYear()!==r&&c.push("".concat(tf,"--neighboringDecade")),Y.createElement(Zd,Lp({},o,{classes:c,maxDateTransform:Qd,minDateTransform:No,view:"decade"}),s(u,l))}var Vp=globalThis&&globalThis.__assign||function(){return Vp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Vp.apply(this,arguments)},O_=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function OM(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,s=t.valueType,o=O_(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),l=tM(e),u=l+(r?11:9);return Y.createElement(Jd,{className:"react-calendar__decade-view__years",dateTransform:No,dateType:"year",end:u,hover:n,renderTile:function(c){var h=c.date,f=O_(c,["date"]);return Y.createElement(DM,Vp({key:h.getTime()},o,f,{activeStartDate:e,currentDecade:l,date:h}))},start:l,value:i,valueType:s})}var yl=globalThis&&globalThis.__assign||function(){return yl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},yl.apply(this,arguments)},CI=function(e){function n(){return Y.createElement(OM,yl({},e))}return Y.createElement("div",{className:"react-calendar__decade-view"},n())};CI.propTypes=yl(yl({},eh),{showNeighboringDecade:F.bool});const LM=CI;var Mp=globalThis&&globalThis.__assign||function(){return Mp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Mp.apply(this,arguments)},VM=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},L_=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},MM="react-calendar__year-view__months__month";function UM(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?QV:r,s=t.formatMonthYear,o=s===void 0?wI:s,l=VM(t,["classes","formatMonth","formatMonthYear"]),u=l.date,c=l.locale;return Y.createElement(Zd,Mp({},l,{classes:L_(L_([],n,!0),[MM],!1),formatAbbr:o,maxDateTransform:zl,minDateTransform:ys,view:"year"}),i(c,u))}var Up=globalThis&&globalThis.__assign||function(){return Up=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Up.apply(this,arguments)},V_=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function FM(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,s=V_(t,["activeStartDate","hover","value","valueType"]),o=0,l=11,u=Ve(e);return Y.createElement(Jd,{className:"react-calendar__year-view__months",dateTransform:function(c){var h=new Date;return h.setFullYear(u,c,1),ys(h)},dateType:"month",end:l,hover:n,renderTile:function(c){var h=c.date,f=V_(c,["date"]);return Y.createElement(UM,Up({key:h.getTime()},s,f,{activeStartDate:e,date:h}))},start:o,value:r,valueType:i})}var ed=globalThis&&globalThis.__assign||function(){return ed=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ed.apply(this,arguments)},NI=function(e){function n(){return Y.createElement(FM,ed({},e))}return Y.createElement("div",{className:"react-calendar__year-view"},n())};NI.propTypes=ed({},eh);const BM=NI;var Fp=globalThis&&globalThis.__assign||function(){return Fp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fp.apply(this,arguments)},jM=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Vu="react-calendar__month-view__days__day";function $M(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,s=t.formatDay,o=s===void 0?GV:s,l=t.formatLongDate,u=l===void 0?KV:l,c=jM(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),h=Xd(e),f=c.date,m=c.locale,y=[];return r&&y.push.apply(y,r),Vu&&y.push(Vu),SI(f,h)&&y.push("".concat(Vu,"--weekend")),f.getMonth()!==i&&y.push("".concat(Vu,"--neighboringMonth")),Y.createElement(Zd,Fp({},c,{classes:y,formatAbbr:u,maxDateTransform:Wg,minDateTransform:Wl,view:"month"}),o(m,f))}var Bp=globalThis&&globalThis.__assign||function(){return Bp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bp.apply(this,arguments)},M_=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function zM(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,s=t.showNeighboringMonth,o=t.value,l=t.valueType,u=M_(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=Xd(n),h=Ve(e),f=xi(e),m=i||s,y=pl(e,c),T=m?0:y,I=(m?-y:0)+1,N=function(){if(i)return I+6*7-1;var k=_I(e);if(s){var w=new Date;w.setFullYear(h,f,k),w.setHours(0,0,0,0);var E=7-pl(w,c)-1;return k+E}return k}();return Y.createElement(Jd,{className:"react-calendar__month-view__days",count:7,dateTransform:function(k){var w=new Date;return w.setFullYear(h,f,k),Wl(w)},dateType:"day",hover:r,end:N,renderTile:function(k){var w=k.date,E=M_(k,["date"]);return Y.createElement($M,Bp({key:w.getTime()},u,E,{activeStartDate:e,calendarType:n,currentMonthIndex:f,date:w}))},offset:T,start:I,value:o,valueType:l})}var RI="react-calendar__month-view__weekdays",nf="".concat(RI,"__weekday");function WM(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?YV:n,i=t.formatWeekday,s=i===void 0?XV:i,o=t.locale,l=t.onMouseLeave,u=Xd(e),c=new Date,h=ys(c),f=Ve(h),m=xi(h),y=[],T=1;T<=7;T+=1){var I=new Date(f,m,T-pl(h,u)),N=s(o,I);y.push(Y.createElement("div",{key:T,className:Hd(nf,cM(I)&&"".concat(nf,"--current"),SI(I,u)&&"".concat(nf,"--weekend"))},Y.createElement("abbr",{"aria-label":N,title:N},r(o,I).replace(".",""))))}return Y.createElement(Hg,{className:RI,count:7,onFocus:l,onMouseOver:l},y)}var td=globalThis&&globalThis.__assign||function(){return td=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},td.apply(this,arguments)},U_=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},F_="react-calendar__tile";function qM(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=Y.createElement("span",null,n);if(e){var i=t.date,s=t.onClickWeekNumber,o=t.weekNumber,l=U_(t,["date","onClickWeekNumber","weekNumber"]);return Y.createElement("button",td({},l,{className:F_,onClick:function(u){return s(o,i,u)},type:"button"}),r)}else{t.date,t.onClickWeekNumber,t.weekNumber;var l=U_(t,["date","onClickWeekNumber","weekNumber"]);return Y.createElement("div",td({},l,{className:F_}),r)}}function HM(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,o=Xd(n),l=function(){if(s)return 6;var h=_I(e),f=pl(e,o),m=h-(7-f);return 1+Math.ceil(m/7)}(),u=function(){for(var h=Ve(e),f=xi(e),m=Gd(e),y=[],T=0;T<l;T+=1)y.push(Rp(new Date(h,f,m+T*7),o));return y}(),c=u.map(function(h){return nM(h,o)});return Y.createElement(Hg,{className:"react-calendar__month-view__weekNumbers",count:l,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0}},c.map(function(h,f){var m=u[f];if(!m)throw new Error("date is not defined");return Y.createElement(qM,{key:h,date:m,onClickWeekNumber:r,weekNumber:h})}))}var vl=globalThis&&globalThis.__assign||function(){return vl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vl.apply(this,arguments)},GM=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function KM(t){if(t)for(var e=0,n=Object.entries(MV);e<n.length;e++){var r=n[e],i=r[0],s=r[1];if(s.includes(t))return i}return De.ISO_8601}var PI=function(e){var n=e.activeStartDate,r=e.locale,i=e.onMouseLeave,s=e.showFixedNumberOfWeeks,o=e.calendarType,l=o===void 0?KM(r):o,u=e.formatShortWeekday,c=e.formatWeekday,h=e.onClickWeekNumber,f=e.showWeekNumbers,m=GM(e,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function y(){return Y.createElement(WM,{calendarType:l,formatShortWeekday:u,formatWeekday:c,locale:r,onMouseLeave:i})}function T(){return f?Y.createElement(HM,{activeStartDate:n,calendarType:l,onClickWeekNumber:h,onMouseLeave:i,showFixedNumberOfWeeks:s}):null}function I(){return Y.createElement(zM,vl({calendarType:l},m))}var N="react-calendar__month-view";return Y.createElement("div",{className:Hd(N,f?"".concat(N,"--weekNumbers"):"")},Y.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},T(),Y.createElement("div",{style:{flexGrow:1,width:"100%"}},y(),I())))};PI.propTypes=vl(vl({},eh),{calendarType:xI,formatDay:F.func,formatLongDate:F.func,formatShortWeekday:F.func,formatWeekday:F.func,onClickWeekNumber:F.func,onMouseLeave:F.func,showFixedNumberOfWeeks:F.bool,showNeighboringMonth:F.bool,showWeekNumbers:F.bool});const QM=PI;var qs=globalThis&&globalThis.__assign||function(){return qs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qs.apply(this,arguments)},Mu="react-calendar",no=["century","decade","year","month"],YM=["decade","year","month","day"],Qg=new Date;Qg.setFullYear(1,0,1);Qg.setHours(0,0,0,0);var XM=new Date(864e13);function ka(t){return t instanceof Date?t:new Date(t)}function DI(t,e){return no.slice(no.indexOf(t),no.indexOf(e)+1)}function JM(t,e,n){var r=DI(e,n);return r.indexOf(t)!==-1}function Yg(t,e,n){return t&&JM(t,e,n)?t:n}function OI(t){var e=no.indexOf(t);return YM[e]}function ZM(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=ka(n);if(isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function LI(t,e){var n=t.value,r=t.minDate,i=t.maxDate,s=t.maxDetail,o=ZM(n,e);if(!o)return null;var l=OI(s),u=function(){switch(e){case 0:return Ki(l,o);case 1:return TI(l,o);default:throw new Error("Invalid index value: ".concat(e))}}();return gM(u,r,i)}var Xg=function(t){return LI(t,0)},VI=function(t){return LI(t,1)},eU=function(t){return[Xg,VI].map(function(e){return e(t)})};function MI(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,s=t.value,o=t.view,l=Yg(o,i,n),u=Xg({value:s,minDate:r,maxDate:e,maxDetail:n})||new Date;return Ki(l,u)}function tU(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,s=t.maxDate,o=t.maxDetail,l=t.minDate,u=t.minDetail,c=t.value,h=t.view,f=Yg(h,u,o),m=e||n;return m?Ki(f,m):MI({maxDate:s,maxDetail:o,minDate:l,minDetail:u,value:c||r,view:h||i})}function rf(t){return t&&(!Array.isArray(t)||t.length===1)}function Uu(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var UI=L.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,s=e.calendarType,o=e.className,l=e.defaultActiveStartDate,u=e.defaultValue,c=e.defaultView,h=e.formatDay,f=e.formatLongDate,m=e.formatMonth,y=e.formatMonthYear,T=e.formatShortWeekday,I=e.formatWeekday,N=e.formatYear,k=e.goToRangeStartOnSelect,w=k===void 0?!0:k,E=e.inputRef,P=e.locale,U=e.maxDate,j=U===void 0?XM:U,S=e.maxDetail,_=S===void 0?"month":S,b=e.minDate,x=b===void 0?Qg:b,R=e.minDetail,D=R===void 0?"century":R,A=e.navigationAriaLabel,je=e.navigationAriaLive,qt=e.navigationLabel,Ge=e.next2AriaLabel,Ot=e.next2Label,q=e.nextAriaLabel,X=e.nextLabel,Q=e.onActiveStartDateChange,ce=e.onChange,ae=e.onClickDay,we=e.onClickDecade,it=e.onClickMonth,Lt=e.onClickWeekNumber,kt=e.onClickYear,st=e.onDrillDown,nr=e.onDrillUp,en=e.onViewChange,Dn=e.prev2AriaLabel,On=e.prev2Label,Ln=e.prevAriaLabel,Vn=e.prevLabel,xe=e.returnValue,hn=xe===void 0?"start":xe,ot=e.selectRange,Mn=e.showDoubleView,Ci=e.showFixedNumberOfWeeks,M=e.showNavigation,ee=M===void 0?!0:M,ye=e.showNeighboringCentury,tn=e.showNeighboringDecade,En=e.showNeighboringMonth,rr=En===void 0?!0:En,Ro=e.showWeekNumbers,Po=e.tileClassName,at=e.tileContent,pt=e.tileDisabled,Pr=e.value,Do=e.view,Oo=L.useState(l),th=Oo[0],Un=Oo[1],Lo=L.useState(null),ql=Lo[0],_s=Lo[1],Hl=L.useState(Array.isArray(u)?u.map(function(ie){return ie!==null?ka(ie):null}):u!=null?ka(u):null),Vo=Hl[0],Mo=Hl[1],Uo=L.useState(c),Gl=Uo[0],Dr=Uo[1],lt=r||th||tU({activeStartDate:r,defaultActiveStartDate:l,defaultValue:u,defaultView:c,maxDate:j,maxDetail:_,minDate:x,minDetail:D,value:Pr,view:Do}),ut=function(){var ie=function(){return ot&&rf(Vo)?Vo:Pr!==void 0?Pr:Vo}();return ie?Array.isArray(ie)?ie.map(function(Se){return Se!==null?ka(Se):null}):ie!==null?ka(ie):null:null}(),fn=OI(_),Ae=Yg(Do||Gl,D,_),Vt=DI(D,_),Kl=ot?ql:null,ir=Vt.indexOf(Ae)<Vt.length-1,Fo=Vt.indexOf(Ae)>0,ct=L.useCallback(function(ie){var Se=function(){switch(hn){case"start":return Xg;case"end":return VI;case"range":return eU;default:throw new Error("Invalid returnValue.")}}();return Se({maxDate:j,maxDetail:_,minDate:x,value:ie})},[j,_,x,hn]),ws=L.useCallback(function(ie,Se){Un(ie);var Ee={action:Se,activeStartDate:ie,value:ut,view:Ae};Q&&!Uu(lt,ie)&&Q(Ee)},[lt,Q,ut,Ae]),Fn=L.useCallback(function(ie,Se){var Ee=function(){switch(Ae){case"century":return we;case"decade":return kt;case"year":return it;case"month":return ae;default:throw new Error("Invalid view: ".concat(Ae,"."))}}();Ee&&Ee(ie,Se)},[ae,we,it,kt,Ae]),sr=L.useCallback(function(ie,Se){if(ir){Fn(ie,Se);var Ee=Vt[Vt.indexOf(Ae)+1];if(!Ee)throw new Error("Attempted to drill down from the lowest view.");Un(ie),Dr(Ee);var Ht={action:"drillDown",activeStartDate:ie,value:ut,view:Ee};Q&&!Uu(lt,ie)&&Q(Ht),en&&Ae!==Ee&&en(Ht),st&&st(Ht)}},[lt,ir,Q,Fn,st,en,ut,Ae,Vt]),Bo=L.useCallback(function(){if(Fo){var ie=Vt[Vt.indexOf(Ae)-1];if(!ie)throw new Error("Attempted to drill up from the highest view.");var Se=Ki(ie,lt);Un(Se),Dr(ie);var Ee={action:"drillUp",activeStartDate:Se,value:ut,view:ie};Q&&!Uu(lt,Se)&&Q(Ee),en&&Ae!==ie&&en(Ee),nr&&nr(Ee)}},[lt,Fo,Q,nr,en,ut,Ae,Vt]),jo=L.useCallback(function(ie,Se){var Ee=ut;Fn(ie,Se);var Ht=ot&&!rf(Ee),Gt;if(ot)if(Ht)Gt=Ki(fn,ie);else{if(!Ee)throw new Error("previousValue is required");if(Array.isArray(Ee))throw new Error("previousValue must not be an array");Gt=lM(fn,Ee,ie)}else Gt=ct(ie);var Ni=!ot||Ht||w?MI({maxDate:j,maxDetail:_,minDate:x,minDetail:D,value:Gt,view:Ae}):null;Se.persist(),Un(Ni),Mo(Gt);var zo={action:"onChange",activeStartDate:Ni,value:Gt,view:Ae};if(Q&&!Uu(lt,Ni)&&Q(zo),ce)if(ot){var Xl=rf(Gt);if(!Xl)ce(Gt||null,Se);else if(i){if(Array.isArray(Gt))throw new Error("value must not be an array");ce([Gt||null,null],Se)}}else ce(Gt||null,Se)},[lt,i,ct,w,j,_,x,D,Q,ce,Fn,ot,ut,fn,Ae]);function Or(ie){_s(ie)}function $o(){_s(null)}L.useImperativeHandle(n,function(){return{activeStartDate:lt,drillDown:sr,drillUp:Bo,onChange:jo,setActiveStartDate:ws,value:ut,view:Ae}},[lt,sr,Bo,jo,ws,ut,Ae]);function Ql(ie){var Se=ie?EI(Ae,lt):Ki(Ae,lt),Ee=ir?sr:jo,Ht={activeStartDate:Se,hover:Kl,locale:P,maxDate:j,minDate:x,onClick:Ee,onMouseOver:ot?Or:void 0,tileClassName:Po,tileContent:at,tileDisabled:pt,value:ut,valueType:fn};switch(Ae){case"century":return Y.createElement(RM,qs({formatYear:N,showNeighboringCentury:ye},Ht));case"decade":return Y.createElement(LM,qs({formatYear:N,showNeighboringDecade:tn},Ht));case"year":return Y.createElement(BM,qs({formatMonth:m,formatMonthYear:y},Ht));case"month":return Y.createElement(QM,qs({calendarType:s,formatDay:h,formatLongDate:f,formatShortWeekday:T,formatWeekday:I,onClickWeekNumber:Lt,onMouseLeave:ot?$o:void 0,showFixedNumberOfWeeks:typeof Ci<"u"?Ci:Mn,showNeighboringMonth:rr,showWeekNumbers:Ro},Ht));default:throw new Error("Invalid view: ".concat(Ae,"."))}}function Es(){return ee?Y.createElement(dM,{activeStartDate:lt,drillUp:Bo,formatMonthYear:y,formatYear:N,locale:P,maxDate:j,minDate:x,navigationAriaLabel:A,navigationAriaLive:je,navigationLabel:qt,next2AriaLabel:Ge,next2Label:Ot,nextAriaLabel:q,nextLabel:X,prev2AriaLabel:Dn,prev2Label:On,prevAriaLabel:Ln,prevLabel:Vn,setActiveStartDate:ws,showDoubleView:Mn,view:Ae,views:Vt}):null}var Yl=Array.isArray(ut)?ut:[ut];return Y.createElement("div",{className:Hd(Mu,ot&&Yl.length===1&&"".concat(Mu,"--selectRange"),Mn&&"".concat(Mu,"--doubleView"),o),ref:E},Es(),Y.createElement("div",{className:"".concat(Mu,"__viewContainer"),onBlur:ot?$o:void 0,onMouseLeave:ot?$o:void 0},Ql(),Mn?Ql(!0):null))}),B_=F.instanceOf(Date),j_=F.oneOfType([F.string,F.instanceOf(Date)]),$_=F.oneOfType([j_,NM(j_)]);UI.propTypes={activeStartDate:B_,allowPartialRange:F.bool,calendarType:xI,className:Jc,defaultActiveStartDate:B_,defaultValue:$_,defaultView:Zc,formatDay:F.func,formatLongDate:F.func,formatMonth:F.func,formatMonthYear:F.func,formatShortWeekday:F.func,formatWeekday:F.func,formatYear:F.func,goToRangeStartOnSelect:F.bool,inputRef:xM,locale:F.string,maxDate:Kg,maxDetail:F.oneOf(no),minDate:Gg,minDetail:F.oneOf(no),navigationAriaLabel:F.string,navigationAriaLive:F.oneOf(["off","polite","assertive"]),navigationLabel:F.func,next2AriaLabel:F.string,next2Label:F.node,nextAriaLabel:F.string,nextLabel:F.node,onActiveStartDateChange:F.func,onChange:F.func,onClickDay:F.func,onClickDecade:F.func,onClickMonth:F.func,onClickWeekNumber:F.func,onClickYear:F.func,onDrillDown:F.func,onDrillUp:F.func,onViewChange:F.func,prev2AriaLabel:F.string,prev2Label:F.node,prevAriaLabel:F.string,prevLabel:F.node,returnValue:F.oneOf(["start","end","range"]),selectRange:F.bool,showDoubleView:F.bool,showFixedNumberOfWeeks:F.bool,showNavigation:F.bool,showNeighboringCentury:F.bool,showNeighboringDecade:F.bool,showNeighboringMonth:F.bool,showWeekNumbers:F.bool,tileClassName:F.oneOfType([F.func,Jc]),tileContent:F.oneOfType([F.func,F.node]),tileDisabled:F.func,value:$_,view:Zc};const nU=UI;const rU=({isOpen:t,onClose:e,currentUser:n})=>{const[r,i]=L.useState(null),[s,o]=L.useState([]),[l,u]=L.useState({}),[c,h]=L.useState(!1);L.useEffect(()=>{t&&f()},[t]);const f=async()=>{var w;h(!0);try{let E=[];((w=n==null?void 0:n.role)==null?void 0:w.toLowerCase())==="admin"?E=await fe.getAllBookings():E=await fe.getBookingsByUser(n.id),o(E);const P={};E.forEach(U=>{const S=new Date(U.startTime).toISOString().split("T")[0];P[S]||(P[S]=[]),P[S].push(U)}),u(P)}catch(E){console.error("Error loading bookings for calendar:",E)}finally{h(!1)}},m=w=>{i(w)},y=({date:w})=>{const E=w.toISOString().split("T")[0],P=l[E]||[];return P.length===0?null:g("div",{className:"text-xs",children:g("div",{className:"bg-blue-500 text-white rounded-full w-5 h-5 flex items-center justify-center mx-auto mb-1",children:P.length})})},T=({date:w})=>{const E=w.toISOString().split("T")[0],P=l[E]||[];if(P.length===0)return"";const U=P.some(_=>_.status==="approved"),j=P.some(_=>_.status==="pending"),S=P.some(_=>_.status==="rejected");return U?"react-calendar__tile--has-approved":j?"react-calendar__tile--has-pending":S?"react-calendar__tile--has-rejected":"react-calendar__tile--has-bookings"},I=w=>new Date(w).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),N=w=>{switch(w){case"approved":return"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300";case"pending":return"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-300";case"rejected":return"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300";default:return"bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-300"}},k=()=>{if(!r)return[];const w=r.toISOString().split("T")[0];return l[w]||[]};return t?g("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50",children:C("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-gray-700",children:[C("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[g("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Booking Calendar"}),g("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400",children:g(us,{className:"w-6 h-6"})})]}),g("div",{className:"p-6",children:c?C("div",{className:"flex items-center justify-center py-8",children:[g("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 dark:border-blue-400"}),g("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading bookings..."})]}):C("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[C("div",{children:[g("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Calendar View"}),g("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:g(nU,{onChange:m,value:r,tileContent:y,tileClassName:T,className:"w-full"})}),C("div",{className:"mt-4 space-y-2 text-sm",children:[C("div",{className:"flex items-center space-x-2",children:[g("div",{className:"w-4 h-4 bg-green-100 dark:bg-green-900 rounded"}),g("span",{className:"text-gray-900 dark:text-gray-100",children:"Approved Bookings"})]}),C("div",{className:"flex items-center space-x-2",children:[g("div",{className:"w-4 h-4 bg-yellow-100 dark:bg-yellow-900 rounded"}),g("span",{className:"text-gray-900 dark:text-gray-100",children:"Pending Bookings"})]}),C("div",{className:"flex items-center space-x-2",children:[g("div",{className:"w-4 h-4 bg-red-100 dark:bg-red-900 rounded"}),g("span",{className:"text-gray-900 dark:text-gray-100",children:"Rejected Bookings"})]})]})]}),C("div",{children:[g("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:r?`Bookings for ${r.toLocaleDateString()}`:"Select a date to view bookings"}),r&&g("div",{className:"space-y-3",children:k().length>0?k().sort((w,E)=>new Date(w.startTime).getTime()-new Date(E.startTime).getTime()).map(w=>{var E;return C("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[C("div",{className:"flex items-center justify-between mb-2",children:[g("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:w.resourceName}),g("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(w.status)}`,children:w.status})]}),C("div",{className:"space-y-2 text-sm",children:[C("div",{className:"flex items-center space-x-2",children:[g(f1,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),C("span",{className:"text-gray-900 dark:text-gray-100",children:[I(w.startTime)," - ",I(w.endTime)]})]}),C("div",{className:"flex items-center space-x-2",children:[g(bl,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),C("span",{className:"text-gray-900 dark:text-gray-100",children:[w.attendees," people"]})]}),C("div",{className:"flex items-center space-x-2",children:[g(Ed,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),g("span",{className:"text-gray-900 dark:text-gray-100",children:w.purpose})]}),((E=n==null?void 0:n.role)==null?void 0:E.toLowerCase())==="admin"&&C("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Booked by: ",w.username," (",w.userEmail,")"]})]})]},w.id)}):g("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No bookings for this date"})}),!r&&g("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Click on a date in the calendar to view bookings"})]})]})})]})}):null},iU=({isOpen:t,onClose:e,currentUser:n,onNotificationCreated:r})=>{const[i,s]=L.useState({title:"",message:"",type:"admin_announcement"}),[o,l]=L.useState({}),[u,c]=L.useState(!1),h=(y,T)=>{s(I=>({...I,[y]:T})),o[y]&&l(I=>({...I,[y]:""}))},f=()=>{const y={};return i.title.trim()||(y.title="Title is required"),i.message.trim()||(y.message="Message is required"),i.title.length>100&&(y.title="Title must be less than 100 characters"),i.message.length>1e3&&(y.message="Message must be less than 1000 characters"),l(y),Object.keys(y).length===0},m=async y=>{if(y.preventDefault(),!!f()){c(!0);try{const T={title:i.title.trim(),message:i.message.trim(),type:i.type,isRead:!1,createdBy:n.username,isSystemNotification:!0};console.log("📢 Creating system notification:",T),await fe.createNotification(T),se.success("Notification sent successfully to all users!"),r(),e(),s({title:"",message:"",type:"admin_announcement"})}catch(T){console.error("Notification creation failed:",T),se.error(T.message||"Failed to create notification")}finally{c(!1)}}};return t?g("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:C("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[C("div",{className:"flex items-center justify-between p-6 border-b",children:[g("h2",{className:"text-xl font-semibold text-gray-900",children:"Create System Notification"}),g("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:g(us,{className:"w-6 h-6"})})]}),C("form",{onSubmit:m,className:"p-6 space-y-6",children:[C("div",{children:[g("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Type"}),C("select",{value:i.type,onChange:y=>h("type",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[g("option",{value:"admin_announcement",children:"Announcement"}),g("option",{value:"maintenance_alert",children:"Maintenance Alert"}),g("option",{value:"system_announcement",children:"System Update"})]})]}),g(ve,{label:"Notification Title",type:"text",value:i.title,onChange:y=>h("title",y),error:o.title,placeholder:"Enter notification title...",required:!0}),C("div",{children:[g("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),g("textarea",{value:i.message,onChange:y=>h("message",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Enter notification message...",required:!0}),o.message&&g("p",{className:"text-red-500 text-sm mt-1",children:o.message})]}),(i.title||i.message)&&C("div",{className:"bg-gray-50 rounded-lg p-4",children:[g("h4",{className:"font-medium text-gray-900 mb-2",children:"Preview"}),C("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[i.title&&g("h5",{className:"font-semibold text-gray-900 mb-2",children:i.title}),i.message&&g("p",{className:"text-gray-700 text-sm",children:i.message})]})]}),C("div",{className:"flex space-x-3 pt-4",children:[g(Te,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:"Cancel"}),C(Te,{type:"submit",loading:u,className:"flex-1",children:[g(m1,{className:"w-4 h-4 mr-2"}),"Send Notification"]})]})]})]})}):null},sU=({isOpen:t,onClose:e,currentUser:n,onProfileUpdated:r})=>{const[i,s]=L.useState({username:(n==null?void 0:n.username)||"",email:(n==null?void 0:n.email)||"",department:(n==null?void 0:n.department)||"",bio:(n==null?void 0:n.bio)||""}),[o,l]=L.useState({}),[u,c]=L.useState(!1),h=(y,T)=>{s(I=>({...I,[y]:T})),o[y]&&l(I=>({...I,[y]:""}))},f=()=>{const y={};return i.username.trim()?i.username.length<3?y.username="Username must be at least 3 characters":i.username.length>30&&(y.username="Username must be less than 30 characters"):y.username="Username is required",i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(y.email="Please enter a valid email address"):y.email="Email is required",i.department&&i.department.trim()&&i.department.trim().length>50&&(y.department="Department must be less than 50 characters"),i.bio.length>500&&(y.bio="Bio must be less than 500 characters"),l(y),Object.keys(y).length===0},m=async y=>{if(y.preventDefault(),!!f()){c(!0);try{const T={username:i.username.trim(),email:i.email.trim(),department:i.department.trim(),bio:i.bio.trim(),updatedAt:new Date().toISOString()};if(i.newPassword){se.error('Password changes are not supported in profile settings. Please use the "Forgot Password" feature on the login page.'),c(!1);return}console.log("🔄 Updating user profile:",{...T,password:i.newPassword?"[HIDDEN]":"unchanged"}),await fe.updateUserProfile(n.id,T);const I={...n,...T};localStorage.setItem("user",JSON.stringify(I)),se.success("Profile updated successfully!"),r(),e()}catch(T){console.error("Profile update failed:",T),se.error(T.message||"Failed to update profile")}finally{c(!1)}}};return t?g("div",{className:"fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm",children:C("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-gray-200 dark:border-gray-700",children:[C("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[g("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Profile Settings"}),g("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400",children:g(us,{className:"w-6 h-6"})})]}),C("form",{onSubmit:m,className:"p-6 space-y-6",children:[C("div",{className:"space-y-4",children:[C("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 flex items-center",children:[g(Dc,{className:"w-5 h-5 mr-2"}),"Basic Information"]}),g(ve,{label:"Username",type:"text",value:i.username,onChange:y=>h("username",y),error:o.username,placeholder:"Enter your username",required:!0}),g(ve,{label:"Email Address",type:"email",value:i.email,onChange:y=>h("email",y),error:o.email,placeholder:"Enter your email address",required:!0}),C("div",{children:[g("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Department (Optional)"}),C("select",{value:i.department,onChange:y=>h("department",y.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[g("option",{value:"",children:"Select Department (Optional)"}),g("option",{value:"Computer Science",children:"Computer Science"}),g("option",{value:"Engineering",children:"Engineering"}),g("option",{value:"Business",children:"Business"}),g("option",{value:"Arts",children:"Arts"}),g("option",{value:"Science",children:"Science"}),g("option",{value:"Medicine",children:"Medicine"}),g("option",{value:"Law",children:"Law"}),g("option",{value:"Education",children:"Education"}),g("option",{value:"Other",children:"Other"})]}),o.department&&g("p",{className:"text-red-500 text-sm mt-1",children:o.department})]}),C("div",{children:[g("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bio"}),g("textarea",{value:i.bio,onChange:y=>h("bio",y.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",rows:3,placeholder:"Tell us about yourself..."}),C("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[i.bio.length,"/500 characters"]}),o.bio&&g("p",{className:"text-red-500 text-sm mt-1",children:o.bio})]})]}),C("div",{className:"space-y-4 pt-6 border-t",children:[C("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 flex items-center",children:[g(KA,{className:"w-5 h-5 mr-2"}),"Password Management"]}),g("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4",children:C("p",{className:"text-sm text-blue-800 dark:text-blue-400",children:[g("strong",{children:"Note:"}),' Password changes are not available in profile settings for security reasons. If you need to change your password, please use the "Forgot Password" feature on the login page.']})})]}),C("div",{className:"flex space-x-3 pt-6 border-t",children:[g(Te,{type:"button",variant:"outline",onClick:e,className:"flex-1",children:"Cancel"}),g(Te,{type:"submit",loading:u,className:"flex-1",children:"Save Changes"})]})]})]})}):null},oU=()=>{const{theme:t,toggleTheme:e,isDark:n}=nI();return C("button",{onClick:e,className:"relative inline-flex items-center justify-center w-12 h-12 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-300 transform hover:scale-105 active:scale-95 group","aria-label":`Switch to ${n?"light":"dark"} mode`,children:[C("div",{className:"relative w-6 h-6",children:[g(JA,{className:`absolute inset-0 w-6 h-6 text-yellow-500 transition-all duration-300 ${n?"opacity-0 rotate-90 scale-0":"opacity-100 rotate-0 scale-100"}`}),g(XA,{className:`absolute inset-0 w-6 h-6 text-blue-400 transition-all duration-300 ${n?"opacity-100 rotate-0 scale-100":"opacity-0 -rotate-90 scale-0"}`})]}),g("div",{className:"absolute inset-0 rounded-lg bg-blue-500 opacity-0 group-hover:opacity-10 transition-opacity duration-300"})]})},aU=({className:t=""})=>{const[e,n]=L.useState(0),[r,i]=L.useState(!0),[s,o]=L.useState(!0);return L.useEffect(()=>{const l=async()=>{try{i(!0);const c=await fe.getAllUsers();n(c.length)}catch(c){console.error("Error fetching user count:",c),n(0)}finally{i(!1)}};l();const u=setInterval(l,3e4);return()=>clearInterval(u)},[]),C("div",{className:`card p-6 animate-fade-in ${t}`,children:[C("div",{className:"flex items-center justify-between mb-4",children:[C("div",{className:"flex items-center space-x-3",children:[g("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:g(bl,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),C("div",{children:[g("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Active Users"}),g("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Real-time count"})]})]}),C("div",{className:"flex items-center space-x-2",children:[g("div",{className:`w-2 h-2 rounded-full ${s?"bg-green-500":"bg-red-500"} animate-pulse`}),g("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s?"Online":"Offline"})]})]}),C("div",{className:"flex items-end justify-between",children:[g("div",{children:r?g("div",{className:"h-8 w-16 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}):C("div",{className:"flex items-baseline space-x-2",children:[g("span",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:e}),g("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"users"})]})}),C("div",{className:"flex items-center space-x-1 text-green-500",children:[g(ZA,{className:"w-4 h-4"}),g("span",{className:"text-sm font-medium",children:"+12%"})]})]}),C("div",{className:"mt-4 flex items-center space-x-2",children:[g(FA,{className:"w-4 h-4 text-blue-500"}),C("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Last updated: ",new Date().toLocaleTimeString()]})]})]})},lU=({resourceId:t,resourceName:e,isUnderMaintenance:n,onToggle:r,className:i=""})=>{const[s,o]=L.useState(!1),[l,u]=L.useState(!1),[c,h]=L.useState(""),f=async()=>{if(n){o(!0);try{await fe.updateResource(t,{isUnderMaintenance:!1,maintenanceNote:"",status:"available"}),r(!1),se.success(`${e} is now available for booking`)}catch(T){console.error("Error updating resource:",T),se.error("Failed to update resource status")}finally{o(!1)}}else u(!0)},m=async()=>{if(!c.trim()){se.error("Please enter a maintenance note");return}o(!0);try{await fe.updateResource(t,{isUnderMaintenance:!0,maintenanceNote:c.trim(),status:"maintenance"}),r(!0),u(!1),h(""),se.success(`${e} is now under maintenance`)}catch(T){console.error("Error updating resource:",T),se.error("Failed to update resource status")}finally{o(!1)}},y=()=>{u(!1),h("")};return C("div",{className:`relative ${i}`,children:[C("button",{onClick:f,disabled:s,className:`relative inline-flex items-center justify-center px-4 py-2 rounded-lg font-medium transition-all duration-300 transform hover:scale-105 active:scale-95 ${n?"bg-orange-100 hover:bg-orange-200 text-orange-700 dark:bg-orange-900 dark:hover:bg-orange-800 dark:text-orange-300":"bg-green-100 hover:bg-green-200 text-green-700 dark:bg-green-900 dark:hover:bg-green-800 dark:text-green-300"} ${s?"opacity-50 cursor-not-allowed":""}`,children:[g("div",{className:"flex items-center space-x-2",children:n?C(hi,{children:[g(Bm,{className:"w-4 h-4"}),g("span",{children:"Under Maintenance"})]}):C(hi,{children:[g(h1,{className:"w-4 h-4"}),g("span",{children:"Available"})]})}),s&&g("div",{className:"absolute inset-0 flex items-center justify-center",children:g("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"})})]}),l&&C("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 z-10 animate-slide-up",children:[C("div",{className:"flex items-center space-x-2 mb-3",children:[g(jA,{className:"w-5 h-5 text-orange-500"}),g("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Set Maintenance Note"})]}),g("textarea",{value:c,onChange:T=>h(T.target.value),placeholder:"Enter maintenance reason...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 resize-none",rows:3}),C("div",{className:"flex space-x-2 mt-3",children:[g("button",{onClick:m,disabled:s||!c.trim(),className:"flex-1 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-300 text-white font-medium py-2 px-3 rounded-md transition-colors duration-200",children:"Set Maintenance"}),g("button",{onClick:y,className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium py-2 px-3 rounded-md transition-colors duration-200",children:"Cancel"})]})]})]})},uU=()=>{var Vn,xe,hn,ot,Mn,Ci;const t=Sl();nI();const[e,n]=L.useState(null),[r,i]=L.useState([]),[s,o]=L.useState([]),[l,u]=L.useState([]),[c,h]=L.useState(!0),[f,m]=L.useState("overview"),[y,T]=L.useState(!1),[I,N]=L.useState(!1),[k,w]=L.useState(null),[E,P]=L.useState(!1),[U,j]=L.useState(!1),[S,_]=L.useState(null),[b,x]=L.useState(!1),[R,D]=L.useState(!1),[A,je]=L.useState(!1);L.useEffect(()=>{(async()=>{try{const ee=localStorage.getItem("user");if(ee){const ye=JSON.parse(ee);if(console.log("👤 Current user data:",ye),console.log("🔍 User role:",ye.role,"Role type:",typeof ye.role),console.log("🆔 User ID:",ye.id,"ID type:",typeof ye.id),!ye.id){console.error("❌ User ID not found in user data"),se.error("User data is incomplete. Please log in again."),t("/login");return}n(ye),await qt(ye.id,ye.role)}else{console.log("❌ No user data found in localStorage"),t("/login");return}}catch(ee){console.error("❌ Error initializing dashboard:",ee),se.error("Failed to initialize dashboard."),t("/login")}finally{h(!1)}})()},[t]);const qt=async(M,ee)=>{try{console.log("🔄 Loading dashboard data for user:",M,"role:",ee);let ye=[];ee.toLowerCase()==="admin"?ye=await fe.getAllNotifications():ye=await fe.getNotificationsByUser(M);const[tn]=await Promise.all([fe.getResources()]);let En=[];ee.toLowerCase()==="admin"?(console.log("👑 Loading all bookings for admin"),En=await fe.getAllBookings()):(console.log("👤 Loading user bookings for:",ee),En=await fe.getBookingsByUser(M)),console.log("📊 Dashboard data loaded:",{resources:tn.length,bookings:En.length,notifications:ye.length,userRole:ee}),i(tn),o(En),u(ye)}catch(ye){console.error("Error loading dashboard data:",ye),se.error("Failed to load dashboard data.")}},Ge=async()=>{try{await fe.logout(),localStorage.removeItem("user"),localStorage.removeItem("token"),t("/login")}catch(M){console.error("Logout error:",M),se.error("Logout failed.")}},Ot=async()=>{try{const M=await fe.getResources();i(M)}catch(M){console.error("Error refreshing resources:",M)}},q=async()=>{try{const M=await fe.getResources();i(M)}catch(M){console.error("Error refreshing resources:",M)}},X=M=>{w(M),N(!0)},Q=async M=>{if(window.confirm("Are you sure you want to delete this resource?"))try{await fe.deleteResource(M),se.success("Resource deleted successfully!");const ee=await fe.getResources();i(ee)}catch(ee){console.error("Error deleting resource:",ee),se.error("Failed to delete resource. Please try again.")}},ce=M=>{w(M),P(!0)},ae=async()=>{var M;if(e)try{console.log("🔄 Refreshing bookings for user:",e.id);let ee=[];((M=e.role)==null?void 0:M.toLowerCase())==="admin"?(console.log("👑 Refreshing all bookings for admin"),ee=await fe.getAllBookings()):(console.log("👤 Refreshing user bookings for:",e.role),ee=await fe.getBookingsByUser(e.id)),console.log("📋 Updated bookings:",ee),o(ee)}catch(ee){console.error("Error refreshing bookings:",ee)}},we=M=>{_(M),j(!0)},it=async()=>{var M;if(e)try{if(((M=e.role)==null?void 0:M.toLowerCase())==="admin"){const ee=await fe.getAllBookings();o(ee)}else{const ee=await fe.getBookingsByUser(e.id);o(ee)}}catch(ee){console.error("Error refreshing bookings:",ee)}},Lt=async M=>{try{await fe.approveBooking(M),se.success("Booking approved successfully!"),it()}catch(ee){console.error("Error approving booking:",ee),se.error("Failed to approve booking.")}},kt=async M=>{try{await fe.rejectBooking(M),se.success("Booking rejected successfully!"),it()}catch(ee){console.error("Error rejecting booking:",ee),se.error("Failed to reject booking.")}},st=()=>{x(!0)},nr=()=>{D(!0)},en=async()=>{if(e)try{const M=await fe.getNotificationsByUser(e.id);u(M)}catch(M){console.error("Error refreshing notifications:",M)}},Dn=()=>{je(!0)},On=async()=>{if(e)try{const M=localStorage.getItem("user");if(M){const ee=JSON.parse(M);n(ee)}}catch(M){console.error("Error refreshing user data:",M)}},Ln=async()=>{if(e)try{console.log("🔄 Manual refresh of bookings for user:",e.id),await qt(e.id,e.role),se.success("Bookings refreshed!")}catch(M){console.error("Error refreshing bookings:",M),se.error("Failed to refresh bookings.")}};return c?g("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:C("div",{className:"text-center",children:[g("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),g("p",{className:"mt-4 text-gray-600",children:"Loading dashboard..."})]})}):e?C("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-all duration-300",children:[g(kd,{position:"top-right"}),g("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-all duration-300",children:g("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:C("div",{className:"flex justify-between items-center h-16",children:[C("div",{className:"flex items-center",children:[g(p1,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mr-3"}),g("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Campus Resources Management"})]}),C("div",{className:"flex items-center space-x-4",children:[g(oU,{}),((Vn=e.role)==null?void 0:Vn.toLowerCase())==="admin"&&g(aU,{className:"hidden lg:block"}),C("div",{className:"flex items-center space-x-2",children:[g("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:g(Dc,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),C("div",{className:"text-sm",children:[g("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e.username}),g("p",{className:"text-gray-500 dark:text-gray-400 capitalize",children:e.role})]})]}),C(Te,{onClick:Dn,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[g(Dc,{className:"w-4 h-4"}),g("span",{children:"Profile"})]}),C(Te,{onClick:Ge,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[g(QA,{className:"w-4 h-4"}),g("span",{children:"Logout"})]})]})]})})}),C("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[C("div",{className:"mb-8",children:[C("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:["Welcome back, ",e.username,"!"]}),g("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your campus resources and bookings from your dashboard."})]}),g("div",{className:"mb-8",children:g("nav",{className:"flex space-x-8",children:["overview","resources","bookings","notifications"].map(M=>g("button",{onClick:()=>m(M),className:`py-2 px-1 border-b-2 font-medium text-sm capitalize transition-colors duration-200 ${f===M?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:M},M))})}),C("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 transition-all duration-300",children:[f==="overview"&&C("div",{className:"p-6",children:[g("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Overview"}),C("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:C("div",{className:"flex items-center",children:[g("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded-lg",children:g(Jv,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),C("div",{className:"ml-4",children:[g("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Resources"}),g("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:r.length})]})]})}),g("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:C("div",{className:"flex items-center",children:[g("div",{className:"p-2 bg-green-100 dark:bg-green-800 rounded-lg",children:g(wd,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),C("div",{className:"ml-4",children:[g("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Your Bookings"}),g("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:s.length})]})]})}),g("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-6 border border-yellow-200 dark:border-yellow-800",children:C("div",{className:"flex items-center",children:[g("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-800 rounded-lg",children:g(YA,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),C("div",{className:"ml-4",children:[g("p",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Notifications"}),g("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:l.length})]})]})})]}),C("div",{className:"space-y-4",children:[g("h4",{className:"text-md font-semibold text-gray-900 dark:text-gray-100",children:"Recent Activity"}),s.length>0?g("div",{className:"space-y-3",children:s.slice(0,3).map(M=>C("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[C("div",{className:"flex items-center space-x-3",children:[g($A,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),C("div",{children:[g("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:M.resourceName}),C("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[new Date(M.startTime).toLocaleDateString()," at"," ",new Date(M.startTime).toLocaleTimeString()]})]})]}),g("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${M.status==="approved"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300":M.status==="pending"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-300":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-300"}`,children:M.status})]},M.id))}):g("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No recent bookings found."})]})]}),f==="resources"&&C("div",{className:"p-6",children:[C("div",{className:"flex justify-between items-center mb-6",children:[g("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Available Resources"}),((xe=e.role)==null?void 0:xe.toLowerCase())==="admin"&&C(Te,{className:"flex items-center space-x-2",onClick:()=>T(!0),children:[g(ep,{className:"w-4 h-4"}),g("span",{children:"Add Resource"})]})]}),r.length>0?g("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(M=>{var ee,ye;return C("div",{className:`card p-6 transition-all duration-300 ${M.isUnderMaintenance?"opacity-60 grayscale":""}`,children:[C("div",{className:"flex items-center justify-between mb-4",children:[g("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:M.name}),C("div",{className:"flex items-center space-x-2",children:[g("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${M.status==="available"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":M.status==="booked"?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}`,children:M.status}),M.isUnderMaintenance&&g("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:"Maintenance"})]})]}),g("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:M.description}),M.isUnderMaintenance&&M.maintenanceNote&&g("div",{className:"mb-4 p-3 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg",children:C("p",{className:"text-sm text-orange-800 dark:text-orange-300",children:[g("strong",{children:"Maintenance Note:"})," ",M.maintenanceNote]})}),C("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400",children:[C("div",{className:"flex items-center",children:[g(qi,{className:"w-4 h-4 mr-2"}),g("span",{children:M.category})]}),C("div",{className:"flex items-center",children:[g(bl,{className:"w-4 h-4 mr-2"}),C("span",{children:[M.capacity||"N/A"," capacity"]})]}),C("div",{className:"flex items-center",children:[g(Jv,{className:"w-4 h-4 mr-2"}),g("span",{children:M.location})]})]}),C("div",{className:"mt-4 space-y-3",children:[((ee=e.role)==null?void 0:ee.toLowerCase())==="admin"&&g(lU,{resourceId:M.id,resourceName:M.name,isUnderMaintenance:M.isUnderMaintenance||!1,onToggle:tn=>{i(En=>En.map(rr=>rr.id===M.id?{...rr,isUnderMaintenance:tn,status:tn?"maintenance":"available"}:rr))}}),C("div",{className:"flex space-x-2",children:[g(Te,{className:"flex-1",size:"sm",onClick:()=>ce(M),disabled:M.isUnderMaintenance,children:M.isUnderMaintenance?"Unavailable":"Book Now"}),((ye=e.role)==null?void 0:ye.toLowerCase())==="admin"&&C(hi,{children:[g(Te,{variant:"outline",size:"sm",onClick:()=>X(M),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Edit"}),g(Te,{variant:"outline",size:"sm",onClick:()=>Q(M.id),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})]})]})]},M.id)})}):g("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No resources available."})]}),f==="bookings"&&C("div",{className:"p-6",children:[C("div",{className:"flex justify-between items-center mb-6",children:[g("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:((hn=e==null?void 0:e.role)==null?void 0:hn.toLowerCase())==="admin"?"All Bookings":"Your Bookings"}),C("div",{className:"flex space-x-2",children:[C(Te,{variant:"outline",size:"sm",onClick:st,className:"flex items-center space-x-2",children:[g(zA,{className:"w-4 h-4"}),g("span",{children:"Calendar View"})]}),C(Te,{variant:"outline",size:"sm",onClick:Ln,className:"flex items-center space-x-2",children:[g(f1,{className:"w-4 h-4"}),g("span",{children:"Refresh"})]})]})]}),s.length>0?g("div",{className:"space-y-4",children:s.map(M=>{var ee,ye,tn;return C("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6",children:[C("div",{className:"flex items-center justify-between mb-4",children:[C("div",{children:[g("h4",{className:"font-semibold text-gray-900 dark:text-gray-100",children:M.resourceName}),((ee=e==null?void 0:e.role)==null?void 0:ee.toLowerCase())==="admin"&&C("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Booked by: ",M.username," (",M.userEmail,")"]})]}),g("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${M.status==="approved"?"bg-green-100 text-green-800":M.status==="pending"?"bg-yellow-100 text-yellow-800":M.status==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:M.status})]}),C("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[C("div",{children:[g("p",{className:"text-gray-500 dark:text-gray-400",children:"Start Time"}),g("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(M.startTime).toLocaleString()})]}),C("div",{children:[g("p",{className:"text-gray-500 dark:text-gray-400",children:"End Time"}),g("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:new Date(M.endTime).toLocaleString()})]}),C("div",{children:[g("p",{className:"text-gray-500 dark:text-gray-400",children:"Purpose"}),g("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:M.purpose})]}),C("div",{children:[g("p",{className:"text-gray-500 dark:text-gray-400",children:"Attendees"}),C("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[M.attendees," people"]})]})]}),C("div",{className:"mt-4 flex space-x-2",children:[g(Te,{variant:"outline",size:"sm",onClick:()=>we(M),children:"View Details"}),((ye=e==null?void 0:e.role)==null?void 0:ye.toLowerCase())==="admin"&&M.status==="pending"&&C(hi,{children:[g(Te,{variant:"outline",size:"sm",onClick:()=>Lt(M.id),className:"text-green-600 hover:text-green-700",children:"Approve"}),g(Te,{variant:"outline",size:"sm",onClick:()=>kt(M.id),className:"text-red-600 hover:text-red-700",children:"Reject"})]}),((tn=e==null?void 0:e.role)==null?void 0:tn.toLowerCase())!=="admin"&&M.status==="approved"&&g("span",{className:"text-green-600 text-sm font-medium",children:"✅ Booking Approved"})]})]},M.id)})}):g("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:(((ot=e==null?void 0:e.role)==null?void 0:ot.toLowerCase())==="admin","No bookings found.")})]}),f==="notifications"&&C("div",{className:"p-6",children:[C("div",{className:"flex justify-between items-center mb-6",children:[g("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:((Mn=e==null?void 0:e.role)==null?void 0:Mn.toLowerCase())==="admin"?"All Notifications":"Your Notifications"}),((Ci=e==null?void 0:e.role)==null?void 0:Ci.toLowerCase())==="admin"&&C(Te,{onClick:nr,className:"flex items-center space-x-2",children:[g(m1,{className:"w-4 h-4"}),g("span",{children:"Create Notification"})]})]}),l.length>0?g("div",{className:"space-y-4",children:l.map(M=>{var ee;return g("div",{className:`border-l-4 p-4 ${M.isRead?"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800":"border-blue-500 dark:border-blue-600 bg-blue-50 dark:bg-blue-900/20"}`,children:C("div",{className:"flex items-start justify-between",children:[C("div",{className:"flex-1",children:[C("div",{className:"flex items-center space-x-2 mb-2",children:[g("h4",{className:"font-medium text-gray-900 dark:text-gray-100",children:M.title}),M.isSystemNotification&&g("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 rounded-full",children:"System"})]}),g("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:M.message}),M.imageUrl&&g("div",{className:"mt-3",children:g("img",{src:M.imageUrl,alt:"Notification",className:"max-w-full max-h-48 object-cover rounded-lg"})}),C("div",{className:"flex items-center justify-between mt-2",children:[g("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(M.createdAt).toLocaleString()}),M.createdBy&&C("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["By: ",M.createdBy]})]})]}),C("div",{className:"flex items-center space-x-2",children:[!M.isRead&&g("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),((ee=e==null?void 0:e.role)==null?void 0:ee.toLowerCase())==="admin"&&M.isSystemNotification&&g("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this notification?"))try{await fe.deleteNotification(M.id),se.success("Notification deleted successfully!"),en()}catch(ye){console.error("Error deleting notification:",ye),se.error("Failed to delete notification.")}},className:"text-red-500 hover:text-red-700 text-sm",children:"Delete"})]})]})},M.id)})}):g("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No notifications found."})]})]})]}),g(tV,{isOpen:y,onClose:()=>T(!1),onResourceAdded:Ot}),g(nV,{isOpen:I,onClose:()=>{N(!1),w(null)},onResourceUpdated:q,resource:k}),g(rV,{isOpen:E,onClose:()=>{P(!1),w(null)},resource:k,currentUser:e,onBookingCreated:ae}),g(iV,{isOpen:U,onClose:()=>{j(!1),_(null)},booking:S,currentUser:e,onBookingUpdated:it}),g(rU,{isOpen:b,onClose:()=>x(!1),currentUser:e}),g(iU,{isOpen:R,onClose:()=>D(!1),currentUser:e,onNotificationCreated:en}),g(sU,{isOpen:A,onClose:()=>je(!1),currentUser:e,onProfileUpdated:On})]}):null};function cU(){return g(eV,{children:C("div",{className:"min-h-screen transition-all duration-300",children:[g(kd,{position:"top-right",toastOptions:{className:"dark:bg-gray-800 dark:text-gray-100",duration:4e3}}),C(TA,{children:[g(ga,{path:"/login",element:g(HC,{})}),g(ga,{path:"/register",element:g(Z4,{})}),g(ga,{path:"/dashboard",element:g(uU,{})}),g(ga,{path:"/",element:g(wA,{to:"/login",replace:!0})})]})]})})}t1(document.getElementById("root")).render(g(Y.StrictMode,{children:g(CA,{basename:"/Campus_Resourses_management_System",children:g(cU,{})})}));
